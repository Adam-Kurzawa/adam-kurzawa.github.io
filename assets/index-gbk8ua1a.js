function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function kd(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const lt={},di=[],An=()=>{},Sw=()=>!1,wc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Nd=t=>t.startsWith("onUpdate:"),qt=Object.assign,Od=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},Pw=Object.prototype.hasOwnProperty,je=(t,e)=>Pw.call(t,e),Ee=Array.isArray,fi=t=>Ta(t)==="[object Map]",Gi=t=>Ta(t)==="[object Set]",i_=t=>Ta(t)==="[object Date]",Ce=t=>typeof t=="function",Dt=t=>typeof t=="string",Xr=t=>typeof t=="symbol",it=t=>t!==null&&typeof t=="object",zy=t=>(it(t)||Ce(t))&&Ce(t.then)&&Ce(t.catch),Gy=Object.prototype.toString,Ta=t=>Gy.call(t),kw=t=>Ta(t).slice(8,-1),xo=t=>Ta(t)==="[object Object]",Ld=t=>Dt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Vo=kd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),bc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Nw=/-(\w)/g,Ti=bc(t=>t.replace(Nw,(e,n)=>n?n.toUpperCase():"")),Ow=/\B([A-Z])/g,qi=bc(t=>t.replace(Ow,"-$1").toLowerCase()),qy=bc(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ou=bc(t=>t?`on${qy(t)}`:""),Jr=(t,e)=>!Object.is(t,e),Tl=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Vl=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Zo=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let o_;const Ky=()=>o_||(o_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ac(t){if(Ee(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Dt(r)?xw(r):Ac(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Dt(t)||it(t))return t}const Lw=/;(?![^(]*\))/g,Dw=/:([^]+)/,Mw=/\/\*[^]*?\*\//g;function xw(t){const e={};return t.replace(Mw,"").split(Lw).forEach(n=>{if(n){const r=n.split(Dw);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Y(t){let e="";if(Dt(t))e=t;else if(Ee(t))for(let n=0;n<t.length;n++){const r=Y(t[n]);r&&(e+=r+" ")}else if(it(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Vw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Fw=kd(Vw);function Yy(t){return!!t||t===""}function Uw(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Ia(t[r],e[r]);return n}function Ia(t,e){if(t===e)return!0;let n=i_(t),r=i_(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Xr(t),r=Xr(e),n||r)return t===e;if(n=Ee(t),r=Ee(e),n||r)return n&&r?Uw(t,e):!1;if(n=it(t),r=it(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(a&&!c||!a&&c||!Ia(t[o],e[o]))return!1}}return String(t)===String(e)}function Dd(t,e){return t.findIndex(n=>Ia(n,e))}const he=t=>Dt(t)?t:t==null?"":Ee(t)||it(t)&&(t.toString===Gy||!Ce(t.toString))?JSON.stringify(t,Qy,2):String(t),Qy=(t,e)=>e&&e.__v_isRef?Qy(t,e.value):fi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Lu(r,i)+" =>"]=s,n),{})}:Gi(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Lu(n))}:Xr(e)?Lu(e):it(e)&&!Ee(e)&&!xo(e)?String(e):e,Lu=(t,e="")=>{var n;return Xr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let mn;class Xy{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=mn,!e&&mn&&(this.index=(mn.scopes||(mn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=mn;try{return mn=this,e()}finally{mn=n}}}on(){mn=this}off(){mn=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Md(t){return new Xy(t)}function $w(t,e=mn){e&&e.active&&e.effects.push(t)}function xd(){return mn}function Jy(t){mn&&mn.cleanups.push(t)}let Rs;class Vd{constructor(e,n,r,s){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,$w(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Vs();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(Bw(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Fs()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Hr,n=Rs;try{return Hr=!0,Rs=this,this._runnings++,a_(this),this.fn()}finally{l_(this),this._runnings--,Rs=n,Hr=e}}stop(){var e;this.active&&(a_(this),l_(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function Bw(t){return t.value}function a_(t){t._trackId++,t._depsLength=0}function l_(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)Zy(t.deps[e],t);t.deps.length=t._depsLength}}function Zy(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let Hr=!0,_h=0;const ev=[];function Vs(){ev.push(Hr),Hr=!1}function Fs(){const t=ev.pop();Hr=t===void 0?!0:t}function Fd(){_h++}function Ud(){for(_h--;!_h&&mh.length;)mh.shift()()}function tv(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&Zy(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const mh=[];function nv(t,e,n){Fd();for(const r of t.keys()){let s;r._dirtyLevel<e&&(s??(s=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(s??(s=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&mh.push(r.scheduler)))}Ud()}const rv=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},Fl=new WeakMap,Ss=Symbol(""),gh=Symbol("");function pn(t,e,n){if(Hr&&Rs){let r=Fl.get(t);r||Fl.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=rv(()=>r.delete(n))),tv(Rs,s)}}function _r(t,e,n,r,s,i){const o=Fl.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&Ee(t)){const c=Number(r);o.forEach((u,h)=>{(h==="length"||!Xr(h)&&h>=c)&&a.push(u)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":Ee(t)?Ld(n)&&a.push(o.get("length")):(a.push(o.get(Ss)),fi(t)&&a.push(o.get(gh)));break;case"delete":Ee(t)||(a.push(o.get(Ss)),fi(t)&&a.push(o.get(gh)));break;case"set":fi(t)&&a.push(o.get(Ss));break}Fd();for(const c of a)c&&nv(c,4);Ud()}function jw(t,e){var n;return(n=Fl.get(t))==null?void 0:n.get(e)}const Ww=kd("__proto__,__v_isRef,__isVue"),sv=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Xr)),c_=Hw();function Hw(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=He(this);for(let i=0,o=this.length;i<o;i++)pn(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(He)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Vs(),Fd();const r=He(this)[e].apply(this,n);return Ud(),Fs(),r}}),t}function zw(t){const e=He(this);return pn(e,"has",t),e.hasOwnProperty(t)}class iv{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?sb:cv:i?lv:av).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Ee(e);if(!s){if(o&&je(c_,n))return Reflect.get(c_,n,r);if(n==="hasOwnProperty")return zw}const a=Reflect.get(e,n,r);return(Xr(n)?sv.has(n):Ww(n))||(s||pn(e,"get",n),i)?a:It(a)?o&&Ld(n)?a:a.value:it(a)?s?hv(a):wa(a):a}}class ov extends iv{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const c=Ii(i);if(!Ul(r)&&!Ii(r)&&(i=He(i),r=He(r)),!Ee(e)&&It(i)&&!It(r))return c?!1:(i.value=r,!0)}const o=Ee(e)&&Ld(n)?Number(n)<e.length:je(e,n),a=Reflect.set(e,n,r,s);return e===He(s)&&(o?Jr(r,i)&&_r(e,"set",n,r):_r(e,"add",n,r)),a}deleteProperty(e,n){const r=je(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&_r(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Xr(n)||!sv.has(n))&&pn(e,"has",n),r}ownKeys(e){return pn(e,"iterate",Ee(e)?"length":Ss),Reflect.ownKeys(e)}}class Gw extends iv{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const qw=new ov,Kw=new Gw,Yw=new ov(!0),$d=t=>t,Cc=t=>Reflect.getPrototypeOf(t);function rl(t,e,n=!1,r=!1){t=t.__v_raw;const s=He(t),i=He(e);n||(Jr(e,i)&&pn(s,"get",e),pn(s,"get",i));const{has:o}=Cc(s),a=r?$d:n?Wd:ea;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function sl(t,e=!1){const n=this.__v_raw,r=He(n),s=He(t);return e||(Jr(t,s)&&pn(r,"has",t),pn(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function il(t,e=!1){return t=t.__v_raw,!e&&pn(He(t),"iterate",Ss),Reflect.get(t,"size",t)}function u_(t){t=He(t);const e=He(this);return Cc(e).has.call(e,t)||(e.add(t),_r(e,"add",t,t)),this}function h_(t,e){e=He(e);const n=He(this),{has:r,get:s}=Cc(n);let i=r.call(n,t);i||(t=He(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?Jr(e,o)&&_r(n,"set",t,e):_r(n,"add",t,e),this}function d_(t){const e=He(this),{has:n,get:r}=Cc(e);let s=n.call(e,t);s||(t=He(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&_r(e,"delete",t,void 0),i}function f_(){const t=He(this),e=t.size!==0,n=t.clear();return e&&_r(t,"clear",void 0,void 0),n}function ol(t,e){return function(r,s){const i=this,o=i.__v_raw,a=He(o),c=e?$d:t?Wd:ea;return!t&&pn(a,"iterate",Ss),o.forEach((u,h)=>r.call(s,c(u),c(h),i))}}function al(t,e,n){return function(...r){const s=this.__v_raw,i=He(s),o=fi(i),a=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=s[t](...r),h=n?$d:e?Wd:ea;return!e&&pn(i,"iterate",c?gh:Ss),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function Or(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Qw(){const t={get(i){return rl(this,i)},get size(){return il(this)},has:sl,add:u_,set:h_,delete:d_,clear:f_,forEach:ol(!1,!1)},e={get(i){return rl(this,i,!1,!0)},get size(){return il(this)},has:sl,add:u_,set:h_,delete:d_,clear:f_,forEach:ol(!1,!0)},n={get(i){return rl(this,i,!0)},get size(){return il(this,!0)},has(i){return sl.call(this,i,!0)},add:Or("add"),set:Or("set"),delete:Or("delete"),clear:Or("clear"),forEach:ol(!0,!1)},r={get(i){return rl(this,i,!0,!0)},get size(){return il(this,!0)},has(i){return sl.call(this,i,!0)},add:Or("add"),set:Or("set"),delete:Or("delete"),clear:Or("clear"),forEach:ol(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=al(i,!1,!1),n[i]=al(i,!0,!1),e[i]=al(i,!1,!0),r[i]=al(i,!0,!0)}),[t,n,e,r]}const[Xw,Jw,Zw,eb]=Qw();function Bd(t,e){const n=e?t?eb:Zw:t?Jw:Xw;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(je(n,s)&&s in r?n:r,s,i)}const tb={get:Bd(!1,!1)},nb={get:Bd(!1,!0)},rb={get:Bd(!0,!1)},av=new WeakMap,lv=new WeakMap,cv=new WeakMap,sb=new WeakMap;function ib(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ob(t){return t.__v_skip||!Object.isExtensible(t)?0:ib(kw(t))}function wa(t){return Ii(t)?t:jd(t,!1,qw,tb,av)}function uv(t){return jd(t,!1,Yw,nb,lv)}function hv(t){return jd(t,!0,Kw,rb,cv)}function jd(t,e,n,r,s){if(!it(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=ob(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function zr(t){return Ii(t)?zr(t.__v_raw):!!(t&&t.__v_isReactive)}function Ii(t){return!!(t&&t.__v_isReadonly)}function Ul(t){return!!(t&&t.__v_isShallow)}function dv(t){return zr(t)||Ii(t)}function He(t){const e=t&&t.__v_raw;return e?He(e):t}function Rc(t){return Object.isExtensible(t)&&Vl(t,"__v_skip",!0),t}const ea=t=>it(t)?wa(t):t,Wd=t=>it(t)?hv(t):t;class fv{constructor(e,n,r,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Vd(()=>e(this._value),()=>Il(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=He(this);return(!e._cacheable||e.effect.dirty)&&Jr(e._value,e._value=e.effect.run())&&Il(e,4),pv(e),e.effect._dirtyLevel>=2&&Il(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function ab(t,e,n=!1){let r,s;const i=Ce(t);return i?(r=t,s=An):(r=t.get,s=t.set),new fv(r,s,i||!s,n)}function pv(t){var e;Hr&&Rs&&(t=He(t),tv(Rs,(e=t.dep)!=null?e:t.dep=rv(()=>t.dep=void 0,t instanceof fv?t:void 0)))}function Il(t,e=4,n){t=He(t);const r=t.dep;r&&nv(r,e)}function It(t){return!!(t&&t.__v_isRef===!0)}function We(t){return _v(t,!1)}function Sc(t){return _v(t,!0)}function _v(t,e){return It(t)?t:new lb(t,e)}class lb{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:He(e),this._value=n?e:ea(e)}get value(){return pv(this),this._value}set value(e){const n=this.__v_isShallow||Ul(e)||Ii(e);e=n?e:He(e),Jr(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:ea(e),Il(this,4))}}function M(t){return It(t)?t.value:t}function dr(t){return Ce(t)?t():M(t)}const cb={get:(t,e,n)=>M(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return It(s)&&!It(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function mv(t){return zr(t)?t:new Proxy(t,cb)}function ub(t){const e=Ee(t)?new Array(t.length):{};for(const n in t)e[n]=db(t,n);return e}class hb{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return jw(He(this._object),this._key)}}function db(t,e,n){const r=t[e];return It(r)?r:new hb(t,e,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Gr(t,e,n,r){try{return r?t(...r):t()}catch(s){Pc(s,e,n)}}function xn(t,e,n,r){if(Ce(t)){const i=Gr(t,e,n,r);return i&&zy(i)&&i.catch(o=>{Pc(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(xn(t[i],e,n,r));return s}function Pc(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const u=i.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](t,o,a)===!1)return}i=i.parent}const c=e.appContext.config.errorHandler;if(c){Gr(c,null,10,[t,o,a]);return}}fb(t,n,s,r)}function fb(t,e,n,r=!0){console.error(t)}let ta=!1,yh=!1;const rn=[];let qn=0;const pi=[];let Vr=null,Is=0;const gv=Promise.resolve();let Hd=null;function wi(t){const e=Hd||gv;return t?e.then(this?t.bind(this):t):e}function pb(t){let e=qn+1,n=rn.length;for(;e<n;){const r=e+n>>>1,s=rn[r],i=na(s);i<t||i===t&&s.pre?e=r+1:n=r}return e}function zd(t){(!rn.length||!rn.includes(t,ta&&t.allowRecurse?qn+1:qn))&&(t.id==null?rn.push(t):rn.splice(pb(t.id),0,t),yv())}function yv(){!ta&&!yh&&(yh=!0,Hd=gv.then(Ev))}function _b(t){const e=rn.indexOf(t);e>qn&&rn.splice(e,1)}function mb(t){Ee(t)?pi.push(...t):(!Vr||!Vr.includes(t,t.allowRecurse?Is+1:Is))&&pi.push(t),yv()}function p_(t,e,n=ta?qn+1:0){for(;n<rn.length;n++){const r=rn[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;rn.splice(n,1),n--,r()}}}function vv(t){if(pi.length){const e=[...new Set(pi)].sort((n,r)=>na(n)-na(r));if(pi.length=0,Vr){Vr.push(...e);return}for(Vr=e,Is=0;Is<Vr.length;Is++)Vr[Is]();Vr=null,Is=0}}const na=t=>t.id==null?1/0:t.id,gb=(t,e)=>{const n=na(t)-na(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function Ev(t){yh=!1,ta=!0,rn.sort(gb);try{for(qn=0;qn<rn.length;qn++){const e=rn[qn];e&&e.active!==!1&&Gr(e,null,14)}}finally{qn=0,rn.length=0,vv(),ta=!1,Hd=null,(rn.length||pi.length)&&Ev()}}function yb(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||lt;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:p}=r[h]||lt;p&&(s=n.map(y=>Dt(y)?y.trim():y)),f&&(s=n.map(Zo))}let a,c=r[a=Ou(e)]||r[a=Ou(Ti(e))];!c&&i&&(c=r[a=Ou(qi(e))]),c&&xn(c,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,xn(u,t,6,s)}}function Tv(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Ce(t)){const c=u=>{const h=Tv(u,e,!0);h&&(a=!0,qt(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!a?(it(t)&&r.set(t,null),null):(Ee(i)?i.forEach(c=>o[c]=null):qt(o,i),it(t)&&r.set(t,o),o)}function kc(t,e){return!t||!wc(e)?!1:(e=e.slice(2).replace(/Once$/,""),je(t,e[0].toLowerCase()+e.slice(1))||je(t,qi(e))||je(t,e))}let Nt=null,Nc=null;function $l(t){const e=Nt;return Nt=t,Nc=t&&t.type.__scopeId||null,e}function cs(t){Nc=t}function us(){Nc=null}function pt(t,e=Nt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&b_(-1);const i=$l(e);let o;try{o=t(...s)}finally{$l(i),r._d&&b_(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Du(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:c,emit:u,render:h,renderCache:f,data:p,setupState:y,ctx:w,inheritAttrs:P}=t;let R,b;const k=$l(t);try{if(n.shapeFlag&4){const N=s||r,H=N;R=Gn(h.call(H,N,f,i,y,p,w)),b=c}else{const N=e;R=Gn(N.length>1?N(i,{attrs:c,slots:a,emit:u}):N(i,null)),b=e.props?c:vb(c)}}catch(N){$o.length=0,Pc(N,t,1),R=J(Zr)}let L=R;if(b&&P!==!1){const N=Object.keys(b),{shapeFlag:H}=L;N.length&&H&7&&(o&&N.some(Nd)&&(b=Eb(b,o)),L=Ai(L,b))}return n.dirs&&(L=Ai(L),L.dirs=L.dirs?L.dirs.concat(n.dirs):n.dirs),n.transition&&(L.transition=n.transition),R=L,$l(k),R}const vb=t=>{let e;for(const n in t)(n==="class"||n==="style"||wc(n))&&((e||(e={}))[n]=t[n]);return e},Eb=(t,e)=>{const n={};for(const r in t)(!Nd(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Tb(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?__(r,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(o[p]!==r[p]&&!kc(u,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?__(r,o,u):!0:!!o;return!1}function __(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!kc(n,i))return!0}return!1}function Ib({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const wb=Symbol.for("v-ndc"),bb=t=>t.__isSuspense;function Ab(t,e){e&&e.pendingBranch?Ee(t)?e.effects.push(...t):e.effects.push(t):mb(t)}const Cb=Symbol.for("v-scx"),Rb=()=>un(Cb),ll={};function mr(t,e,n){return Iv(t,e,n)}function Iv(t,e,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=lt){if(e&&i){const $=e;e=(...A)=>{$(...A),H()}}const c=Wt,u=$=>r===!0?$:ws($,r===!1?1:void 0);let h,f=!1,p=!1;if(It(t)?(h=()=>t.value,f=Ul(t)):zr(t)?(h=()=>u(t),f=!0):Ee(t)?(p=!0,f=t.some($=>zr($)||Ul($)),h=()=>t.map($=>{if(It($))return $.value;if(zr($))return u($);if(Ce($))return Gr($,c,2)})):Ce(t)?e?h=()=>Gr(t,c,2):h=()=>(y&&y(),xn(t,c,3,[w])):h=An,e&&r){const $=h;h=()=>ws($())}let y,w=$=>{y=L.onStop=()=>{Gr($,c,4),y=L.onStop=void 0}},P;if(Dc)if(w=An,e?n&&xn(e,c,3,[h(),p?[]:void 0,w]):h(),s==="sync"){const $=Rb();P=$.__watcherHandles||($.__watcherHandles=[])}else return An;let R=p?new Array(t.length).fill(ll):ll;const b=()=>{if(!(!L.active||!L.dirty))if(e){const $=L.run();(r||f||(p?$.some((A,E)=>Jr(A,R[E])):Jr($,R)))&&(y&&y(),xn(e,c,3,[$,R===ll?void 0:p&&R[0]===ll?[]:R,w]),R=$)}else L.run()};b.allowRecurse=!!e;let k;s==="sync"?k=b:s==="post"?k=()=>dn(b,c&&c.suspense):(b.pre=!0,c&&(b.id=c.uid),k=()=>zd(b));const L=new Vd(h,An,k),N=xd(),H=()=>{L.stop(),N&&Od(N.effects,L)};return e?n?b():R=L.run():s==="post"?dn(L.run.bind(L),c&&c.suspense):L.run(),P&&P.push(H),H}function Sb(t,e,n){const r=this.proxy,s=Dt(t)?t.includes(".")?wv(r,t):()=>r[t]:t.bind(r,r);let i;Ce(e)?i=e:(i=e.handler,n=e);const o=Ca(this),a=Iv(s,i.bind(r),n);return o(),a}function wv(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function ws(t,e,n=0,r){if(!it(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),It(t))ws(t.value,e,n,r);else if(Ee(t))for(let s=0;s<t.length;s++)ws(t[s],e,n,r);else if(Gi(t)||fi(t))t.forEach(s=>{ws(s,e,n,r)});else if(xo(t))for(const s in t)ws(t[s],e,n,r);return t}function wl(t,e){if(Nt===null)return t;const n=Mc(Nt)||Nt.proxy,r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,c=lt]=e[s];i&&(Ce(i)&&(i={mounted:i,updated:i}),i.deep&&ws(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return t}function gs(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let c=a.dir[r];c&&(Vs(),xn(c,n,8,[t.el,a,t,e]),Fs())}}/*! #__NO_SIDE_EFFECTS__ */function ba(t,e){return Ce(t)?qt({name:t.name},e,{setup:t}):t}const Fo=t=>!!t.type.__asyncLoader,bv=t=>t.type.__isKeepAlive;function Pb(t,e){Av(t,"a",e)}function kb(t,e){Av(t,"da",e)}function Av(t,e,n=Wt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Oc(e,r,n),n){let s=n.parent;for(;s&&s.parent;)bv(s.parent.vnode)&&Nb(r,e,n,s),s=s.parent}}function Nb(t,e,n,r){const s=Oc(e,t,r,!0);Gd(()=>{Od(r[e],s)},n)}function Oc(t,e,n=Wt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Vs();const a=Ca(n),c=xn(e,n,t,o);return a(),Fs(),c});return r?s.unshift(i):s.push(i),i}}const Ar=t=>(e,n=Wt)=>(!Dc||t==="sp")&&Oc(t,(...r)=>e(...r),n),Cv=Ar("bm"),Rv=Ar("m"),Ob=Ar("bu"),Lb=Ar("u"),Db=Ar("bum"),Gd=Ar("um"),Sv=Ar("sp"),Mb=Ar("rtg"),xb=Ar("rtc");function Vb(t,e=Wt){Oc("ec",t,e)}function bi(t,e,n,r){let s;const i=n&&n[r];if(Ee(t)||Dt(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(it(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const u=o[a];s[a]=e(t[u],u,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}function Fb(t,e,n={},r,s){if(Nt.isCE||Nt.parent&&Fo(Nt.parent)&&Nt.parent.isCE)return e!=="default"&&(n.name=e),J("slot",n,r&&r());let i=t[e];i&&i._c&&(i._d=!1),de();const o=i&&Pv(i(n)),a=er(bt,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function Pv(t){return t.some(e=>jl(e)?!(e.type===Zr||e.type===bt&&!Pv(e.children)):!0)?t:null}const vh=t=>t?Bv(t)?Mc(t)||t.proxy:vh(t.parent):null,Uo=qt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>vh(t.parent),$root:t=>vh(t.root),$emit:t=>t.emit,$options:t=>qd(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,zd(t.update)}),$nextTick:t=>t.n||(t.n=wi.bind(t.proxy)),$watch:t=>Sb.bind(t)}),Mu=(t,e)=>t!==lt&&!t.__isScriptSetup&&je(t,e),Ub={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:c}=t;let u;if(e[0]!=="$"){const y=o[e];if(y!==void 0)switch(y){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Mu(r,e))return o[e]=1,r[e];if(s!==lt&&je(s,e))return o[e]=2,s[e];if((u=t.propsOptions[0])&&je(u,e))return o[e]=3,i[e];if(n!==lt&&je(n,e))return o[e]=4,n[e];Eh&&(o[e]=0)}}const h=Uo[e];let f,p;if(h)return e==="$attrs"&&pn(t,"get",e),h(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==lt&&je(n,e))return o[e]=4,n[e];if(p=c.config.globalProperties,je(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Mu(s,e)?(s[e]=n,!0):r!==lt&&je(r,e)?(r[e]=n,!0):je(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==lt&&je(t,o)||Mu(e,o)||(a=i[0])&&je(a,o)||je(r,o)||je(Uo,o)||je(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:je(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function m_(t){return Ee(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Eh=!0;function $b(t){const e=qd(t),n=t.proxy,r=t.ctx;Eh=!1,e.beforeCreate&&g_(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:c,inject:u,created:h,beforeMount:f,mounted:p,beforeUpdate:y,updated:w,activated:P,deactivated:R,beforeDestroy:b,beforeUnmount:k,destroyed:L,unmounted:N,render:H,renderTracked:$,renderTriggered:A,errorCaptured:E,serverPrefetch:T,expose:S,inheritAttrs:O,components:D,directives:C,filters:nt}=e;if(u&&Bb(u,r,null),o)for(const fe in o){const Se=o[fe];Ce(Se)&&(r[fe]=Se.bind(n))}if(s){const fe=s.call(n,n);it(fe)&&(t.data=wa(fe))}if(Eh=!0,i)for(const fe in i){const Se=i[fe],yt=Ce(Se)?Se.bind(n,n):Ce(Se.get)?Se.get.bind(n,n):An,Ct=!Ce(Se)&&Ce(Se.set)?Se.set.bind(n):An,rt=be({get:yt,set:Ct});Object.defineProperty(r,fe,{enumerable:!0,configurable:!0,get:()=>rt.value,set:Oe=>rt.value=Oe})}if(a)for(const fe in a)kv(a[fe],r,n,fe);if(c){const fe=Ce(c)?c.call(n):c;Reflect.ownKeys(fe).forEach(Se=>{bl(Se,fe[Se])})}h&&g_(h,t,"c");function Ne(fe,Se){Ee(Se)?Se.forEach(yt=>fe(yt.bind(n))):Se&&fe(Se.bind(n))}if(Ne(Cv,f),Ne(Rv,p),Ne(Ob,y),Ne(Lb,w),Ne(Pb,P),Ne(kb,R),Ne(Vb,E),Ne(xb,$),Ne(Mb,A),Ne(Db,k),Ne(Gd,N),Ne(Sv,T),Ee(S))if(S.length){const fe=t.exposed||(t.exposed={});S.forEach(Se=>{Object.defineProperty(fe,Se,{get:()=>n[Se],set:yt=>n[Se]=yt})})}else t.exposed||(t.exposed={});H&&t.render===An&&(t.render=H),O!=null&&(t.inheritAttrs=O),D&&(t.components=D),C&&(t.directives=C)}function Bb(t,e,n=An){Ee(t)&&(t=Th(t));for(const r in t){const s=t[r];let i;it(s)?"default"in s?i=un(s.from||r,s.default,!0):i=un(s.from||r):i=un(s),It(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function g_(t,e,n){xn(Ee(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function kv(t,e,n,r){const s=r.includes(".")?wv(n,r):()=>n[r];if(Dt(t)){const i=e[t];Ce(i)&&mr(s,i)}else if(Ce(t))mr(s,t.bind(n));else if(it(t))if(Ee(t))t.forEach(i=>kv(i,e,n,r));else{const i=Ce(t.handler)?t.handler.bind(n):e[t.handler];Ce(i)&&mr(s,i,t)}}function qd(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(u=>Bl(c,u,o,!0)),Bl(c,e,o)),it(e)&&i.set(e,c),c}function Bl(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Bl(t,i,n,!0),s&&s.forEach(o=>Bl(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=jb[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const jb={data:y_,props:v_,emits:v_,methods:So,computed:So,beforeCreate:ln,created:ln,beforeMount:ln,mounted:ln,beforeUpdate:ln,updated:ln,beforeDestroy:ln,beforeUnmount:ln,destroyed:ln,unmounted:ln,activated:ln,deactivated:ln,errorCaptured:ln,serverPrefetch:ln,components:So,directives:So,watch:Hb,provide:y_,inject:Wb};function y_(t,e){return e?t?function(){return qt(Ce(t)?t.call(this,this):t,Ce(e)?e.call(this,this):e)}:e:t}function Wb(t,e){return So(Th(t),Th(e))}function Th(t){if(Ee(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ln(t,e){return t?[...new Set([].concat(t,e))]:e}function So(t,e){return t?qt(Object.create(null),t,e):e}function v_(t,e){return t?Ee(t)&&Ee(e)?[...new Set([...t,...e])]:qt(Object.create(null),m_(t),m_(e??{})):e}function Hb(t,e){if(!t)return e;if(!e)return t;const n=qt(Object.create(null),t);for(const r in e)n[r]=ln(t[r],e[r]);return n}function Nv(){return{app:null,config:{isNativeTag:Sw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zb=0;function Gb(t,e){return function(r,s=null){Ce(r)||(r=qt({},r)),s!=null&&!it(s)&&(s=null);const i=Nv(),o=new WeakSet;let a=!1;const c=i.app={_uid:zb++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:mA,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&Ce(u.install)?(o.add(u),u.install(c,...h)):Ce(u)&&(o.add(u),u(c,...h))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,h){return h?(i.components[u]=h,c):i.components[u]},directive(u,h){return h?(i.directives[u]=h,c):i.directives[u]},mount(u,h,f){if(!a){const p=J(r,s);return p.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),h&&e?e(p,u):t(p,u,f),a=!0,c._container=u,u.__vue_app__=c,Mc(p.component)||p.component.proxy}},unmount(){a&&(t(null,c._container),delete c._container.__vue_app__)},provide(u,h){return i.provides[u]=h,c},runWithContext(u){const h=_i;_i=c;try{return u()}finally{_i=h}}};return c}}let _i=null;function bl(t,e){if(Wt){let n=Wt.provides;const r=Wt.parent&&Wt.parent.provides;r===n&&(n=Wt.provides=Object.create(r)),n[t]=e}}function un(t,e,n=!1){const r=Wt||Nt;if(r||_i){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:_i._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Ce(e)?e.call(r&&r.proxy):e}}function qb(){return!!(Wt||Nt||_i)}function Kb(t,e,n,r=!1){const s={},i={};Vl(i,Lc,1),t.propsDefaults=Object.create(null),Ov(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:uv(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function Yb(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=He(s),[c]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(kc(t.emitsOptions,p))continue;const y=e[p];if(c)if(je(i,p))y!==i[p]&&(i[p]=y,u=!0);else{const w=Ti(p);s[w]=Ih(c,a,w,y,t,!1)}else y!==i[p]&&(i[p]=y,u=!0)}}}else{Ov(t,e,s,i)&&(u=!0);let h;for(const f in a)(!e||!je(e,f)&&((h=qi(f))===f||!je(e,h)))&&(c?n&&(n[f]!==void 0||n[h]!==void 0)&&(s[f]=Ih(c,a,f,void 0,t,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!je(e,f))&&(delete i[f],u=!0)}u&&_r(t,"set","$attrs")}function Ov(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let c in e){if(Vo(c))continue;const u=e[c];let h;s&&je(s,h=Ti(c))?!i||!i.includes(h)?n[h]=u:(a||(a={}))[h]=u:kc(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,o=!0)}if(i){const c=He(n),u=a||lt;for(let h=0;h<i.length;h++){const f=i[h];n[f]=Ih(s,c,f,u[f],t,!je(u,f))}}return o}function Ih(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=je(o,"default");if(a&&r===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Ce(c)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=Ca(s);r=u[n]=c.call(null,e),h()}}else r=c}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===qi(n))&&(r=!0))}return r}function Lv(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let c=!1;if(!Ce(t)){const h=f=>{c=!0;const[p,y]=Lv(f,e,!0);qt(o,p),y&&a.push(...y)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return it(t)&&r.set(t,di),di;if(Ee(i))for(let h=0;h<i.length;h++){const f=Ti(i[h]);E_(f)&&(o[f]=lt)}else if(i)for(const h in i){const f=Ti(h);if(E_(f)){const p=i[h],y=o[f]=Ee(p)||Ce(p)?{type:p}:qt({},p);if(y){const w=w_(Boolean,y.type),P=w_(String,y.type);y[0]=w>-1,y[1]=P<0||w<P,(w>-1||je(y,"default"))&&a.push(f)}}}const u=[o,a];return it(t)&&r.set(t,u),u}function E_(t){return t[0]!=="$"&&!Vo(t)}function T_(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function I_(t,e){return T_(t)===T_(e)}function w_(t,e){return Ee(e)?e.findIndex(n=>I_(n,t)):Ce(e)&&I_(e,t)?0:-1}const Dv=t=>t[0]==="_"||t==="$stable",Kd=t=>Ee(t)?t.map(Gn):[Gn(t)],Qb=(t,e,n)=>{if(e._n)return e;const r=pt((...s)=>Kd(e(...s)),n);return r._c=!1,r},Mv=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Dv(s))continue;const i=t[s];if(Ce(i))e[s]=Qb(s,i,r);else if(i!=null){const o=Kd(i);e[s]=()=>o}}},xv=(t,e)=>{const n=Kd(e);t.slots.default=()=>n},Xb=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=He(e),Vl(e,"_",n)):Mv(e,t.slots={})}else t.slots={},e&&xv(t,e);Vl(t.slots,Lc,1)},Jb=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=lt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(qt(s,e),!n&&a===1&&delete s._):(i=!e.$stable,Mv(e,s)),o=e}else e&&(xv(t,e),o={default:1});if(i)for(const a in s)!Dv(a)&&o[a]==null&&delete s[a]};function wh(t,e,n,r,s=!1){if(Ee(t)){t.forEach((p,y)=>wh(p,e&&(Ee(e)?e[y]:e),n,r,s));return}if(Fo(r)&&!s)return;const i=r.shapeFlag&4?Mc(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:c}=t,u=e&&e.r,h=a.refs===lt?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==c&&(Dt(u)?(h[u]=null,je(f,u)&&(f[u]=null)):It(u)&&(u.value=null)),Ce(c))Gr(c,a,12,[o,h]);else{const p=Dt(c),y=It(c);if(p||y){const w=()=>{if(t.f){const P=p?je(f,c)?f[c]:h[c]:c.value;s?Ee(P)&&Od(P,i):Ee(P)?P.includes(i)||P.push(i):p?(h[c]=[i],je(f,c)&&(f[c]=h[c])):(c.value=[i],t.k&&(h[t.k]=c.value))}else p?(h[c]=o,je(f,c)&&(f[c]=o)):y&&(c.value=o,t.k&&(h[t.k]=o))};o?(w.id=-1,dn(w,n)):w()}}}const dn=Ab;function Zb(t){return eA(t)}function eA(t,e){const n=Ky();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:c,setText:u,setElementText:h,parentNode:f,nextSibling:p,setScopeId:y=An,insertStaticContent:w}=t,P=(g,m,I,x=null,F=null,G=null,Z=void 0,X=null,ee=!!m.dynamicChildren)=>{if(g===m)return;g&&!Eo(g,m)&&(x=z(g),Oe(g,F,G,!0),g=null),m.patchFlag===-2&&(ee=!1,m.dynamicChildren=null);const{type:K,ref:ce,shapeFlag:pe}=m;switch(K){case Aa:R(g,m,I,x);break;case Zr:b(g,m,I,x);break;case Vu:g==null&&k(m,I,x,Z);break;case bt:D(g,m,I,x,F,G,Z,X,ee);break;default:pe&1?H(g,m,I,x,F,G,Z,X,ee):pe&6?C(g,m,I,x,F,G,Z,X,ee):(pe&64||pe&128)&&K.process(g,m,I,x,F,G,Z,X,ee,ae)}ce!=null&&F&&wh(ce,g&&g.ref,G,m||g,!m)},R=(g,m,I,x)=>{if(g==null)r(m.el=a(m.children),I,x);else{const F=m.el=g.el;m.children!==g.children&&u(F,m.children)}},b=(g,m,I,x)=>{g==null?r(m.el=c(m.children||""),I,x):m.el=g.el},k=(g,m,I,x)=>{[g.el,g.anchor]=w(g.children,m,I,x,g.el,g.anchor)},L=({el:g,anchor:m},I,x)=>{let F;for(;g&&g!==m;)F=p(g),r(g,I,x),g=F;r(m,I,x)},N=({el:g,anchor:m})=>{let I;for(;g&&g!==m;)I=p(g),s(g),g=I;s(m)},H=(g,m,I,x,F,G,Z,X,ee)=>{m.type==="svg"?Z="svg":m.type==="math"&&(Z="mathml"),g==null?$(m,I,x,F,G,Z,X,ee):T(g,m,F,G,Z,X,ee)},$=(g,m,I,x,F,G,Z,X)=>{let ee,K;const{props:ce,shapeFlag:pe,transition:re,dirs:U}=g;if(ee=g.el=o(g.type,G,ce&&ce.is,ce),pe&8?h(ee,g.children):pe&16&&E(g.children,ee,null,x,F,xu(g,G),Z,X),U&&gs(g,null,x,"created"),A(ee,g,g.scopeId,Z,x),ce){for(const le in ce)le!=="value"&&!Vo(le)&&i(ee,le,null,ce[le],G,g.children,x,F,ft);"value"in ce&&i(ee,"value",null,ce.value,G),(K=ce.onVnodeBeforeMount)&&Hn(K,x,g)}U&&gs(g,null,x,"beforeMount");const B=tA(F,re);B&&re.beforeEnter(ee),r(ee,m,I),((K=ce&&ce.onVnodeMounted)||B||U)&&dn(()=>{K&&Hn(K,x,g),B&&re.enter(ee),U&&gs(g,null,x,"mounted")},F)},A=(g,m,I,x,F)=>{if(I&&y(g,I),x)for(let G=0;G<x.length;G++)y(g,x[G]);if(F){let G=F.subTree;if(m===G){const Z=F.vnode;A(g,Z,Z.scopeId,Z.slotScopeIds,F.parent)}}},E=(g,m,I,x,F,G,Z,X,ee=0)=>{for(let K=ee;K<g.length;K++){const ce=g[K]=X?Fr(g[K]):Gn(g[K]);P(null,ce,m,I,x,F,G,Z,X)}},T=(g,m,I,x,F,G,Z)=>{const X=m.el=g.el;let{patchFlag:ee,dynamicChildren:K,dirs:ce}=m;ee|=g.patchFlag&16;const pe=g.props||lt,re=m.props||lt;let U;if(I&&ys(I,!1),(U=re.onVnodeBeforeUpdate)&&Hn(U,I,m,g),ce&&gs(m,g,I,"beforeUpdate"),I&&ys(I,!0),K?S(g.dynamicChildren,K,X,I,x,xu(m,F),G):Z||Se(g,m,X,null,I,x,xu(m,F),G,!1),ee>0){if(ee&16)O(X,m,pe,re,I,x,F);else if(ee&2&&pe.class!==re.class&&i(X,"class",null,re.class,F),ee&4&&i(X,"style",pe.style,re.style,F),ee&8){const B=m.dynamicProps;for(let le=0;le<B.length;le++){const ve=B[le],qe=pe[ve],Rt=re[ve];(Rt!==qe||ve==="value")&&i(X,ve,qe,Rt,F,g.children,I,x,ft)}}ee&1&&g.children!==m.children&&h(X,m.children)}else!Z&&K==null&&O(X,m,pe,re,I,x,F);((U=re.onVnodeUpdated)||ce)&&dn(()=>{U&&Hn(U,I,m,g),ce&&gs(m,g,I,"updated")},x)},S=(g,m,I,x,F,G,Z)=>{for(let X=0;X<m.length;X++){const ee=g[X],K=m[X],ce=ee.el&&(ee.type===bt||!Eo(ee,K)||ee.shapeFlag&70)?f(ee.el):I;P(ee,K,ce,null,x,F,G,Z,!0)}},O=(g,m,I,x,F,G,Z)=>{if(I!==x){if(I!==lt)for(const X in I)!Vo(X)&&!(X in x)&&i(g,X,I[X],null,Z,m.children,F,G,ft);for(const X in x){if(Vo(X))continue;const ee=x[X],K=I[X];ee!==K&&X!=="value"&&i(g,X,K,ee,Z,m.children,F,G,ft)}"value"in x&&i(g,"value",I.value,x.value,Z)}},D=(g,m,I,x,F,G,Z,X,ee)=>{const K=m.el=g?g.el:a(""),ce=m.anchor=g?g.anchor:a("");let{patchFlag:pe,dynamicChildren:re,slotScopeIds:U}=m;U&&(X=X?X.concat(U):U),g==null?(r(K,I,x),r(ce,I,x),E(m.children||[],I,ce,F,G,Z,X,ee)):pe>0&&pe&64&&re&&g.dynamicChildren?(S(g.dynamicChildren,re,I,F,G,Z,X),(m.key!=null||F&&m===F.subTree)&&Vv(g,m,!0)):Se(g,m,I,ce,F,G,Z,X,ee)},C=(g,m,I,x,F,G,Z,X,ee)=>{m.slotScopeIds=X,g==null?m.shapeFlag&512?F.ctx.activate(m,I,x,Z,ee):nt(m,I,x,F,G,Z,ee):gt(g,m,ee)},nt=(g,m,I,x,F,G,Z)=>{const X=g.component=uA(g,x,F);if(bv(g)&&(X.ctx.renderer=ae),hA(X),X.asyncDep){if(F&&F.registerDep(X,Ne),!g.el){const ee=X.subTree=J(Zr);b(null,ee,m,I)}}else Ne(X,g,m,I,F,G,Z)},gt=(g,m,I)=>{const x=m.component=g.component;if(Tb(g,m,I))if(x.asyncDep&&!x.asyncResolved){fe(x,m,I);return}else x.next=m,_b(x.update),x.effect.dirty=!0,x.update();else m.el=g.el,x.vnode=m},Ne=(g,m,I,x,F,G,Z)=>{const X=()=>{if(g.isMounted){let{next:ce,bu:pe,u:re,parent:U,vnode:B}=g;{const on=Fv(g);if(on){ce&&(ce.el=B.el,fe(g,ce,Z)),on.asyncDep.then(()=>{g.isUnmounted||X()});return}}let le=ce,ve;ys(g,!1),ce?(ce.el=B.el,fe(g,ce,Z)):ce=B,pe&&Tl(pe),(ve=ce.props&&ce.props.onVnodeBeforeUpdate)&&Hn(ve,U,ce,B),ys(g,!0);const qe=Du(g),Rt=g.subTree;g.subTree=qe,P(Rt,qe,f(Rt.el),z(Rt),g,F,G),ce.el=qe.el,le===null&&Ib(g,qe.el),re&&dn(re,F),(ve=ce.props&&ce.props.onVnodeUpdated)&&dn(()=>Hn(ve,U,ce,B),F)}else{let ce;const{el:pe,props:re}=m,{bm:U,m:B,parent:le}=g,ve=Fo(m);if(ys(g,!1),U&&Tl(U),!ve&&(ce=re&&re.onVnodeBeforeMount)&&Hn(ce,le,m),ys(g,!0),pe&&Fe){const qe=()=>{g.subTree=Du(g),Fe(pe,g.subTree,g,F,null)};ve?m.type.__asyncLoader().then(()=>!g.isUnmounted&&qe()):qe()}else{const qe=g.subTree=Du(g);P(null,qe,I,x,g,F,G),m.el=qe.el}if(B&&dn(B,F),!ve&&(ce=re&&re.onVnodeMounted)){const qe=m;dn(()=>Hn(ce,le,qe),F)}(m.shapeFlag&256||le&&Fo(le.vnode)&&le.vnode.shapeFlag&256)&&g.a&&dn(g.a,F),g.isMounted=!0,m=I=x=null}},ee=g.effect=new Vd(X,An,()=>zd(K),g.scope),K=g.update=()=>{ee.dirty&&ee.run()};K.id=g.uid,ys(g,!0),K()},fe=(g,m,I)=>{m.component=g;const x=g.vnode.props;g.vnode=m,g.next=null,Yb(g,m.props,x,I),Jb(g,m.children,I),Vs(),p_(g),Fs()},Se=(g,m,I,x,F,G,Z,X,ee=!1)=>{const K=g&&g.children,ce=g?g.shapeFlag:0,pe=m.children,{patchFlag:re,shapeFlag:U}=m;if(re>0){if(re&128){Ct(K,pe,I,x,F,G,Z,X,ee);return}else if(re&256){yt(K,pe,I,x,F,G,Z,X,ee);return}}U&8?(ce&16&&ft(K,F,G),pe!==K&&h(I,pe)):ce&16?U&16?Ct(K,pe,I,x,F,G,Z,X,ee):ft(K,F,G,!0):(ce&8&&h(I,""),U&16&&E(pe,I,x,F,G,Z,X,ee))},yt=(g,m,I,x,F,G,Z,X,ee)=>{g=g||di,m=m||di;const K=g.length,ce=m.length,pe=Math.min(K,ce);let re;for(re=0;re<pe;re++){const U=m[re]=ee?Fr(m[re]):Gn(m[re]);P(g[re],U,I,null,F,G,Z,X,ee)}K>ce?ft(g,F,G,!0,!1,pe):E(m,I,x,F,G,Z,X,ee,pe)},Ct=(g,m,I,x,F,G,Z,X,ee)=>{let K=0;const ce=m.length;let pe=g.length-1,re=ce-1;for(;K<=pe&&K<=re;){const U=g[K],B=m[K]=ee?Fr(m[K]):Gn(m[K]);if(Eo(U,B))P(U,B,I,null,F,G,Z,X,ee);else break;K++}for(;K<=pe&&K<=re;){const U=g[pe],B=m[re]=ee?Fr(m[re]):Gn(m[re]);if(Eo(U,B))P(U,B,I,null,F,G,Z,X,ee);else break;pe--,re--}if(K>pe){if(K<=re){const U=re+1,B=U<ce?m[U].el:x;for(;K<=re;)P(null,m[K]=ee?Fr(m[K]):Gn(m[K]),I,B,F,G,Z,X,ee),K++}}else if(K>re)for(;K<=pe;)Oe(g[K],F,G,!0),K++;else{const U=K,B=K,le=new Map;for(K=B;K<=re;K++){const $t=m[K]=ee?Fr(m[K]):Gn(m[K]);$t.key!=null&&le.set($t.key,K)}let ve,qe=0;const Rt=re-B+1;let on=!1,Wn=0;const or=new Array(Rt);for(K=0;K<Rt;K++)or[K]=0;for(K=U;K<=pe;K++){const $t=g[K];if(qe>=Rt){Oe($t,F,G,!0);continue}let In;if($t.key!=null)In=le.get($t.key);else for(ve=B;ve<=re;ve++)if(or[ve-B]===0&&Eo($t,m[ve])){In=ve;break}In===void 0?Oe($t,F,G,!0):(or[In-B]=K+1,In>=Wn?Wn=In:on=!0,P($t,m[In],I,null,F,G,Z,X,ee),qe++)}const oo=on?nA(or):di;for(ve=oo.length-1,K=Rt-1;K>=0;K--){const $t=B+K,In=m[$t],Ba=$t+1<ce?m[$t+1].el:x;or[K]===0?P(null,In,I,Ba,F,G,Z,X,ee):on&&(ve<0||K!==oo[ve]?rt(In,I,Ba,2):ve--)}}},rt=(g,m,I,x,F=null)=>{const{el:G,type:Z,transition:X,children:ee,shapeFlag:K}=g;if(K&6){rt(g.component.subTree,m,I,x);return}if(K&128){g.suspense.move(m,I,x);return}if(K&64){Z.move(g,m,I,ae);return}if(Z===bt){r(G,m,I);for(let pe=0;pe<ee.length;pe++)rt(ee[pe],m,I,x);r(g.anchor,m,I);return}if(Z===Vu){L(g,m,I);return}if(x!==2&&K&1&&X)if(x===0)X.beforeEnter(G),r(G,m,I),dn(()=>X.enter(G),F);else{const{leave:pe,delayLeave:re,afterLeave:U}=X,B=()=>r(G,m,I),le=()=>{pe(G,()=>{B(),U&&U()})};re?re(G,B,le):le()}else r(G,m,I)},Oe=(g,m,I,x=!1,F=!1)=>{const{type:G,props:Z,ref:X,children:ee,dynamicChildren:K,shapeFlag:ce,patchFlag:pe,dirs:re}=g;if(X!=null&&wh(X,null,I,g,!0),ce&256){m.ctx.deactivate(g);return}const U=ce&1&&re,B=!Fo(g);let le;if(B&&(le=Z&&Z.onVnodeBeforeUnmount)&&Hn(le,m,g),ce&6)Yt(g.component,I,x);else{if(ce&128){g.suspense.unmount(I,x);return}U&&gs(g,null,m,"beforeUnmount"),ce&64?g.type.remove(g,m,I,F,ae,x):K&&(G!==bt||pe>0&&pe&64)?ft(K,m,I,!1,!0):(G===bt&&pe&384||!F&&ce&16)&&ft(ee,m,I),x&&Te(g)}(B&&(le=Z&&Z.onVnodeUnmounted)||U)&&dn(()=>{le&&Hn(le,m,g),U&&gs(g,null,m,"unmounted")},I)},Te=g=>{const{type:m,el:I,anchor:x,transition:F}=g;if(m===bt){Je(I,x);return}if(m===Vu){N(g);return}const G=()=>{s(I),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(g.shapeFlag&1&&F&&!F.persisted){const{leave:Z,delayLeave:X}=F,ee=()=>Z(I,G);X?X(g.el,G,ee):ee()}else G()},Je=(g,m)=>{let I;for(;g!==m;)I=p(g),s(g),g=I;s(m)},Yt=(g,m,I)=>{const{bum:x,scope:F,update:G,subTree:Z,um:X}=g;x&&Tl(x),F.stop(),G&&(G.active=!1,Oe(Z,g,m,I)),X&&dn(X,m),dn(()=>{g.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},ft=(g,m,I,x=!1,F=!1,G=0)=>{for(let Z=G;Z<g.length;Z++)Oe(g[Z],m,I,x,F)},z=g=>g.shapeFlag&6?z(g.component.subTree):g.shapeFlag&128?g.suspense.next():p(g.anchor||g.el);let se=!1;const te=(g,m,I)=>{g==null?m._vnode&&Oe(m._vnode,null,null,!0):P(m._vnode||null,g,m,null,null,null,I),se||(se=!0,p_(),vv(),se=!1),m._vnode=g},ae={p:P,um:Oe,m:rt,r:Te,mt:nt,mc:E,pc:Se,pbc:S,n:z,o:t};let ke,Fe;return e&&([ke,Fe]=e(ae)),{render:te,hydrate:ke,createApp:Gb(te,ke)}}function xu({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ys({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function tA(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Vv(t,e,n=!1){const r=t.children,s=e.children;if(Ee(r)&&Ee(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Fr(s[i]),a.el=o.el),n||Vv(o,a)),a.type===Aa&&(a.el=o.el)}}function nA(t){const e=t.slice(),n=[0];let r,s,i,o,a;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<u?i=a+1:o=a;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Fv(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Fv(e)}const rA=t=>t.__isTeleport,bt=Symbol.for("v-fgt"),Aa=Symbol.for("v-txt"),Zr=Symbol.for("v-cmt"),Vu=Symbol.for("v-stc"),$o=[];let Nn=null;function de(t=!1){$o.push(Nn=t?null:[])}function sA(){$o.pop(),Nn=$o[$o.length-1]||null}let ra=1;function b_(t){ra+=t}function Uv(t){return t.dynamicChildren=ra>0?Nn||di:null,sA(),ra>0&&Nn&&Nn.push(t),t}function ge(t,e,n,r,s,i){return Uv(W(t,e,n,r,s,i,!0))}function er(t,e,n,r,s){return Uv(J(t,e,n,r,s,!0))}function jl(t){return t?t.__v_isVNode===!0:!1}function Eo(t,e){return t.type===e.type&&t.key===e.key}const Lc="__vInternal",$v=({key:t})=>t??null,Al=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Dt(t)||It(t)||Ce(t)?{i:Nt,r:t,k:e,f:!!n}:t:null);function W(t,e=null,n=null,r=0,s=null,i=t===bt?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&$v(e),ref:e&&Al(e),scopeId:Nc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Nt};return a?(Yd(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=Dt(n)?8:16),ra>0&&!o&&Nn&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Nn.push(c),c}const J=iA;function iA(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===wb)&&(t=Zr),jl(t)){const a=Ai(t,e,!0);return n&&Yd(a,n),ra>0&&!i&&Nn&&(a.shapeFlag&6?Nn[Nn.indexOf(t)]=a:Nn.push(a)),a.patchFlag|=-2,a}if(_A(t)&&(t=t.__vccOpts),e){e=oA(e);let{class:a,style:c}=e;a&&!Dt(a)&&(e.class=Y(a)),it(c)&&(dv(c)&&!Ee(c)&&(c=qt({},c)),e.style=Ac(c))}const o=Dt(t)?1:bb(t)?128:rA(t)?64:it(t)?4:Ce(t)?2:0;return W(t,e,n,r,s,o,i,!0)}function oA(t){return t?dv(t)||Lc in t?qt({},t):t:null}function Ai(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?aA(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&$v(a),ref:e&&e.ref?n&&s?Ee(s)?s.concat(Al(e)):[s,Al(e)]:Al(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==bt?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ai(t.ssContent),ssFallback:t.ssFallback&&Ai(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Ze(t=" ",e=0){return J(Aa,null,t,e)}function St(t="",e=!1){return e?(de(),er(Zr,null,t)):J(Zr,null,t)}function Gn(t){return t==null||typeof t=="boolean"?J(Zr):Ee(t)?J(bt,null,t.slice()):typeof t=="object"?Fr(t):J(Aa,null,String(t))}function Fr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ai(t)}function Yd(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Ee(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Yd(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(Lc in e)?e._ctx=Nt:s===3&&Nt&&(Nt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ce(e)?(e={default:e,_ctx:Nt},n=32):(e=String(e),r&64?(n=16,e=[Ze(e)]):n=8);t.children=e,t.shapeFlag|=n}function aA(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Y([e.class,r.class]));else if(s==="style")e.style=Ac([e.style,r.style]);else if(wc(s)){const i=e[s],o=r[s];o&&i!==o&&!(Ee(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Hn(t,e,n,r=null){xn(t,e,7,[n,r])}const lA=Nv();let cA=0;function uA(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||lA,i={uid:cA++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Xy(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Lv(r,s),emitsOptions:Tv(r,s),emit:null,emitted:null,propsDefaults:lt,inheritAttrs:r.inheritAttrs,ctx:lt,data:lt,props:lt,attrs:lt,slots:lt,refs:lt,setupState:lt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=yb.bind(null,i),t.ce&&t.ce(i),i}let Wt=null;const es=()=>Wt||Nt;let Wl,bh;{const t=Ky(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Wl=e("__VUE_INSTANCE_SETTERS__",n=>Wt=n),bh=e("__VUE_SSR_SETTERS__",n=>Dc=n)}const Ca=t=>{const e=Wt;return Wl(t),t.scope.on(),()=>{t.scope.off(),Wl(e)}},A_=()=>{Wt&&Wt.scope.off(),Wl(null)};function Bv(t){return t.vnode.shapeFlag&4}let Dc=!1;function hA(t,e=!1){e&&bh(e);const{props:n,children:r}=t.vnode,s=Bv(t);Kb(t,n,s,e),Xb(t,r);const i=s?dA(t,e):void 0;return e&&bh(!1),i}function dA(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Rc(new Proxy(t.ctx,Ub));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?pA(t):null,i=Ca(t);Vs();const o=Gr(r,t,0,[t.props,s]);if(Fs(),i(),zy(o)){if(o.then(A_,A_),e)return o.then(a=>{C_(t,a,e)}).catch(a=>{Pc(a,t,0)});t.asyncDep=o}else C_(t,o,e)}else jv(t,e)}function C_(t,e,n){Ce(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:it(e)&&(t.setupState=mv(e)),jv(t,n)}let R_;function jv(t,e,n){const r=t.type;if(!t.render){if(!e&&R_&&!r.render){const s=r.template||qd(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:c}=r,u=qt(qt({isCustomElement:i,delimiters:a},o),c);r.render=R_(s,u)}}t.render=r.render||An}{const s=Ca(t);Vs();try{$b(t)}finally{Fs(),s()}}}function fA(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return pn(t,"get","$attrs"),e[n]}}))}function pA(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return fA(t)},slots:t.slots,emit:t.emit,expose:e}}function Mc(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(mv(Rc(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Uo)return Uo[n](t)},has(e,n){return n in e||n in Uo}}))}function _A(t){return Ce(t)&&"__vccOpts"in t}const be=(t,e)=>ab(t,e,Dc);function xc(t,e,n){const r=arguments.length;return r===2?it(e)&&!Ee(e)?jl(e)?J(t,null,[e]):J(t,e):J(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&jl(n)&&(n=[n]),J(t,e,n))}const mA="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const gA="http://www.w3.org/2000/svg",yA="http://www.w3.org/1998/Math/MathML",Ur=typeof document<"u"?document:null,S_=Ur&&Ur.createElement("template"),vA={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Ur.createElementNS(gA,t):e==="mathml"?Ur.createElementNS(yA,t):Ur.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Ur.createTextNode(t),createComment:t=>Ur.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ur.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{S_.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=S_.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},EA=Symbol("_vtc");function TA(t,e,n){const r=t[EA];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const P_=Symbol("_vod"),IA=Symbol("_vsh"),wA=Symbol(""),bA=/(^|;)\s*display\s*:/;function AA(t,e,n){const r=t.style,s=Dt(n);let i=!1;if(n&&!s){if(e)if(Dt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Cl(r,a,"")}else for(const o in e)n[o]==null&&Cl(r,o,"");for(const o in n)o==="display"&&(i=!0),Cl(r,o,n[o])}else if(s){if(e!==n){const o=r[wA];o&&(n+=";"+o),r.cssText=n,i=bA.test(n)}}else e&&t.removeAttribute("style");P_ in t&&(t[P_]=i?r.display:"",t[IA]&&(r.display="none"))}const k_=/\s*!important$/;function Cl(t,e,n){if(Ee(n))n.forEach(r=>Cl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=CA(t,e);k_.test(n)?t.setProperty(qi(r),n.replace(k_,""),"important"):t[r]=n}}const N_=["Webkit","Moz","ms"],Fu={};function CA(t,e){const n=Fu[e];if(n)return n;let r=Ti(e);if(r!=="filter"&&r in t)return Fu[e]=r;r=qy(r);for(let s=0;s<N_.length;s++){const i=N_[s]+r;if(i in t)return Fu[e]=i}return e}const O_="http://www.w3.org/1999/xlink";function RA(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(O_,e.slice(6,e.length)):t.setAttributeNS(O_,e,n);else{const i=Fw(e);n==null||i&&!Yy(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function SA(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const u=a==="OPTION"?t.getAttribute("value")||"":t.value,h=n??"";(u!==h||!("_value"in t))&&(t.value=h),n==null&&t.removeAttribute(e),t._value=n;return}let c=!1;if(n===""||n==null){const u=typeof t[e];u==="boolean"?n=Yy(n):n==null&&u==="string"?(n="",c=!0):u==="number"&&(n=0,c=!0)}try{t[e]=n}catch{}c&&t.removeAttribute(e)}function Br(t,e,n,r){t.addEventListener(e,n,r)}function PA(t,e,n,r){t.removeEventListener(e,n,r)}const L_=Symbol("_vei");function kA(t,e,n,r,s=null){const i=t[L_]||(t[L_]={}),o=i[e];if(r&&o)o.value=r;else{const[a,c]=NA(e);if(r){const u=i[e]=DA(r,s);Br(t,a,u,c)}else o&&(PA(t,a,o,c),i[e]=void 0)}}const D_=/(?:Once|Passive|Capture)$/;function NA(t){let e;if(D_.test(t)){e={};let r;for(;r=t.match(D_);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):qi(t.slice(2)),e]}let Uu=0;const OA=Promise.resolve(),LA=()=>Uu||(OA.then(()=>Uu=0),Uu=Date.now());function DA(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;xn(MA(r,n.value),e,5,[r])};return n.value=t,n.attached=LA(),n}function MA(t,e){if(Ee(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const M_=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,xA=(t,e,n,r,s,i,o,a,c)=>{const u=s==="svg";e==="class"?TA(t,r,u):e==="style"?AA(t,n,r):wc(e)?Nd(e)||kA(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):VA(t,e,r,u))?SA(t,e,r,i,o,a,c):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),RA(t,e,r,u))};function VA(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&M_(e)&&Ce(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return M_(e)&&Dt(n)?!1:e in t}const Ci=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Ee(e)?n=>Tl(e,n):e};function FA(t){t.target.composing=!0}function x_(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const gr=Symbol("_assign"),V_={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[gr]=Ci(s);const i=r||s.props&&s.props.type==="number";Br(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=Zo(a)),t[gr](a)}),n&&Br(t,"change",()=>{t.value=t.value.trim()}),e||(Br(t,"compositionstart",FA),Br(t,"compositionend",x_),Br(t,"change",x_))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:s}},i){if(t[gr]=Ci(i),t.composing)return;const o=s||t.type==="number"?Zo(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===a)||(t.value=a))}},UA={deep:!0,created(t,e,n){t[gr]=Ci(n),Br(t,"change",()=>{const r=t._modelValue,s=sa(t),i=t.checked,o=t[gr];if(Ee(r)){const a=Dd(r,s),c=a!==-1;if(i&&!c)o(r.concat(s));else if(!i&&c){const u=[...r];u.splice(a,1),o(u)}}else if(Gi(r)){const a=new Set(r);i?a.add(s):a.delete(s),o(a)}else o(Wv(t,i))})},mounted:F_,beforeUpdate(t,e,n){t[gr]=Ci(n),F_(t,e,n)}};function F_(t,{value:e,oldValue:n},r){t._modelValue=e,Ee(e)?t.checked=Dd(e,r.props.value)>-1:Gi(e)?t.checked=e.has(r.props.value):e!==n&&(t.checked=Ia(e,Wv(t,!0)))}const $A={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Gi(e);Br(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Zo(sa(o)):sa(o));t[gr](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,wi(()=>{t._assigning=!1})}),t[gr]=Ci(r)},mounted(t,{value:e,modifiers:{number:n}}){U_(t,e,n)},beforeUpdate(t,e,n){t[gr]=Ci(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||U_(t,e,n)}};function U_(t,e,n){const r=t.multiple,s=Ee(e);if(!(r&&!s&&!Gi(e))){for(let i=0,o=t.options.length;i<o;i++){const a=t.options[i],c=sa(a);if(r)if(s){const u=typeof c;u==="string"||u==="number"?a.selected=e.includes(n?Zo(c):c):a.selected=Dd(e,c)>-1}else a.selected=e.has(c);else if(Ia(sa(a),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function sa(t){return"_value"in t?t._value:t.value}function Wv(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const BA=qt({patchProp:xA},vA);let $_;function jA(){return $_||($_=Zb(BA))}const WA=(...t)=>{const e=jA().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=zA(r);if(!s)return;const i=e._component;!Ce(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,HA(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function HA(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function zA(t){return Dt(t)?document.querySelector(t):t}/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ri=typeof document<"u";function GA(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Xe=Object.assign;function $u(t,e){const n={};for(const r in e){const s=e[r];n[r]=Fn(s)?s.map(t):t(s)}return n}const Bo=()=>{},Fn=Array.isArray,Hv=/#/g,qA=/&/g,KA=/\//g,YA=/=/g,QA=/\?/g,zv=/\+/g,XA=/%5B/g,JA=/%5D/g,Gv=/%5E/g,ZA=/%60/g,qv=/%7B/g,eC=/%7C/g,Kv=/%7D/g,tC=/%20/g;function Qd(t){return encodeURI(""+t).replace(eC,"|").replace(XA,"[").replace(JA,"]")}function nC(t){return Qd(t).replace(qv,"{").replace(Kv,"}").replace(Gv,"^")}function Ah(t){return Qd(t).replace(zv,"%2B").replace(tC,"+").replace(Hv,"%23").replace(qA,"%26").replace(ZA,"`").replace(qv,"{").replace(Kv,"}").replace(Gv,"^")}function rC(t){return Ah(t).replace(YA,"%3D")}function sC(t){return Qd(t).replace(Hv,"%23").replace(QA,"%3F")}function iC(t){return t==null?"":sC(t).replace(KA,"%2F")}function ia(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const oC=/\/$/,aC=t=>t.replace(oC,"");function Bu(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),i=e.slice(c+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=hC(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:ia(o)}}function lC(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function B_(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function cC(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Ri(e.matched[r],n.matched[s])&&Yv(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ri(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Yv(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!uC(t[n],e[n]))return!1;return!0}function uC(t,e){return Fn(t)?j_(t,e):Fn(e)?j_(e,t):t===e}function j_(t,e){return Fn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function hC(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}var oa;(function(t){t.pop="pop",t.push="push"})(oa||(oa={}));var jo;(function(t){t.back="back",t.forward="forward",t.unknown=""})(jo||(jo={}));function dC(t){if(!t)if(ri){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),aC(t)}const fC=/^[^#]+#/;function pC(t,e){return t.replace(fC,"#")+e}function _C(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Vc=()=>({left:window.scrollX,top:window.scrollY});function mC(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=_C(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function W_(t,e){return(history.state?history.state.position-e:-1)+t}const Ch=new Map;function gC(t,e){Ch.set(t,e)}function yC(t){const e=Ch.get(t);return Ch.delete(t),e}let vC=()=>location.protocol+"//"+location.host;function Qv(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),B_(c,"")}return B_(n,t)+r+s}function EC(t,e,n,r){let s=[],i=[],o=null;const a=({state:p})=>{const y=Qv(t,location),w=n.value,P=e.value;let R=0;if(p){if(n.value=y,e.value=p,o&&o===w){o=null;return}R=P?p.position-P.position:0}else r(y);s.forEach(b=>{b(n.value,w,{delta:R,type:oa.pop,direction:R?R>0?jo.forward:jo.back:jo.unknown})})};function c(){o=n.value}function u(p){s.push(p);const y=()=>{const w=s.indexOf(p);w>-1&&s.splice(w,1)};return i.push(y),y}function h(){const{history:p}=window;p.state&&p.replaceState(Xe({},p.state,{scroll:Vc()}),"")}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:u,destroy:f}}function H_(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Vc():null}}function TC(t){const{history:e,location:n}=window,r={value:Qv(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+c:vC()+t+c;try{e[h?"replaceState":"pushState"](u,"",p),s.value=u}catch(y){console.error(y),n[h?"replace":"assign"](p)}}function o(c,u){const h=Xe({},e.state,H_(s.value.back,c,s.value.forward,!0),u,{position:s.value.position});i(c,h,!0),r.value=c}function a(c,u){const h=Xe({},s.value,e.state,{forward:c,scroll:Vc()});i(h.current,h,!0);const f=Xe({},H_(r.value,c,null),{position:h.position+1},u);i(c,f,!1),r.value=c}return{location:r,state:s,push:a,replace:o}}function IC(t){t=dC(t);const e=TC(t),n=EC(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Xe({location:"",base:t,go:r,createHref:pC.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function wC(t){return typeof t=="string"||t&&typeof t=="object"}function Xv(t){return typeof t=="string"||typeof t=="symbol"}const Lr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Jv=Symbol("");var z_;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(z_||(z_={}));function Si(t,e){return Xe(new Error,{type:t,[Jv]:!0},e)}function cr(t,e){return t instanceof Error&&Jv in t&&(e==null||!!(t.type&e))}const G_="[^/]+?",bC={sensitive:!1,strict:!1,start:!0,end:!0},AC=/[.+*?^${}()[\]/\\]/g;function CC(t,e){const n=Xe({},bC,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let f=0;f<u.length;f++){const p=u[f];let y=40+(n.sensitive?.25:0);if(p.type===0)f||(s+="/"),s+=p.value.replace(AC,"\\$&"),y+=40;else if(p.type===1){const{value:w,repeatable:P,optional:R,regexp:b}=p;i.push({name:w,repeatable:P,optional:R});const k=b||G_;if(k!==G_){y+=10;try{new RegExp(`(${k})`)}catch(N){throw new Error(`Invalid custom RegExp for param "${w}" (${k}): `+N.message)}}let L=P?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;f||(L=R&&u.length<2?`(?:/${L})`:"/"+L),R&&(L+="?"),s+=L,y+=20,R&&(y+=-8),P&&(y+=-20),k===".*"&&(y+=-50)}h.push(y)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(u){const h=u.match(o),f={};if(!h)return null;for(let p=1;p<h.length;p++){const y=h[p]||"",w=i[p-1];f[w.name]=y&&w.repeatable?y.split("/"):y}return f}function c(u){let h="",f=!1;for(const p of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const y of p)if(y.type===0)h+=y.value;else if(y.type===1){const{value:w,repeatable:P,optional:R}=y,b=w in u?u[w]:"";if(Fn(b)&&!P)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const k=Fn(b)?b.join("/"):b;if(!k)if(R)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${w}"`);h+=k}}return h||"/"}return{re:o,score:r,keys:i,parse:a,stringify:c}}function RC(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function SC(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=RC(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(q_(r))return 1;if(q_(s))return-1}return s.length-r.length}function q_(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const PC={type:0,value:""},kC=/[a-zA-Z0-9_]/;function NC(t){if(!t)return[[]];if(t==="/")return[[PC]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(y){throw new Error(`ERR (${n})/"${u}": ${y}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,c,u="",h="";function f(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(u&&f(),o()):c===":"?(f(),n=1):p();break;case 4:p(),n=r;break;case 1:c==="("?n=2:kC.test(c)?p():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=3:h+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),s}function OC(t,e,n){const r=CC(NC(t.path),n),s=Xe(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function LC(t,e){const n=[],r=new Map;e=Q_({strict:!1,end:!0,sensitive:!1},e);function s(h){return r.get(h)}function i(h,f,p){const y=!p,w=DC(h);w.aliasOf=p&&p.record;const P=Q_(e,h),R=[w];if("alias"in h){const L=typeof h.alias=="string"?[h.alias]:h.alias;for(const N of L)R.push(Xe({},w,{components:p?p.record.components:w.components,path:N,aliasOf:p?p.record:w}))}let b,k;for(const L of R){const{path:N}=L;if(f&&N[0]!=="/"){const H=f.record.path,$=H[H.length-1]==="/"?"":"/";L.path=f.record.path+(N&&$+N)}if(b=OC(L,f,P),p?p.alias.push(b):(k=k||b,k!==b&&k.alias.push(b),y&&h.name&&!Y_(b)&&o(h.name)),w.children){const H=w.children;for(let $=0;$<H.length;$++)i(H[$],b,p&&p.children[$])}p=p||b,(b.record.components&&Object.keys(b.record.components).length||b.record.name||b.record.redirect)&&c(b)}return k?()=>{o(k)}:Bo}function o(h){if(Xv(h)){const f=r.get(h);f&&(r.delete(h),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(h);f>-1&&(n.splice(f,1),h.record.name&&r.delete(h.record.name),h.children.forEach(o),h.alias.forEach(o))}}function a(){return n}function c(h){let f=0;for(;f<n.length&&SC(h,n[f])>=0&&(h.record.path!==n[f].record.path||!Zv(h,n[f]));)f++;n.splice(f,0,h),h.record.name&&!Y_(h)&&r.set(h.record.name,h)}function u(h,f){let p,y={},w,P;if("name"in h&&h.name){if(p=r.get(h.name),!p)throw Si(1,{location:h});P=p.record.name,y=Xe(K_(f.params,p.keys.filter(k=>!k.optional).concat(p.parent?p.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),h.params&&K_(h.params,p.keys.map(k=>k.name))),w=p.stringify(y)}else if(h.path!=null)w=h.path,p=n.find(k=>k.re.test(w)),p&&(y=p.parse(w),P=p.record.name);else{if(p=f.name?r.get(f.name):n.find(k=>k.re.test(f.path)),!p)throw Si(1,{location:h,currentLocation:f});P=p.record.name,y=Xe({},f.params,h.params),w=p.stringify(y)}const R=[];let b=p;for(;b;)R.unshift(b.record),b=b.parent;return{name:P,path:w,params:y,matched:R,meta:xC(R)}}return t.forEach(h=>i(h)),{addRoute:i,resolve:u,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function K_(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function DC(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:MC(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function MC(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Y_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function xC(t){return t.reduce((e,n)=>Xe(e,n.meta),{})}function Q_(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function Zv(t,e){return e.children.some(n=>n===t||Zv(t,n))}function VC(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(zv," "),o=i.indexOf("="),a=ia(o<0?i:i.slice(0,o)),c=o<0?null:ia(i.slice(o+1));if(a in e){let u=e[a];Fn(u)||(u=e[a]=[u]),u.push(c)}else e[a]=c}return e}function X_(t){let e="";for(let n in t){const r=t[n];if(n=rC(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Fn(r)?r.map(i=>i&&Ah(i)):[r&&Ah(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function FC(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Fn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const UC=Symbol(""),J_=Symbol(""),Fc=Symbol(""),Xd=Symbol(""),Rh=Symbol("");function To(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function $r(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const u=p=>{p===!1?c(Si(4,{from:n,to:e})):p instanceof Error?c(p):wC(p)?c(Si(2,{from:e,to:p})):(o&&r.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),a())},h=i(()=>t.call(r&&r.instances[s],e,n,u));let f=Promise.resolve(h);t.length<3&&(f=f.then(u)),f.catch(p=>c(p))})}function ju(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let c=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if($C(c)){const h=(c.__vccOpts||c)[e];h&&i.push($r(h,n,r,o,a,s))}else{let u=c();i.push(()=>u.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const f=GA(h)?h.default:h;o.components[a]=f;const y=(f.__vccOpts||f)[e];return y&&$r(y,n,r,o,a,s)()}))}}return i}function $C(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Z_(t){const e=un(Fc),n=un(Xd),r=be(()=>e.resolve(M(t.to))),s=be(()=>{const{matched:c}=r.value,{length:u}=c,h=c[u-1],f=n.matched;if(!h||!f.length)return-1;const p=f.findIndex(Ri.bind(null,h));if(p>-1)return p;const y=em(c[u-2]);return u>1&&em(h)===y&&f[f.length-1].path!==y?f.findIndex(Ri.bind(null,c[u-2])):p}),i=be(()=>s.value>-1&&WC(n.params,r.value.params)),o=be(()=>s.value>-1&&s.value===n.matched.length-1&&Yv(n.params,r.value.params));function a(c={}){return jC(c)?e[M(t.replace)?"replace":"push"](M(t.to)).catch(Bo):Promise.resolve()}return{route:r,href:be(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const BC=ba({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Z_,setup(t,{slots:e}){const n=wa(Z_(t)),{options:r}=un(Fc),s=be(()=>({[tm(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[tm(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:xc("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Et=BC;function jC(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function WC(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Fn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function em(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const tm=(t,e,n)=>t??e??n,HC=ba({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=un(Rh),s=be(()=>t.route||r.value),i=un(J_,0),o=be(()=>{let u=M(i);const{matched:h}=s.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),a=be(()=>s.value.matched[o.value]);bl(J_,be(()=>o.value+1)),bl(UC,a),bl(Rh,s);const c=We();return mr(()=>[c.value,a.value,t.name],([u,h,f],[p,y,w])=>{h&&(h.instances[f]=u,y&&y!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=y.leaveGuards),h.updateGuards.size||(h.updateGuards=y.updateGuards))),u&&h&&(!y||!Ri(h,y)||!p)&&(h.enterCallbacks[f]||[]).forEach(P=>P(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,f=a.value,p=f&&f.components[h];if(!p)return nm(n.default,{Component:p,route:u});const y=f.props[h],w=y?y===!0?u.params:typeof y=="function"?y(u):y:null,R=xc(p,Xe({},w,e,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(f.instances[h]=null)},ref:c}));return nm(n.default,{Component:R,route:u})||R}}});function nm(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const eE=HC;function zC(t){const e=LC(t.routes,t),n=t.parseQuery||VC,r=t.stringifyQuery||X_,s=t.history,i=To(),o=To(),a=To(),c=Sc(Lr);let u=Lr;ri&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=$u.bind(null,z=>""+z),f=$u.bind(null,iC),p=$u.bind(null,ia);function y(z,se){let te,ae;return Xv(z)?(te=e.getRecordMatcher(z),ae=se):ae=z,e.addRoute(ae,te)}function w(z){const se=e.getRecordMatcher(z);se&&e.removeRoute(se)}function P(){return e.getRoutes().map(z=>z.record)}function R(z){return!!e.getRecordMatcher(z)}function b(z,se){if(se=Xe({},se||c.value),typeof z=="string"){const m=Bu(n,z,se.path),I=e.resolve({path:m.path},se),x=s.createHref(m.fullPath);return Xe(m,I,{params:p(I.params),hash:ia(m.hash),redirectedFrom:void 0,href:x})}let te;if(z.path!=null)te=Xe({},z,{path:Bu(n,z.path,se.path).path});else{const m=Xe({},z.params);for(const I in m)m[I]==null&&delete m[I];te=Xe({},z,{params:f(m)}),se.params=f(se.params)}const ae=e.resolve(te,se),ke=z.hash||"";ae.params=h(p(ae.params));const Fe=lC(r,Xe({},z,{hash:nC(ke),path:ae.path})),g=s.createHref(Fe);return Xe({fullPath:Fe,hash:ke,query:r===X_?FC(z.query):z.query||{}},ae,{redirectedFrom:void 0,href:g})}function k(z){return typeof z=="string"?Bu(n,z,c.value.path):Xe({},z)}function L(z,se){if(u!==z)return Si(8,{from:se,to:z})}function N(z){return A(z)}function H(z){return N(Xe(k(z),{replace:!0}))}function $(z){const se=z.matched[z.matched.length-1];if(se&&se.redirect){const{redirect:te}=se;let ae=typeof te=="function"?te(z):te;return typeof ae=="string"&&(ae=ae.includes("?")||ae.includes("#")?ae=k(ae):{path:ae},ae.params={}),Xe({query:z.query,hash:z.hash,params:ae.path!=null?{}:z.params},ae)}}function A(z,se){const te=u=b(z),ae=c.value,ke=z.state,Fe=z.force,g=z.replace===!0,m=$(te);if(m)return A(Xe(k(m),{state:typeof m=="object"?Xe({},ke,m.state):ke,force:Fe,replace:g}),se||te);const I=te;I.redirectedFrom=se;let x;return!Fe&&cC(r,ae,te)&&(x=Si(16,{to:I,from:ae}),rt(ae,ae,!0,!1)),(x?Promise.resolve(x):S(I,ae)).catch(F=>cr(F)?cr(F,2)?F:Ct(F):Se(F,I,ae)).then(F=>{if(F){if(cr(F,2))return A(Xe({replace:g},k(F.to),{state:typeof F.to=="object"?Xe({},ke,F.to.state):ke,force:Fe}),se||I)}else F=D(I,ae,!0,g,ke);return O(I,ae,F),F})}function E(z,se){const te=L(z,se);return te?Promise.reject(te):Promise.resolve()}function T(z){const se=Je.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext(z):z()}function S(z,se){let te;const[ae,ke,Fe]=GC(z,se);te=ju(ae.reverse(),"beforeRouteLeave",z,se);for(const m of ae)m.leaveGuards.forEach(I=>{te.push($r(I,z,se))});const g=E.bind(null,z,se);return te.push(g),ft(te).then(()=>{te=[];for(const m of i.list())te.push($r(m,z,se));return te.push(g),ft(te)}).then(()=>{te=ju(ke,"beforeRouteUpdate",z,se);for(const m of ke)m.updateGuards.forEach(I=>{te.push($r(I,z,se))});return te.push(g),ft(te)}).then(()=>{te=[];for(const m of Fe)if(m.beforeEnter)if(Fn(m.beforeEnter))for(const I of m.beforeEnter)te.push($r(I,z,se));else te.push($r(m.beforeEnter,z,se));return te.push(g),ft(te)}).then(()=>(z.matched.forEach(m=>m.enterCallbacks={}),te=ju(Fe,"beforeRouteEnter",z,se,T),te.push(g),ft(te))).then(()=>{te=[];for(const m of o.list())te.push($r(m,z,se));return te.push(g),ft(te)}).catch(m=>cr(m,8)?m:Promise.reject(m))}function O(z,se,te){a.list().forEach(ae=>T(()=>ae(z,se,te)))}function D(z,se,te,ae,ke){const Fe=L(z,se);if(Fe)return Fe;const g=se===Lr,m=ri?history.state:{};te&&(ae||g?s.replace(z.fullPath,Xe({scroll:g&&m&&m.scroll},ke)):s.push(z.fullPath,ke)),c.value=z,rt(z,se,te,g),Ct()}let C;function nt(){C||(C=s.listen((z,se,te)=>{if(!Yt.listening)return;const ae=b(z),ke=$(ae);if(ke){A(Xe(ke,{replace:!0}),ae).catch(Bo);return}u=ae;const Fe=c.value;ri&&gC(W_(Fe.fullPath,te.delta),Vc()),S(ae,Fe).catch(g=>cr(g,12)?g:cr(g,2)?(A(g.to,ae).then(m=>{cr(m,20)&&!te.delta&&te.type===oa.pop&&s.go(-1,!1)}).catch(Bo),Promise.reject()):(te.delta&&s.go(-te.delta,!1),Se(g,ae,Fe))).then(g=>{g=g||D(ae,Fe,!1),g&&(te.delta&&!cr(g,8)?s.go(-te.delta,!1):te.type===oa.pop&&cr(g,20)&&s.go(-1,!1)),O(ae,Fe,g)}).catch(Bo)}))}let gt=To(),Ne=To(),fe;function Se(z,se,te){Ct(z);const ae=Ne.list();return ae.length?ae.forEach(ke=>ke(z,se,te)):console.error(z),Promise.reject(z)}function yt(){return fe&&c.value!==Lr?Promise.resolve():new Promise((z,se)=>{gt.add([z,se])})}function Ct(z){return fe||(fe=!z,nt(),gt.list().forEach(([se,te])=>z?te(z):se()),gt.reset()),z}function rt(z,se,te,ae){const{scrollBehavior:ke}=t;if(!ri||!ke)return Promise.resolve();const Fe=!te&&yC(W_(z.fullPath,0))||(ae||!te)&&history.state&&history.state.scroll||null;return wi().then(()=>ke(z,se,Fe)).then(g=>g&&mC(g)).catch(g=>Se(g,z,se))}const Oe=z=>s.go(z);let Te;const Je=new Set,Yt={currentRoute:c,listening:!0,addRoute:y,removeRoute:w,hasRoute:R,getRoutes:P,resolve:b,options:t,push:N,replace:H,go:Oe,back:()=>Oe(-1),forward:()=>Oe(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Ne.add,isReady:yt,install(z){const se=this;z.component("RouterLink",Et),z.component("RouterView",eE),z.config.globalProperties.$router=se,Object.defineProperty(z.config.globalProperties,"$route",{enumerable:!0,get:()=>M(c)}),ri&&!Te&&c.value===Lr&&(Te=!0,N(s.location).catch(ke=>{}));const te={};for(const ke in Lr)Object.defineProperty(te,ke,{get:()=>c.value[ke],enumerable:!0});z.provide(Fc,se),z.provide(Xd,uv(te)),z.provide(Rh,c);const ae=z.unmount;Je.add(z),z.unmount=function(){Je.delete(z),Je.size<1&&(u=Lr,C&&C(),C=null,c.value=Lr,Te=!1,fe=!1),ae()}}};function ft(z){return z.reduce((se,te)=>se.then(()=>T(te)),Promise.resolve())}return Yt}function GC(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(u=>Ri(u,a))?r.push(a):n.push(a));const c=t.matched[o];c&&(e.matched.find(u=>Ri(u,c))||s.push(c))}return[n,r,s]}function Uc(){return un(Fc)}function Us(){return un(Xd)}const qC="/assets/hamburger-7k_Y2lOS.png";var KC=!1;/*!
 * pinia v2.2.2
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let tE;const $c=t=>tE=t,nE=Symbol();function Sh(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Wo;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Wo||(Wo={}));function YC(){const t=Md(!0),e=t.run(()=>We({}));let n=[],r=[];const s=Rc({install(i){$c(s),s._a=i,i.provide(nE,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!KC?r.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const rE=()=>{};function rm(t,e,n,r=rE){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&xd()&&Jy(s),s}function Zs(t,...e){t.slice().forEach(n=>{n(...e)})}const QC=t=>t(),sm=Symbol(),Wu=Symbol();function Ph(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Sh(s)&&Sh(r)&&t.hasOwnProperty(n)&&!It(r)&&!zr(r)?t[n]=Ph(s,r):t[n]=r}return t}const XC=Symbol();function JC(t){return!Sh(t)||!t.hasOwnProperty(XC)}const{assign:xr}=Object;function ZC(t){return!!(It(t)&&t.effect)}function eR(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let c;function u(){a||(n.state.value[t]=s?s():{});const h=ub(n.state.value[t]);return xr(h,i,Object.keys(o||{}).reduce((f,p)=>(f[p]=Rc(be(()=>{$c(n);const y=n._s.get(t);return o[p].call(y,y)})),f),{}))}return c=sE(t,u,e,n,r,!0),c}function sE(t,e,n={},r,s,i){let o;const a=xr({actions:{}},n),c={deep:!0};let u,h,f=[],p=[],y;const w=r.state.value[t];!i&&!w&&(r.state.value[t]={}),We({});let P;function R(E){let T;u=h=!1,typeof E=="function"?(E(r.state.value[t]),T={type:Wo.patchFunction,storeId:t,events:y}):(Ph(r.state.value[t],E),T={type:Wo.patchObject,payload:E,storeId:t,events:y});const S=P=Symbol();wi().then(()=>{P===S&&(u=!0)}),h=!0,Zs(f,T,r.state.value[t])}const b=i?function(){const{state:T}=n,S=T?T():{};this.$patch(O=>{xr(O,S)})}:rE;function k(){o.stop(),f=[],p=[],r._s.delete(t)}const L=(E,T="")=>{if(sm in E)return E[Wu]=T,E;const S=function(){$c(r);const O=Array.from(arguments),D=[],C=[];function nt(fe){D.push(fe)}function gt(fe){C.push(fe)}Zs(p,{args:O,name:S[Wu],store:H,after:nt,onError:gt});let Ne;try{Ne=E.apply(this&&this.$id===t?this:H,O)}catch(fe){throw Zs(C,fe),fe}return Ne instanceof Promise?Ne.then(fe=>(Zs(D,fe),fe)).catch(fe=>(Zs(C,fe),Promise.reject(fe))):(Zs(D,Ne),Ne)};return S[sm]=!0,S[Wu]=T,S},N={_p:r,$id:t,$onAction:rm.bind(null,p),$patch:R,$reset:b,$subscribe(E,T={}){const S=rm(f,E,T.detached,()=>O()),O=o.run(()=>mr(()=>r.state.value[t],D=>{(T.flush==="sync"?h:u)&&E({storeId:t,type:Wo.direct,events:y},D)},xr({},c,T)));return S},$dispose:k},H=wa(N);r._s.set(t,H);const A=(r._a&&r._a.runWithContext||QC)(()=>r._e.run(()=>(o=Md()).run(()=>e({action:L}))));for(const E in A){const T=A[E];if(It(T)&&!ZC(T)||zr(T))i||(w&&JC(T)&&(It(T)?T.value=w[E]:Ph(T,w[E])),r.state.value[t][E]=T);else if(typeof T=="function"){const S=L(T,E);A[E]=S,a.actions[E]=T}}return xr(H,A),xr(He(H),A),Object.defineProperty(H,"$state",{get:()=>r.state.value[t],set:E=>{R(T=>{xr(T,E)})}}),r._p.forEach(E=>{xr(H,o.run(()=>E({store:H,app:r._a,pinia:r,options:a})))}),w&&i&&n.hydrate&&n.hydrate(H.$state,w),u=!0,h=!0,H}function tR(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,c){const u=qb();return a=a||(u?un(nE,null):null),a&&$c(a),a=tE,a._s.has(r)||(i?sE(r,e,s,a):eR(r,s,a)),a._s.get(r)}return o.$id=r,o}const Mt=tR("theme",{state:()=>({theme:"light"}),getters:{currentTheme:t=>t.theme,primaryBackgroundColor:t=>`primary-background-color-${t.theme}`,secondaryBackgroundColor:t=>`secondary-background-color-${t.theme}`,onHoverBackgroundColor:t=>`on-hover-background-color-${t.theme}`,shadowColor:t=>`shadow-color-${t.theme}`,borderColor:t=>`border-color-${t.theme}`,primaryColor:t=>`primary-color-${t.theme}`,secondaryColor:t=>`secondary-color-${t.theme}`,trinaryColor:t=>`trinary-color-${t.theme}`,primaryTextColor:t=>`primary-text-color-${t.theme}`,secondaryTextColor:t=>`secondary-text-color-${t.theme}`,primaryLinkColor:t=>`primary-link-color-${t.theme}`,secondaryLinkColor:t=>`secondary-link-color-${t.theme}`,buttonFillColor:t=>`button-fill-color-${t.theme}`,buttonTextColor:t=>`button-text-color-${t.theme}`},actions:{toggle(){this.theme=="light"?this.theme="sepia":this.theme=="sepia"?this.theme="dark":this.theme="light"}}}),dt=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},nR=t=>(cs("data-v-b9dd39c8"),t=t(),us(),t),rR=["id"],sR=["for"],iR=["for"],oR=nR(()=>W("img",{class:"submenu-hamburger",src:qC},null,-1)),aR=[oR],lR={__name:"Submenu",props:["label","id"],setup(t){const e=t,n=Mt(),r=We(!1),s=()=>{r.value=!0},i=()=>{r.value=!1};return(o,a)=>(de(),ge("div",{class:"submenu",onMouseleave:i},[wl(W("input",{class:"submenu-hidden-checkbox",type:"checkbox",id:e.id,"onUpdate:modelValue":a[0]||(a[0]=c=>r.value=c)},null,8,rR),[[UA,r.value]]),e.label?(de(),ge("label",{key:0,class:Y(["navlink",M(n).primaryTextColor]),for:e.id,onMouseenter:s},he(e.label),43,sR)):St("",!0),e.label?St("",!0):(de(),ge("label",{key:1,for:e.id,onMouseenter:s},aR,40,iR)),W("div",{class:Y(["submenu-content",M(n).primaryBackgroundColor])},[W("ul",null,[Fb(o.$slots,"default",{},void 0,!0)])],2)],32))}},im=dt(lR,[["__scopeId","data-v-b9dd39c8"]]);/*!
  * shared v9.10.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const Hl=typeof window<"u",hs=(t,e=!1)=>e?Symbol.for(t):Symbol(t),cR=(t,e,n)=>uR({l:t,k:e,s:n}),uR=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Pt=t=>typeof t=="number"&&isFinite(t),hR=t=>oE(t)==="[object Date]",ts=t=>oE(t)==="[object RegExp]",Bc=t=>Re(t)&&Object.keys(t).length===0,Gt=Object.assign;let om;const fr=()=>om||(om=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function am(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const dR=Object.prototype.hasOwnProperty;function zl(t,e){return dR.call(t,e)}const ut=Array.isArray,st=t=>typeof t=="function",oe=t=>typeof t=="string",Le=t=>typeof t=="boolean",Ye=t=>t!==null&&typeof t=="object",fR=t=>Ye(t)&&st(t.then)&&st(t.catch),iE=Object.prototype.toString,oE=t=>iE.call(t),Re=t=>{if(!Ye(t))return!1;const e=Object.getPrototypeOf(t);return e===null||e.constructor===Object},pR=t=>t==null?"":ut(t)||Re(t)&&t.toString===iE?JSON.stringify(t,null,2):String(t);function _R(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}function Jd(t){let e=t;return()=>++e}function mR(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const cl=t=>!Ye(t)||ut(t);function Rl(t,e){if(cl(t)||cl(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(i=>{cl(r[i])||cl(s[i])?s[i]=r[i]:n.push({src:r[i],des:s[i]})})}}/*!
  * message-compiler v9.10.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function gR(t,e,n){return{line:t,column:e,offset:n}}function kh(t,e,n){const r={start:t,end:e};return n!=null&&(r.source=n),r}const yR=/\{([0-9a-zA-Z]+)\}/g;function vR(t,...e){return e.length===1&&ER(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),t.replace(yR,(n,r)=>e.hasOwnProperty(r)?e[r]:"")}const aE=Object.assign,lm=t=>typeof t=="string",ER=t=>t!==null&&typeof t=="object";function lE(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}const Ie={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},TR={[Ie.EXPECTED_TOKEN]:"Expected token: '{0}'",[Ie.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[Ie.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[Ie.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[Ie.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[Ie.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[Ie.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[Ie.EMPTY_PLACEHOLDER]:"Empty placeholder",[Ie.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[Ie.INVALID_LINKED_FORMAT]:"Invalid linked format",[Ie.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[Ie.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[Ie.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[Ie.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[Ie.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[Ie.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function Ki(t,e,n={}){const{domain:r,messages:s,args:i}=n,o=vR((s||TR)[t]||"",...i||[]),a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=r,a}function IR(t){throw t}const ur=" ",wR="\r",cn=`
`,bR="\u2028",AR="\u2029";function CR(t){const e=t;let n=0,r=1,s=1,i=0;const o=A=>e[A]===wR&&e[A+1]===cn,a=A=>e[A]===cn,c=A=>e[A]===AR,u=A=>e[A]===bR,h=A=>o(A)||a(A)||c(A)||u(A),f=()=>n,p=()=>r,y=()=>s,w=()=>i,P=A=>o(A)||c(A)||u(A)?cn:e[A],R=()=>P(n),b=()=>P(n+i);function k(){return i=0,h(n)&&(r++,s=0),o(n)&&n++,n++,s++,e[n]}function L(){return o(n+i)&&i++,i++,e[n+i]}function N(){n=0,r=1,s=1,i=0}function H(A=0){i=A}function $(){const A=n+i;for(;A!==n;)k();i=0}return{index:f,line:p,column:y,peekOffset:w,charAt:P,currentChar:R,currentPeek:b,next:k,peek:L,reset:N,resetPeek:H,skipToPeek:$}}const Dr=void 0,RR=".",cm="'",SR="tokenizer";function PR(t,e={}){const n=e.location!==!1,r=CR(t),s=()=>r.index(),i=()=>gR(r.line(),r.column(),r.index()),o=i(),a=s(),c={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>c,{onError:h}=e;function f(g,m,I,...x){const F=u();if(m.column+=I,m.offset+=I,h){const G=n?kh(F.startLoc,m):null,Z=Ki(g,G,{domain:SR,args:x});h(Z)}}function p(g,m,I){g.endLoc=i(),g.currentType=m;const x={type:m};return n&&(x.loc=kh(g.startLoc,g.endLoc)),I!=null&&(x.value=I),x}const y=g=>p(g,14);function w(g,m){return g.currentChar()===m?(g.next(),m):(f(Ie.EXPECTED_TOKEN,i(),0,m),"")}function P(g){let m="";for(;g.currentPeek()===ur||g.currentPeek()===cn;)m+=g.currentPeek(),g.peek();return m}function R(g){const m=P(g);return g.skipToPeek(),m}function b(g){if(g===Dr)return!1;const m=g.charCodeAt(0);return m>=97&&m<=122||m>=65&&m<=90||m===95}function k(g){if(g===Dr)return!1;const m=g.charCodeAt(0);return m>=48&&m<=57}function L(g,m){const{currentType:I}=m;if(I!==2)return!1;P(g);const x=b(g.currentPeek());return g.resetPeek(),x}function N(g,m){const{currentType:I}=m;if(I!==2)return!1;P(g);const x=g.currentPeek()==="-"?g.peek():g.currentPeek(),F=k(x);return g.resetPeek(),F}function H(g,m){const{currentType:I}=m;if(I!==2)return!1;P(g);const x=g.currentPeek()===cm;return g.resetPeek(),x}function $(g,m){const{currentType:I}=m;if(I!==8)return!1;P(g);const x=g.currentPeek()===".";return g.resetPeek(),x}function A(g,m){const{currentType:I}=m;if(I!==9)return!1;P(g);const x=b(g.currentPeek());return g.resetPeek(),x}function E(g,m){const{currentType:I}=m;if(!(I===8||I===12))return!1;P(g);const x=g.currentPeek()===":";return g.resetPeek(),x}function T(g,m){const{currentType:I}=m;if(I!==10)return!1;const x=()=>{const G=g.currentPeek();return G==="{"?b(g.peek()):G==="@"||G==="%"||G==="|"||G===":"||G==="."||G===ur||!G?!1:G===cn?(g.peek(),x()):b(G)},F=x();return g.resetPeek(),F}function S(g){P(g);const m=g.currentPeek()==="|";return g.resetPeek(),m}function O(g){const m=P(g),I=g.currentPeek()==="%"&&g.peek()==="{";return g.resetPeek(),{isModulo:I,hasSpace:m.length>0}}function D(g,m=!0){const I=(F=!1,G="",Z=!1)=>{const X=g.currentPeek();return X==="{"?G==="%"?!1:F:X==="@"||!X?G==="%"?!0:F:X==="%"?(g.peek(),I(F,"%",!0)):X==="|"?G==="%"||Z?!0:!(G===ur||G===cn):X===ur?(g.peek(),I(!0,ur,Z)):X===cn?(g.peek(),I(!0,cn,Z)):!0},x=I();return m&&g.resetPeek(),x}function C(g,m){const I=g.currentChar();return I===Dr?Dr:m(I)?(g.next(),I):null}function nt(g){return C(g,I=>{const x=I.charCodeAt(0);return x>=97&&x<=122||x>=65&&x<=90||x>=48&&x<=57||x===95||x===36})}function gt(g){return C(g,I=>{const x=I.charCodeAt(0);return x>=48&&x<=57})}function Ne(g){return C(g,I=>{const x=I.charCodeAt(0);return x>=48&&x<=57||x>=65&&x<=70||x>=97&&x<=102})}function fe(g){let m="",I="";for(;m=gt(g);)I+=m;return I}function Se(g){R(g);const m=g.currentChar();return m!=="%"&&f(Ie.EXPECTED_TOKEN,i(),0,m),g.next(),"%"}function yt(g){let m="";for(;;){const I=g.currentChar();if(I==="{"||I==="}"||I==="@"||I==="|"||!I)break;if(I==="%")if(D(g))m+=I,g.next();else break;else if(I===ur||I===cn)if(D(g))m+=I,g.next();else{if(S(g))break;m+=I,g.next()}else m+=I,g.next()}return m}function Ct(g){R(g);let m="",I="";for(;m=nt(g);)I+=m;return g.currentChar()===Dr&&f(Ie.UNTERMINATED_CLOSING_BRACE,i(),0),I}function rt(g){R(g);let m="";return g.currentChar()==="-"?(g.next(),m+=`-${fe(g)}`):m+=fe(g),g.currentChar()===Dr&&f(Ie.UNTERMINATED_CLOSING_BRACE,i(),0),m}function Oe(g){R(g),w(g,"'");let m="",I="";const x=G=>G!==cm&&G!==cn;for(;m=C(g,x);)m==="\\"?I+=Te(g):I+=m;const F=g.currentChar();return F===cn||F===Dr?(f(Ie.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),F===cn&&(g.next(),w(g,"'")),I):(w(g,"'"),I)}function Te(g){const m=g.currentChar();switch(m){case"\\":case"'":return g.next(),`\\${m}`;case"u":return Je(g,m,4);case"U":return Je(g,m,6);default:return f(Ie.UNKNOWN_ESCAPE_SEQUENCE,i(),0,m),""}}function Je(g,m,I){w(g,m);let x="";for(let F=0;F<I;F++){const G=Ne(g);if(!G){f(Ie.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${m}${x}${g.currentChar()}`);break}x+=G}return`\\${m}${x}`}function Yt(g){R(g);let m="",I="";const x=F=>F!=="{"&&F!=="}"&&F!==ur&&F!==cn;for(;m=C(g,x);)I+=m;return I}function ft(g){let m="",I="";for(;m=nt(g);)I+=m;return I}function z(g){const m=(I=!1,x)=>{const F=g.currentChar();return F==="{"||F==="%"||F==="@"||F==="|"||F==="("||F===")"||!F||F===ur?x:F===cn||F===RR?(x+=F,g.next(),m(I,x)):(x+=F,g.next(),m(!0,x))};return m(!1,"")}function se(g){R(g);const m=w(g,"|");return R(g),m}function te(g,m){let I=null;switch(g.currentChar()){case"{":return m.braceNest>=1&&f(Ie.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),g.next(),I=p(m,2,"{"),R(g),m.braceNest++,I;case"}":return m.braceNest>0&&m.currentType===2&&f(Ie.EMPTY_PLACEHOLDER,i(),0),g.next(),I=p(m,3,"}"),m.braceNest--,m.braceNest>0&&R(g),m.inLinked&&m.braceNest===0&&(m.inLinked=!1),I;case"@":return m.braceNest>0&&f(Ie.UNTERMINATED_CLOSING_BRACE,i(),0),I=ae(g,m)||y(m),m.braceNest=0,I;default:{let F=!0,G=!0,Z=!0;if(S(g))return m.braceNest>0&&f(Ie.UNTERMINATED_CLOSING_BRACE,i(),0),I=p(m,1,se(g)),m.braceNest=0,m.inLinked=!1,I;if(m.braceNest>0&&(m.currentType===5||m.currentType===6||m.currentType===7))return f(Ie.UNTERMINATED_CLOSING_BRACE,i(),0),m.braceNest=0,ke(g,m);if(F=L(g,m))return I=p(m,5,Ct(g)),R(g),I;if(G=N(g,m))return I=p(m,6,rt(g)),R(g),I;if(Z=H(g,m))return I=p(m,7,Oe(g)),R(g),I;if(!F&&!G&&!Z)return I=p(m,13,Yt(g)),f(Ie.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,I.value),R(g),I;break}}return I}function ae(g,m){const{currentType:I}=m;let x=null;const F=g.currentChar();switch((I===8||I===9||I===12||I===10)&&(F===cn||F===ur)&&f(Ie.INVALID_LINKED_FORMAT,i(),0),F){case"@":return g.next(),x=p(m,8,"@"),m.inLinked=!0,x;case".":return R(g),g.next(),p(m,9,".");case":":return R(g),g.next(),p(m,10,":");default:return S(g)?(x=p(m,1,se(g)),m.braceNest=0,m.inLinked=!1,x):$(g,m)||E(g,m)?(R(g),ae(g,m)):A(g,m)?(R(g),p(m,12,ft(g))):T(g,m)?(R(g),F==="{"?te(g,m)||x:p(m,11,z(g))):(I===8&&f(Ie.INVALID_LINKED_FORMAT,i(),0),m.braceNest=0,m.inLinked=!1,ke(g,m))}}function ke(g,m){let I={type:14};if(m.braceNest>0)return te(g,m)||y(m);if(m.inLinked)return ae(g,m)||y(m);switch(g.currentChar()){case"{":return te(g,m)||y(m);case"}":return f(Ie.UNBALANCED_CLOSING_BRACE,i(),0),g.next(),p(m,3,"}");case"@":return ae(g,m)||y(m);default:{if(S(g))return I=p(m,1,se(g)),m.braceNest=0,m.inLinked=!1,I;const{isModulo:F,hasSpace:G}=O(g);if(F)return G?p(m,0,yt(g)):p(m,4,Se(g));if(D(g))return p(m,0,yt(g));break}}return I}function Fe(){const{currentType:g,offset:m,startLoc:I,endLoc:x}=c;return c.lastType=g,c.lastOffset=m,c.lastStartLoc=I,c.lastEndLoc=x,c.offset=s(),c.startLoc=i(),r.currentChar()===Dr?p(c,14):ke(r,c)}return{nextToken:Fe,currentOffset:s,currentPosition:i,context:u}}const kR="parser",NR=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function OR(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):""}}}function LR(t={}){const e=t.location!==!1,{onError:n}=t;function r(b,k,L,N,...H){const $=b.currentPosition();if($.offset+=N,$.column+=N,n){const A=e?kh(L,$):null,E=Ki(k,A,{domain:kR,args:H});n(E)}}function s(b,k,L){const N={type:b};return e&&(N.start=k,N.end=k,N.loc={start:L,end:L}),N}function i(b,k,L,N){N&&(b.type=N),e&&(b.end=k,b.loc&&(b.loc.end=L))}function o(b,k){const L=b.context(),N=s(3,L.offset,L.startLoc);return N.value=k,i(N,b.currentOffset(),b.currentPosition()),N}function a(b,k){const L=b.context(),{lastOffset:N,lastStartLoc:H}=L,$=s(5,N,H);return $.index=parseInt(k,10),b.nextToken(),i($,b.currentOffset(),b.currentPosition()),$}function c(b,k){const L=b.context(),{lastOffset:N,lastStartLoc:H}=L,$=s(4,N,H);return $.key=k,b.nextToken(),i($,b.currentOffset(),b.currentPosition()),$}function u(b,k){const L=b.context(),{lastOffset:N,lastStartLoc:H}=L,$=s(9,N,H);return $.value=k.replace(NR,OR),b.nextToken(),i($,b.currentOffset(),b.currentPosition()),$}function h(b){const k=b.nextToken(),L=b.context(),{lastOffset:N,lastStartLoc:H}=L,$=s(8,N,H);return k.type!==12?(r(b,Ie.UNEXPECTED_EMPTY_LINKED_MODIFIER,L.lastStartLoc,0),$.value="",i($,N,H),{nextConsumeToken:k,node:$}):(k.value==null&&r(b,Ie.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,zn(k)),$.value=k.value||"",i($,b.currentOffset(),b.currentPosition()),{node:$})}function f(b,k){const L=b.context(),N=s(7,L.offset,L.startLoc);return N.value=k,i(N,b.currentOffset(),b.currentPosition()),N}function p(b){const k=b.context(),L=s(6,k.offset,k.startLoc);let N=b.nextToken();if(N.type===9){const H=h(b);L.modifier=H.node,N=H.nextConsumeToken||b.nextToken()}switch(N.type!==10&&r(b,Ie.UNEXPECTED_LEXICAL_ANALYSIS,k.lastStartLoc,0,zn(N)),N=b.nextToken(),N.type===2&&(N=b.nextToken()),N.type){case 11:N.value==null&&r(b,Ie.UNEXPECTED_LEXICAL_ANALYSIS,k.lastStartLoc,0,zn(N)),L.key=f(b,N.value||"");break;case 5:N.value==null&&r(b,Ie.UNEXPECTED_LEXICAL_ANALYSIS,k.lastStartLoc,0,zn(N)),L.key=c(b,N.value||"");break;case 6:N.value==null&&r(b,Ie.UNEXPECTED_LEXICAL_ANALYSIS,k.lastStartLoc,0,zn(N)),L.key=a(b,N.value||"");break;case 7:N.value==null&&r(b,Ie.UNEXPECTED_LEXICAL_ANALYSIS,k.lastStartLoc,0,zn(N)),L.key=u(b,N.value||"");break;default:{r(b,Ie.UNEXPECTED_EMPTY_LINKED_KEY,k.lastStartLoc,0);const H=b.context(),$=s(7,H.offset,H.startLoc);return $.value="",i($,H.offset,H.startLoc),L.key=$,i(L,H.offset,H.startLoc),{nextConsumeToken:N,node:L}}}return i(L,b.currentOffset(),b.currentPosition()),{node:L}}function y(b){const k=b.context(),L=k.currentType===1?b.currentOffset():k.offset,N=k.currentType===1?k.endLoc:k.startLoc,H=s(2,L,N);H.items=[];let $=null;do{const T=$||b.nextToken();switch($=null,T.type){case 0:T.value==null&&r(b,Ie.UNEXPECTED_LEXICAL_ANALYSIS,k.lastStartLoc,0,zn(T)),H.items.push(o(b,T.value||""));break;case 6:T.value==null&&r(b,Ie.UNEXPECTED_LEXICAL_ANALYSIS,k.lastStartLoc,0,zn(T)),H.items.push(a(b,T.value||""));break;case 5:T.value==null&&r(b,Ie.UNEXPECTED_LEXICAL_ANALYSIS,k.lastStartLoc,0,zn(T)),H.items.push(c(b,T.value||""));break;case 7:T.value==null&&r(b,Ie.UNEXPECTED_LEXICAL_ANALYSIS,k.lastStartLoc,0,zn(T)),H.items.push(u(b,T.value||""));break;case 8:{const S=p(b);H.items.push(S.node),$=S.nextConsumeToken||null;break}}}while(k.currentType!==14&&k.currentType!==1);const A=k.currentType===1?k.lastOffset:b.currentOffset(),E=k.currentType===1?k.lastEndLoc:b.currentPosition();return i(H,A,E),H}function w(b,k,L,N){const H=b.context();let $=N.items.length===0;const A=s(1,k,L);A.cases=[],A.cases.push(N);do{const E=y(b);$||($=E.items.length===0),A.cases.push(E)}while(H.currentType!==14);return $&&r(b,Ie.MUST_HAVE_MESSAGES_IN_PLURAL,L,0),i(A,b.currentOffset(),b.currentPosition()),A}function P(b){const k=b.context(),{offset:L,startLoc:N}=k,H=y(b);return k.currentType===14?H:w(b,L,N,H)}function R(b){const k=PR(b,aE({},t)),L=k.context(),N=s(0,L.offset,L.startLoc);return e&&N.loc&&(N.loc.source=b),N.body=P(k),t.onCacheKey&&(N.cacheKey=t.onCacheKey(b)),L.currentType!==14&&r(k,Ie.UNEXPECTED_LEXICAL_ANALYSIS,L.lastStartLoc,0,b[L.offset]||""),i(N,k.currentOffset(),k.currentPosition()),N}return{parse:R}}function zn(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function DR(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:i=>(n.helpers.add(i),i)}}function um(t,e){for(let n=0;n<t.length;n++)Zd(t[n],e)}function Zd(t,e){switch(t.type){case 1:um(t.cases,e),e.helper("plural");break;case 2:um(t.items,e);break;case 6:{Zd(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function MR(t,e={}){const n=DR(t);n.helper("normalize"),t.body&&Zd(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function xR(t){const e=t.body;return e.type===2?hm(e):e.cases.forEach(n=>hm(n)),t}function hm(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=lE(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}const VR="minifier";function si(t){switch(t.t=t.type,t.type){case 0:{const e=t;si(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)si(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)si(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;si(e.key),e.k=e.key,delete e.key,e.modifier&&(si(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}default:throw Ki(Ie.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:VR,args:[t.type]})}delete t.type}const FR="parser";function UR(t,e){const{sourceMap:n,filename:r,breakLineCode:s,needIndent:i}=e,o=e.location!==!1,a={filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:i,indentLevel:0};o&&t.loc&&(a.source=t.loc.source);const c=()=>a;function u(R,b){a.code+=R}function h(R,b=!0){const k=b?s:"";u(i?k+"  ".repeat(R):k)}function f(R=!0){const b=++a.indentLevel;R&&h(b)}function p(R=!0){const b=--a.indentLevel;R&&h(b)}function y(){h(a.indentLevel)}return{context:c,push:u,indent:f,deindent:p,newline:y,helper:R=>`_${R}`,needIndent:()=>a.needIndent}}function $R(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),Pi(t,e.key),e.modifier?(t.push(", "),Pi(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function BR(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const s=e.items.length;for(let i=0;i<s&&(Pi(t,e.items[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}function jR(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const s=e.cases.length;for(let i=0;i<s&&(Pi(t,e.cases[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}}function WR(t,e){e.body?Pi(t,e.body):t.push("null")}function Pi(t,e){const{helper:n}=t;switch(e.type){case 0:WR(t,e);break;case 1:jR(t,e);break;case 2:BR(t,e);break;case 6:$R(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break;default:throw Ki(Ie.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:FR,args:[e.type]})}}const HR=(t,e={})=>{const n=lm(e.mode)?e.mode:"normal",r=lm(e.filename)?e.filename:"message.intl",s=!!e.sourceMap,i=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,o=e.needIndent?e.needIndent:n!=="arrow",a=t.helpers||[],c=UR(t,{mode:n,filename:r,sourceMap:s,breakLineCode:i,needIndent:o});c.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),c.indent(o),a.length>0&&(c.push(`const { ${lE(a.map(f=>`${f}: _${f}`),", ")} } = ctx`),c.newline()),c.push("return "),Pi(c,t),c.deindent(o),c.push("}"),delete t.helpers;const{code:u,map:h}=c.context();return{ast:t,code:u,map:h?h.toJSON():void 0}};function zR(t,e={}){const n=aE({},e),r=!!n.jit,s=!!n.minify,i=n.optimize==null?!0:n.optimize,a=LR(n).parse(t);return r?(i&&xR(a),s&&si(a),{ast:a,code:""}):(MR(a,n),HR(a,n))}/*!
  * core-base v9.10.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function GR(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(fr().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(fr().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(fr().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const ds=[];ds[0]={w:[0],i:[3,0],"[":[4],o:[7]};ds[1]={w:[1],".":[2],"[":[4],o:[7]};ds[2]={w:[2],i:[3,0],0:[3,0]};ds[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};ds[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};ds[5]={"'":[4,0],o:8,l:[5,0]};ds[6]={'"':[4,0],o:8,l:[6,0]};const qR=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function KR(t){return qR.test(t)}function YR(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function QR(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function XR(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:KR(e)?YR(e):"*"+e}function JR(t){const e=[];let n=-1,r=0,s=0,i,o,a,c,u,h,f;const p=[];p[0]=()=>{o===void 0?o=a:o+=a},p[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},p[2]=()=>{p[0](),s++},p[3]=()=>{if(s>0)s--,r=4,p[0]();else{if(s=0,o===void 0||(o=XR(o),o===!1))return!1;p[1]()}};function y(){const w=t[n+1];if(r===5&&w==="'"||r===6&&w==='"')return n++,a="\\"+w,p[0](),!0}for(;r!==null;)if(n++,i=t[n],!(i==="\\"&&y())){if(c=QR(i),f=ds[r],u=f[c]||f.l||8,u===8||(r=u[0],u[1]!==void 0&&(h=p[u[1]],h&&(a=i,h()===!1))))return;if(r===7)return e}}const dm=new Map;function ZR(t,e){return Ye(t)?t[e]:null}function eS(t,e){if(!Ye(t))return null;let n=dm.get(e);if(n||(n=JR(e),n&&dm.set(e,n)),!n)return null;const r=n.length;let s=t,i=0;for(;i<r;){const o=s[n[i]];if(o===void 0||st(s))return null;s=o,i++}return s}const tS=t=>t,nS=t=>"",rS="text",sS=t=>t.length===0?"":_R(t),iS=pR;function fm(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function oS(t){const e=Pt(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(Pt(t.named.count)||Pt(t.named.n))?Pt(t.named.count)?t.named.count:Pt(t.named.n)?t.named.n:e:e}function aS(t,e){e.count||(e.count=t),e.n||(e.n=t)}function lS(t={}){const e=t.locale,n=oS(t),r=Ye(t.pluralRules)&&oe(e)&&st(t.pluralRules[e])?t.pluralRules[e]:fm,s=Ye(t.pluralRules)&&oe(e)&&st(t.pluralRules[e])?fm:void 0,i=b=>b[r(n,b.length,s)],o=t.list||[],a=b=>o[b],c=t.named||{};Pt(t.pluralIndex)&&aS(n,c);const u=b=>c[b];function h(b){const k=st(t.messages)?t.messages(b):Ye(t.messages)?t.messages[b]:!1;return k||(t.parent?t.parent.message(b):nS)}const f=b=>t.modifiers?t.modifiers[b]:tS,p=Re(t.processor)&&st(t.processor.normalize)?t.processor.normalize:sS,y=Re(t.processor)&&st(t.processor.interpolate)?t.processor.interpolate:iS,w=Re(t.processor)&&oe(t.processor.type)?t.processor.type:rS,R={list:a,named:u,plural:i,linked:(b,...k)=>{const[L,N]=k;let H="text",$="";k.length===1?Ye(L)?($=L.modifier||$,H=L.type||H):oe(L)&&($=L||$):k.length===2&&(oe(L)&&($=L||$),oe(N)&&(H=N||H));const A=h(b)(R),E=H==="vnode"&&ut(A)&&$?A[0]:A;return $?f($)(E,H):E},message:h,type:w,interpolate:y,normalize:p,values:Gt({},o,c)};return R}let aa=null;function cS(t){aa=t}function uS(t,e,n){aa&&aa.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const hS=dS("function:translate");function dS(t){return e=>aa&&aa.emit(t,e)}const fS={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:7,__EXTEND_POINT__:8},cE=Ie.__EXTEND_POINT__,vs=Jd(cE),On={INVALID_ARGUMENT:cE,INVALID_DATE_ARGUMENT:vs(),INVALID_ISO_DATE_ARGUMENT:vs(),NOT_SUPPORT_NON_STRING_MESSAGE:vs(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:vs(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:vs(),NOT_SUPPORT_LOCALE_TYPE:vs(),__EXTEND_POINT__:vs()};function Kn(t){return Ki(t,null,void 0)}function ef(t,e){return e.locale!=null?pm(e.locale):pm(t.locale)}let Hu;function pm(t){if(oe(t))return t;if(st(t)){if(t.resolvedOnce&&Hu!=null)return Hu;if(t.constructor.name==="Function"){const e=t();if(fR(e))throw Kn(On.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Hu=e}else throw Kn(On.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Kn(On.NOT_SUPPORT_LOCALE_TYPE)}function pS(t,e,n){return[...new Set([n,...ut(e)?e:Ye(e)?Object.keys(e):oe(e)?[e]:[n]])]}function uE(t,e,n){const r=oe(n)?n:ki,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let i=s.__localeChainCache.get(r);if(!i){i=[];let o=[n];for(;ut(o);)o=_m(i,o,e);const a=ut(e)||!Re(e)?e:e.default?e.default:null;o=oe(a)?[a]:a,ut(o)&&_m(i,o,!1),s.__localeChainCache.set(r,i)}return i}function _m(t,e,n){let r=!0;for(let s=0;s<e.length&&Le(r);s++){const i=e[s];oe(i)&&(r=_S(t,e[s],n))}return r}function _S(t,e,n){let r;const s=e.split("-");do{const i=s.join("-");r=mS(t,i,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function mS(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(ut(n)||Re(n))&&n[s]&&(r=n[s])}return r}const gS="9.10.2",jc=-1,ki="en-US",mm="",gm=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function yS(){return{upper:(t,e)=>e==="text"&&oe(t)?t.toUpperCase():e==="vnode"&&Ye(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&oe(t)?t.toLowerCase():e==="vnode"&&Ye(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&oe(t)?gm(t):e==="vnode"&&Ye(t)&&"__v_isVNode"in t?gm(t.children):t}}let hE;function ym(t){hE=t}let dE;function vS(t){dE=t}let fE;function ES(t){fE=t}let pE=null;const TS=t=>{pE=t},IS=()=>pE;let _E=null;const vm=t=>{_E=t},wS=()=>_E;let Em=0;function bS(t={}){const e=st(t.onWarn)?t.onWarn:mR,n=oe(t.version)?t.version:gS,r=oe(t.locale)||st(t.locale)?t.locale:ki,s=st(r)?ki:r,i=ut(t.fallbackLocale)||Re(t.fallbackLocale)||oe(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,o=Re(t.messages)?t.messages:{[s]:{}},a=Re(t.datetimeFormats)?t.datetimeFormats:{[s]:{}},c=Re(t.numberFormats)?t.numberFormats:{[s]:{}},u=Gt({},t.modifiers||{},yS()),h=t.pluralRules||{},f=st(t.missing)?t.missing:null,p=Le(t.missingWarn)||ts(t.missingWarn)?t.missingWarn:!0,y=Le(t.fallbackWarn)||ts(t.fallbackWarn)?t.fallbackWarn:!0,w=!!t.fallbackFormat,P=!!t.unresolving,R=st(t.postTranslation)?t.postTranslation:null,b=Re(t.processor)?t.processor:null,k=Le(t.warnHtmlMessage)?t.warnHtmlMessage:!0,L=!!t.escapeParameter,N=st(t.messageCompiler)?t.messageCompiler:hE,H=st(t.messageResolver)?t.messageResolver:dE||ZR,$=st(t.localeFallbacker)?t.localeFallbacker:fE||pS,A=Ye(t.fallbackContext)?t.fallbackContext:void 0,E=t,T=Ye(E.__datetimeFormatters)?E.__datetimeFormatters:new Map,S=Ye(E.__numberFormatters)?E.__numberFormatters:new Map,O=Ye(E.__meta)?E.__meta:{};Em++;const D={version:n,cid:Em,locale:r,fallbackLocale:i,messages:o,modifiers:u,pluralRules:h,missing:f,missingWarn:p,fallbackWarn:y,fallbackFormat:w,unresolving:P,postTranslation:R,processor:b,warnHtmlMessage:k,escapeParameter:L,messageCompiler:N,messageResolver:H,localeFallbacker:$,fallbackContext:A,onWarn:e,__meta:O};return D.datetimeFormats=a,D.numberFormats=c,D.__datetimeFormatters=T,D.__numberFormatters=S,__INTLIFY_PROD_DEVTOOLS__&&uS(D,n,O),D}function tf(t,e,n,r,s){const{missing:i,onWarn:o}=t;if(i!==null){const a=i(t,n,e,s);return oe(a)?a:e}else return e}function Io(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function zu(t){return n=>AS(n,t)}function AS(t,e){const n=e.b||e.body;if((n.t||n.type)===1){const r=n,s=r.c||r.cases;return t.plural(s.reduce((i,o)=>[...i,Tm(t,o)],[]))}else return Tm(t,n)}function Tm(t,e){const n=e.s||e.static;if(n)return t.type==="text"?n:t.normalize([n]);{const r=(e.i||e.items).reduce((s,i)=>[...s,Nh(t,i)],[]);return t.normalize(r)}}function Nh(t,e){const n=e.t||e.type;switch(n){case 3:{const r=e;return r.v||r.value}case 9:{const r=e;return r.v||r.value}case 4:{const r=e;return t.interpolate(t.named(r.k||r.key))}case 5:{const r=e;return t.interpolate(t.list(r.i!=null?r.i:r.index))}case 6:{const r=e,s=r.m||r.modifier;return t.linked(Nh(t,r.k||r.key),s?Nh(t,s):void 0,t.type)}case 7:{const r=e;return r.v||r.value}case 8:{const r=e;return r.v||r.value}default:throw new Error(`unhandled node type on format message part: ${n}`)}}const mE=t=>t;let ci=Object.create(null);const Ni=t=>Ye(t)&&(t.t===0||t.type===0)&&("b"in t||"body"in t);function gE(t,e={}){let n=!1;const r=e.onError||IR;return e.onError=s=>{n=!0,r(s)},{...zR(t,e),detectError:n}}const CS=(t,e)=>{if(!oe(t))throw Kn(On.NOT_SUPPORT_NON_STRING_MESSAGE);{Le(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||mE)(t),s=ci[r];if(s)return s;const{code:i,detectError:o}=gE(t,e),a=new Function(`return ${i}`)();return o?a:ci[r]=a}};function RS(t,e){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&oe(t)){Le(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||mE)(t),s=ci[r];if(s)return s;const{ast:i,detectError:o}=gE(t,{...e,location:!1,jit:!0}),a=zu(i);return o?a:ci[r]=a}else{const n=t.cacheKey;if(n){const r=ci[n];return r||(ci[n]=zu(t))}else return zu(t)}}const Im=()=>"",wn=t=>st(t);function wm(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:i,fallbackLocale:o,messages:a}=t,[c,u]=Oh(...e),h=Le(u.missingWarn)?u.missingWarn:t.missingWarn,f=Le(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn,p=Le(u.escapeParameter)?u.escapeParameter:t.escapeParameter,y=!!u.resolvedMessage,w=oe(u.default)||Le(u.default)?Le(u.default)?i?c:()=>c:u.default:n?i?c:()=>c:"",P=n||w!=="",R=ef(t,u);p&&SS(u);let[b,k,L]=y?[c,R,a[R]||{}]:yE(t,c,R,o,f,h),N=b,H=c;if(!y&&!(oe(N)||Ni(N)||wn(N))&&P&&(N=w,H=N),!y&&(!(oe(N)||Ni(N)||wn(N))||!oe(k)))return s?jc:c;let $=!1;const A=()=>{$=!0},E=wn(N)?N:vE(t,c,k,N,H,A);if($)return N;const T=NS(t,k,L,u),S=lS(T),O=PS(t,E,S),D=r?r(O,c):O;if(__INTLIFY_PROD_DEVTOOLS__){const C={timestamp:Date.now(),key:oe(c)?c:wn(N)?N.key:"",locale:k||(wn(N)?N.locale:""),format:oe(N)?N:wn(N)?N.source:"",message:D};C.meta=Gt({},t.__meta,IS()||{}),hS(C)}return D}function SS(t){ut(t.list)?t.list=t.list.map(e=>oe(e)?am(e):e):Ye(t.named)&&Object.keys(t.named).forEach(e=>{oe(t.named[e])&&(t.named[e]=am(t.named[e]))})}function yE(t,e,n,r,s,i){const{messages:o,onWarn:a,messageResolver:c,localeFallbacker:u}=t,h=u(t,r,n);let f={},p,y=null;const w="translate";for(let P=0;P<h.length&&(p=h[P],f=o[p]||{},(y=c(f,e))===null&&(y=f[e]),!(oe(y)||Ni(y)||wn(y)));P++){const R=tf(t,e,p,i,w);R!==e&&(y=R)}return[y,p,f]}function vE(t,e,n,r,s,i){const{messageCompiler:o,warnHtmlMessage:a}=t;if(wn(r)){const u=r;return u.locale=u.locale||n,u.key=u.key||e,u}if(o==null){const u=()=>r;return u.locale=n,u.key=e,u}const c=o(r,kS(t,n,s,r,a,i));return c.locale=n,c.key=e,c.source=r,c}function PS(t,e,n){return e(n)}function Oh(...t){const[e,n,r]=t,s={};if(!oe(e)&&!Pt(e)&&!wn(e)&&!Ni(e))throw Kn(On.INVALID_ARGUMENT);const i=Pt(e)?String(e):(wn(e),e);return Pt(n)?s.plural=n:oe(n)?s.default=n:Re(n)&&!Bc(n)?s.named=n:ut(n)&&(s.list=n),Pt(r)?s.plural=r:oe(r)?s.default=r:Re(r)&&Gt(s,r),[i,s]}function kS(t,e,n,r,s,i){return{locale:e,key:n,warnHtmlMessage:s,onError:o=>{throw i&&i(o),o},onCacheKey:o=>cR(e,n,o)}}function NS(t,e,n,r){const{modifiers:s,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:c,missingWarn:u,fallbackContext:h}=t,p={locale:e,modifiers:s,pluralRules:i,messages:y=>{let w=o(n,y);if(w==null&&h){const[,,P]=yE(h,y,e,a,c,u);w=o(P,y)}if(oe(w)||Ni(w)){let P=!1;const b=vE(t,y,e,w,y,()=>{P=!0});return P?Im:b}else return wn(w)?w:Im}};return t.processor&&(p.processor=t.processor),r.list&&(p.list=r.list),r.named&&(p.named=r.named),Pt(r.plural)&&(p.pluralIndex=r.plural),p}function bm(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[c,u,h,f]=Lh(...e),p=Le(h.missingWarn)?h.missingWarn:t.missingWarn;Le(h.fallbackWarn)?h.fallbackWarn:t.fallbackWarn;const y=!!h.part,w=ef(t,h),P=o(t,s,w);if(!oe(c)||c==="")return new Intl.DateTimeFormat(w,f).format(u);let R={},b,k=null;const L="datetime format";for(let $=0;$<P.length&&(b=P[$],R=n[b]||{},k=R[c],!Re(k));$++)tf(t,c,b,p,L);if(!Re(k)||!oe(b))return r?jc:c;let N=`${b}__${c}`;Bc(f)||(N=`${N}__${JSON.stringify(f)}`);let H=a.get(N);return H||(H=new Intl.DateTimeFormat(b,Gt({},k,f)),a.set(N,H)),y?H.formatToParts(u):H.format(u)}const EE=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Lh(...t){const[e,n,r,s]=t,i={};let o={},a;if(oe(e)){const c=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!c)throw Kn(On.INVALID_ISO_DATE_ARGUMENT);const u=c[3]?c[3].trim().startsWith("T")?`${c[1].trim()}${c[3].trim()}`:`${c[1].trim()}T${c[3].trim()}`:c[1].trim();a=new Date(u);try{a.toISOString()}catch{throw Kn(On.INVALID_ISO_DATE_ARGUMENT)}}else if(hR(e)){if(isNaN(e.getTime()))throw Kn(On.INVALID_DATE_ARGUMENT);a=e}else if(Pt(e))a=e;else throw Kn(On.INVALID_ARGUMENT);return oe(n)?i.key=n:Re(n)&&Object.keys(n).forEach(c=>{EE.includes(c)?o[c]=n[c]:i[c]=n[c]}),oe(r)?i.locale=r:Re(r)&&(o=r),Re(s)&&(o=s),[i.key||"",a,i,o]}function Am(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function Cm(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:a}=t,[c,u,h,f]=Dh(...e),p=Le(h.missingWarn)?h.missingWarn:t.missingWarn;Le(h.fallbackWarn)?h.fallbackWarn:t.fallbackWarn;const y=!!h.part,w=ef(t,h),P=o(t,s,w);if(!oe(c)||c==="")return new Intl.NumberFormat(w,f).format(u);let R={},b,k=null;const L="number format";for(let $=0;$<P.length&&(b=P[$],R=n[b]||{},k=R[c],!Re(k));$++)tf(t,c,b,p,L);if(!Re(k)||!oe(b))return r?jc:c;let N=`${b}__${c}`;Bc(f)||(N=`${N}__${JSON.stringify(f)}`);let H=a.get(N);return H||(H=new Intl.NumberFormat(b,Gt({},k,f)),a.set(N,H)),y?H.formatToParts(u):H.format(u)}const TE=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Dh(...t){const[e,n,r,s]=t,i={};let o={};if(!Pt(e))throw Kn(On.INVALID_ARGUMENT);const a=e;return oe(n)?i.key=n:Re(n)&&Object.keys(n).forEach(c=>{TE.includes(c)?o[c]=n[c]:i[c]=n[c]}),oe(r)?i.locale=r:Re(r)&&(o=r),Re(s)&&(o=s),[i.key||"",a,i,o]}function Rm(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}GR();/*!
  * vue-i18n v9.10.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const OS="9.10.2";function LS(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(fr().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(fr().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(fr().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(fr().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(fr().__INTLIFY_PROD_DEVTOOLS__=!1)}const IE=fS.__EXTEND_POINT__,hr=Jd(IE);hr(),hr(),hr(),hr(),hr(),hr(),hr(),hr(),hr();const wE=On.__EXTEND_POINT__,hn=Jd(wE),Ot={UNEXPECTED_RETURN_TYPE:wE,INVALID_ARGUMENT:hn(),MUST_BE_CALL_SETUP_TOP:hn(),NOT_INSTALLED:hn(),NOT_AVAILABLE_IN_LEGACY_MODE:hn(),REQUIRED_VALUE:hn(),INVALID_VALUE:hn(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:hn(),NOT_INSTALLED_WITH_PROVIDE:hn(),UNEXPECTED_ERROR:hn(),NOT_COMPATIBLE_LEGACY_VUE_I18N:hn(),BRIDGE_SUPPORT_VUE_2_ONLY:hn(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:hn(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:hn(),__EXTEND_POINT__:hn()};function Ut(t,...e){return Ki(t,null,void 0)}const Mh=hs("__translateVNode"),xh=hs("__datetimeParts"),Vh=hs("__numberParts"),bE=hs("__setPluralRules"),AE=hs("__injectWithOption"),Fh=hs("__dispose");function la(t){if(!Ye(t))return t;for(const e in t)if(zl(t,e))if(!e.includes("."))Ye(t[e])&&la(t[e]);else{const n=e.split("."),r=n.length-1;let s=t,i=!1;for(let o=0;o<r;o++){if(n[o]in s||(s[n[o]]={}),!Ye(s[n[o]])){i=!0;break}s=s[n[o]]}i||(s[n[r]]=t[e],delete t[e]),Ye(s[n[r]])&&la(s[n[r]])}return t}function Wc(t,e){const{messages:n,__i18n:r,messageResolver:s,flatJson:i}=e,o=Re(n)?n:ut(r)?{}:{[t]:{}};if(ut(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:c,resource:u}=a;c?(o[c]=o[c]||{},Rl(u,o[c])):Rl(u,o)}else oe(a)&&Rl(JSON.parse(a),o)}),s==null&&i)for(const a in o)zl(o,a)&&la(o[a]);return o}function CE(t){return t.type}function RE(t,e,n){let r=Ye(e.messages)?e.messages:{};"__i18nGlobal"in n&&(r=Wc(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(i=>{t.mergeLocaleMessage(i,r[i])});{if(Ye(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(Ye(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function Sm(t){return J(Aa,null,t,0)}const Pm="__INTLIFY_META__",km=()=>[],DS=()=>!1;let Nm=0;function Om(t){return(e,n,r,s)=>t(n,r,es()||void 0,s)}const MS=()=>{const t=es();let e=null;return t&&(e=CE(t)[Pm])?{[Pm]:e}:null};function nf(t={},e){const{__root:n,__injectWithOption:r}=t,s=n===void 0,i=t.flatJson,o=Hl?We:Sc,a=!!t.translateExistCompatible;let c=Le(t.inheritLocale)?t.inheritLocale:!0;const u=o(n&&c?n.locale.value:oe(t.locale)?t.locale:ki),h=o(n&&c?n.fallbackLocale.value:oe(t.fallbackLocale)||ut(t.fallbackLocale)||Re(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:u.value),f=o(Wc(u.value,t)),p=o(Re(t.datetimeFormats)?t.datetimeFormats:{[u.value]:{}}),y=o(Re(t.numberFormats)?t.numberFormats:{[u.value]:{}});let w=n?n.missingWarn:Le(t.missingWarn)||ts(t.missingWarn)?t.missingWarn:!0,P=n?n.fallbackWarn:Le(t.fallbackWarn)||ts(t.fallbackWarn)?t.fallbackWarn:!0,R=n?n.fallbackRoot:Le(t.fallbackRoot)?t.fallbackRoot:!0,b=!!t.fallbackFormat,k=st(t.missing)?t.missing:null,L=st(t.missing)?Om(t.missing):null,N=st(t.postTranslation)?t.postTranslation:null,H=n?n.warnHtmlMessage:Le(t.warnHtmlMessage)?t.warnHtmlMessage:!0,$=!!t.escapeParameter;const A=n?n.modifiers:Re(t.modifiers)?t.modifiers:{};let E=t.pluralRules||n&&n.pluralRules,T;T=(()=>{s&&vm(null);const U={version:OS,locale:u.value,fallbackLocale:h.value,messages:f.value,modifiers:A,pluralRules:E,missing:L===null?void 0:L,missingWarn:w,fallbackWarn:P,fallbackFormat:b,unresolving:!0,postTranslation:N===null?void 0:N,warnHtmlMessage:H,escapeParameter:$,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};U.datetimeFormats=p.value,U.numberFormats=y.value,U.__datetimeFormatters=Re(T)?T.__datetimeFormatters:void 0,U.__numberFormatters=Re(T)?T.__numberFormatters:void 0;const B=bS(U);return s&&vm(B),B})(),Io(T,u.value,h.value);function O(){return[u.value,h.value,f.value,p.value,y.value]}const D=be({get:()=>u.value,set:U=>{u.value=U,T.locale=u.value}}),C=be({get:()=>h.value,set:U=>{h.value=U,T.fallbackLocale=h.value,Io(T,u.value,U)}}),nt=be(()=>f.value),gt=be(()=>p.value),Ne=be(()=>y.value);function fe(){return st(N)?N:null}function Se(U){N=U,T.postTranslation=U}function yt(){return k}function Ct(U){U!==null&&(L=Om(U)),k=U,T.missing=L}const rt=(U,B,le,ve,qe,Rt)=>{O();let on;try{__INTLIFY_PROD_DEVTOOLS__,s||(T.fallbackContext=n?wS():void 0),on=U(T)}finally{__INTLIFY_PROD_DEVTOOLS__,s||(T.fallbackContext=void 0)}if(le!=="translate exists"&&Pt(on)&&on===jc||le==="translate exists"&&!on){const[Wn,or]=B();return n&&R?ve(n):qe(Wn)}else{if(Rt(on))return on;throw Ut(Ot.UNEXPECTED_RETURN_TYPE)}};function Oe(...U){return rt(B=>Reflect.apply(wm,null,[B,...U]),()=>Oh(...U),"translate",B=>Reflect.apply(B.t,B,[...U]),B=>B,B=>oe(B))}function Te(...U){const[B,le,ve]=U;if(ve&&!Ye(ve))throw Ut(Ot.INVALID_ARGUMENT);return Oe(B,le,Gt({resolvedMessage:!0},ve||{}))}function Je(...U){return rt(B=>Reflect.apply(bm,null,[B,...U]),()=>Lh(...U),"datetime format",B=>Reflect.apply(B.d,B,[...U]),()=>mm,B=>oe(B))}function Yt(...U){return rt(B=>Reflect.apply(Cm,null,[B,...U]),()=>Dh(...U),"number format",B=>Reflect.apply(B.n,B,[...U]),()=>mm,B=>oe(B))}function ft(U){return U.map(B=>oe(B)||Pt(B)||Le(B)?Sm(String(B)):B)}const se={normalize:ft,interpolate:U=>U,type:"vnode"};function te(...U){return rt(B=>{let le;const ve=B;try{ve.processor=se,le=Reflect.apply(wm,null,[ve,...U])}finally{ve.processor=null}return le},()=>Oh(...U),"translate",B=>B[Mh](...U),B=>[Sm(B)],B=>ut(B))}function ae(...U){return rt(B=>Reflect.apply(Cm,null,[B,...U]),()=>Dh(...U),"number format",B=>B[Vh](...U),km,B=>oe(B)||ut(B))}function ke(...U){return rt(B=>Reflect.apply(bm,null,[B,...U]),()=>Lh(...U),"datetime format",B=>B[xh](...U),km,B=>oe(B)||ut(B))}function Fe(U){E=U,T.pluralRules=E}function g(U,B){return rt(()=>{if(!U)return!1;const le=oe(B)?B:u.value,ve=x(le),qe=T.messageResolver(ve,U);return a?qe!=null:Ni(qe)||wn(qe)||oe(qe)},()=>[U],"translate exists",le=>Reflect.apply(le.te,le,[U,B]),DS,le=>Le(le))}function m(U){let B=null;const le=uE(T,h.value,u.value);for(let ve=0;ve<le.length;ve++){const qe=f.value[le[ve]]||{},Rt=T.messageResolver(qe,U);if(Rt!=null){B=Rt;break}}return B}function I(U){const B=m(U);return B??(n?n.tm(U)||{}:{})}function x(U){return f.value[U]||{}}function F(U,B){if(i){const le={[U]:B};for(const ve in le)zl(le,ve)&&la(le[ve]);B=le[U]}f.value[U]=B,T.messages=f.value}function G(U,B){f.value[U]=f.value[U]||{};const le={[U]:B};if(i)for(const ve in le)zl(le,ve)&&la(le[ve]);B=le[U],Rl(B,f.value[U]),T.messages=f.value}function Z(U){return p.value[U]||{}}function X(U,B){p.value[U]=B,T.datetimeFormats=p.value,Am(T,U,B)}function ee(U,B){p.value[U]=Gt(p.value[U]||{},B),T.datetimeFormats=p.value,Am(T,U,B)}function K(U){return y.value[U]||{}}function ce(U,B){y.value[U]=B,T.numberFormats=y.value,Rm(T,U,B)}function pe(U,B){y.value[U]=Gt(y.value[U]||{},B),T.numberFormats=y.value,Rm(T,U,B)}Nm++,n&&Hl&&(mr(n.locale,U=>{c&&(u.value=U,T.locale=U,Io(T,u.value,h.value))}),mr(n.fallbackLocale,U=>{c&&(h.value=U,T.fallbackLocale=U,Io(T,u.value,h.value))}));const re={id:Nm,locale:D,fallbackLocale:C,get inheritLocale(){return c},set inheritLocale(U){c=U,U&&n&&(u.value=n.locale.value,h.value=n.fallbackLocale.value,Io(T,u.value,h.value))},get availableLocales(){return Object.keys(f.value).sort()},messages:nt,get modifiers(){return A},get pluralRules(){return E||{}},get isGlobal(){return s},get missingWarn(){return w},set missingWarn(U){w=U,T.missingWarn=w},get fallbackWarn(){return P},set fallbackWarn(U){P=U,T.fallbackWarn=P},get fallbackRoot(){return R},set fallbackRoot(U){R=U},get fallbackFormat(){return b},set fallbackFormat(U){b=U,T.fallbackFormat=b},get warnHtmlMessage(){return H},set warnHtmlMessage(U){H=U,T.warnHtmlMessage=U},get escapeParameter(){return $},set escapeParameter(U){$=U,T.escapeParameter=U},t:Oe,getLocaleMessage:x,setLocaleMessage:F,mergeLocaleMessage:G,getPostTranslationHandler:fe,setPostTranslationHandler:Se,getMissingHandler:yt,setMissingHandler:Ct,[bE]:Fe};return re.datetimeFormats=gt,re.numberFormats=Ne,re.rt=Te,re.te=g,re.tm=I,re.d=Je,re.n=Yt,re.getDateTimeFormat=Z,re.setDateTimeFormat=X,re.mergeDateTimeFormat=ee,re.getNumberFormat=K,re.setNumberFormat=ce,re.mergeNumberFormat=pe,re[AE]=r,re[Mh]=te,re[xh]=ke,re[Vh]=ae,re}function xS(t){const e=oe(t.locale)?t.locale:ki,n=oe(t.fallbackLocale)||ut(t.fallbackLocale)||Re(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,r=st(t.missing)?t.missing:void 0,s=Le(t.silentTranslationWarn)||ts(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,i=Le(t.silentFallbackWarn)||ts(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,o=Le(t.fallbackRoot)?t.fallbackRoot:!0,a=!!t.formatFallbackMessages,c=Re(t.modifiers)?t.modifiers:{},u=t.pluralizationRules,h=st(t.postTranslation)?t.postTranslation:void 0,f=oe(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,p=!!t.escapeParameterHtml,y=Le(t.sync)?t.sync:!0;let w=t.messages;if(Re(t.sharedMessages)){const $=t.sharedMessages;w=Object.keys($).reduce((E,T)=>{const S=E[T]||(E[T]={});return Gt(S,$[T]),E},w||{})}const{__i18n:P,__root:R,__injectWithOption:b}=t,k=t.datetimeFormats,L=t.numberFormats,N=t.flatJson,H=t.translateExistCompatible;return{locale:e,fallbackLocale:n,messages:w,flatJson:N,datetimeFormats:k,numberFormats:L,missing:r,missingWarn:s,fallbackWarn:i,fallbackRoot:o,fallbackFormat:a,modifiers:c,pluralRules:u,postTranslation:h,warnHtmlMessage:f,escapeParameter:p,messageResolver:t.messageResolver,inheritLocale:y,translateExistCompatible:H,__i18n:P,__root:R,__injectWithOption:b}}function Uh(t={},e){{const n=nf(xS(t)),{__extender:r}=t,s={id:n.id,get locale(){return n.locale.value},set locale(i){n.locale.value=i},get fallbackLocale(){return n.fallbackLocale.value},set fallbackLocale(i){n.fallbackLocale.value=i},get messages(){return n.messages.value},get datetimeFormats(){return n.datetimeFormats.value},get numberFormats(){return n.numberFormats.value},get availableLocales(){return n.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(i){},get missing(){return n.getMissingHandler()},set missing(i){n.setMissingHandler(i)},get silentTranslationWarn(){return Le(n.missingWarn)?!n.missingWarn:n.missingWarn},set silentTranslationWarn(i){n.missingWarn=Le(i)?!i:i},get silentFallbackWarn(){return Le(n.fallbackWarn)?!n.fallbackWarn:n.fallbackWarn},set silentFallbackWarn(i){n.fallbackWarn=Le(i)?!i:i},get modifiers(){return n.modifiers},get formatFallbackMessages(){return n.fallbackFormat},set formatFallbackMessages(i){n.fallbackFormat=i},get postTranslation(){return n.getPostTranslationHandler()},set postTranslation(i){n.setPostTranslationHandler(i)},get sync(){return n.inheritLocale},set sync(i){n.inheritLocale=i},get warnHtmlInMessage(){return n.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(i){n.warnHtmlMessage=i!=="off"},get escapeParameterHtml(){return n.escapeParameter},set escapeParameterHtml(i){n.escapeParameter=i},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(i){},get pluralizationRules(){return n.pluralRules||{}},__composer:n,t(...i){const[o,a,c]=i,u={};let h=null,f=null;if(!oe(o))throw Ut(Ot.INVALID_ARGUMENT);const p=o;return oe(a)?u.locale=a:ut(a)?h=a:Re(a)&&(f=a),ut(c)?h=c:Re(c)&&(f=c),Reflect.apply(n.t,n,[p,h||f||{},u])},rt(...i){return Reflect.apply(n.rt,n,[...i])},tc(...i){const[o,a,c]=i,u={plural:1};let h=null,f=null;if(!oe(o))throw Ut(Ot.INVALID_ARGUMENT);const p=o;return oe(a)?u.locale=a:Pt(a)?u.plural=a:ut(a)?h=a:Re(a)&&(f=a),oe(c)?u.locale=c:ut(c)?h=c:Re(c)&&(f=c),Reflect.apply(n.t,n,[p,h||f||{},u])},te(i,o){return n.te(i,o)},tm(i){return n.tm(i)},getLocaleMessage(i){return n.getLocaleMessage(i)},setLocaleMessage(i,o){n.setLocaleMessage(i,o)},mergeLocaleMessage(i,o){n.mergeLocaleMessage(i,o)},d(...i){return Reflect.apply(n.d,n,[...i])},getDateTimeFormat(i){return n.getDateTimeFormat(i)},setDateTimeFormat(i,o){n.setDateTimeFormat(i,o)},mergeDateTimeFormat(i,o){n.mergeDateTimeFormat(i,o)},n(...i){return Reflect.apply(n.n,n,[...i])},getNumberFormat(i){return n.getNumberFormat(i)},setNumberFormat(i,o){n.setNumberFormat(i,o)},mergeNumberFormat(i,o){n.mergeNumberFormat(i,o)},getChoiceIndex(i,o){return-1}};return s.__extender=r,s}}const rf={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function VS({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>[...r,...s.type===bt?s.children:[s]],[]):e.reduce((n,r)=>{const s=t[r];return s&&(n[r]=s()),n},{})}function SE(t){return bt}const FS=ba({name:"i18n-t",props:Gt({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>Pt(t)||!isNaN(t)}},rf),setup(t,e){const{slots:n,attrs:r}=e,s=t.i18n||Ra({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(f=>f!=="_"),o={};t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=oe(t.plural)?+t.plural:t.plural);const a=VS(e,i),c=s[Mh](t.keypath,a,o),u=Gt({},r),h=oe(t.tag)||Ye(t.tag)?t.tag:SE();return xc(h,u,c)}}}),Lm=FS;function US(t){return ut(t)&&!oe(t[0])}function PE(t,e,n,r){const{slots:s,attrs:i}=e;return()=>{const o={part:!0};let a={};t.locale&&(o.locale=t.locale),oe(t.format)?o.key=t.format:Ye(t.format)&&(oe(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((p,y)=>n.includes(y)?Gt({},p,{[y]:t.format[y]}):p,{}));const c=r(t.value,o,a);let u=[o.key];ut(c)?u=c.map((p,y)=>{const w=s[p.type],P=w?w({[p.type]:p.value,index:y,parts:c}):[p.value];return US(P)&&(P[0].key=`${p.type}-${y}`),P}):oe(c)&&(u=[c]);const h=Gt({},i),f=oe(t.tag)||Ye(t.tag)?t.tag:SE();return xc(f,h,u)}}const $S=ba({name:"i18n-n",props:Gt({value:{type:Number,required:!0},format:{type:[String,Object]}},rf),setup(t,e){const n=t.i18n||Ra({useScope:"parent",__useComponent:!0});return PE(t,e,TE,(...r)=>n[Vh](...r))}}),Dm=$S,BS=ba({name:"i18n-d",props:Gt({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},rf),setup(t,e){const n=t.i18n||Ra({useScope:"parent",__useComponent:!0});return PE(t,e,EE,(...r)=>n[xh](...r))}}),Mm=BS;function jS(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function WS(t){const e=o=>{const{instance:a,modifiers:c,value:u}=o;if(!a||!a.$)throw Ut(Ot.UNEXPECTED_ERROR);const h=jS(t,a.$),f=xm(u);return[Reflect.apply(h.t,h,[...Vm(f)]),h]};return{created:(o,a)=>{const[c,u]=e(a);Hl&&t.global===u&&(o.__i18nWatcher=mr(u.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=u,o.textContent=c},unmounted:o=>{Hl&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const c=o.__composer,u=xm(a);o.textContent=Reflect.apply(c.t,c,[...Vm(u)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function xm(t){if(oe(t))return{path:t};if(Re(t)){if(!("path"in t))throw Ut(Ot.REQUIRED_VALUE,"path");return t}else throw Ut(Ot.INVALID_VALUE)}function Vm(t){const{path:e,locale:n,args:r,choice:s,plural:i}=t,o={},a=r||{};return oe(n)&&(o.locale=n),Pt(s)&&(o.plural=s),Pt(i)&&(o.plural=i),[e,a,o]}function HS(t,e,...n){const r=Re(n[0])?n[0]:{},s=!!r.useI18nComponentName;(Le(r.globalInstall)?r.globalInstall:!0)&&([s?"i18n":Lm.name,"I18nT"].forEach(o=>t.component(o,Lm)),[Dm.name,"I18nN"].forEach(o=>t.component(o,Dm)),[Mm.name,"I18nD"].forEach(o=>t.component(o,Mm))),t.directive("t",WS(e))}function zS(t,e,n){return{beforeCreate(){const r=es();if(!r)throw Ut(Ot.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const i=s.i18n;if(s.__i18n&&(i.__i18n=s.__i18n),i.__root=e,this===this.$root)this.$i18n=Fm(t,i);else{i.__injectWithOption=!0,i.__extender=n.__vueI18nExtend,this.$i18n=Uh(i);const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}}else if(s.__i18n)if(this===this.$root)this.$i18n=Fm(t,s);else{this.$i18n=Uh({__i18n:s.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:e});const i=this.$i18n;i.__extender&&(i.__disposer=i.__extender(this.$i18n))}else this.$i18n=t;s.__i18nGlobal&&RE(e,s,s),this.$t=(...i)=>this.$i18n.t(...i),this.$rt=(...i)=>this.$i18n.rt(...i),this.$tc=(...i)=>this.$i18n.tc(...i),this.$te=(i,o)=>this.$i18n.te(i,o),this.$d=(...i)=>this.$i18n.d(...i),this.$n=(...i)=>this.$i18n.n(...i),this.$tm=i=>this.$i18n.tm(i),n.__setInstance(r,this.$i18n)},mounted(){},unmounted(){const r=es();if(!r)throw Ut(Ot.UNEXPECTED_ERROR);const s=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,s.__disposer&&(s.__disposer(),delete s.__disposer,delete s.__extender),n.__deleteInstance(r),delete this.$i18n}}}function Fm(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[bE](e.pluralizationRules||t.pluralizationRules);const n=Wc(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(r=>t.mergeLocaleMessage(r,n[r])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(r=>t.mergeDateTimeFormat(r,e.datetimeFormats[r])),e.numberFormats&&Object.keys(e.numberFormats).forEach(r=>t.mergeNumberFormat(r,e.numberFormats[r])),t}const GS=hs("global-vue-i18n");function qS(t={},e){const n=__VUE_I18N_LEGACY_API__&&Le(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,r=Le(t.globalInjection)?t.globalInjection:!0,s=__VUE_I18N_LEGACY_API__&&n?!!t.allowComposition:!0,i=new Map,[o,a]=KS(t,n),c=hs("");function u(p){return i.get(p)||null}function h(p,y){i.set(p,y)}function f(p){i.delete(p)}{const p={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},get allowComposition(){return s},async install(y,...w){if(y.__VUE_I18N_SYMBOL__=c,y.provide(y.__VUE_I18N_SYMBOL__,p),Re(w[0])){const b=w[0];p.__composerExtend=b.__composerExtend,p.__vueI18nExtend=b.__vueI18nExtend}let P=null;!n&&r&&(P=rP(y,p.global)),__VUE_I18N_FULL_INSTALL__&&HS(y,p,...w),__VUE_I18N_LEGACY_API__&&n&&y.mixin(zS(a,a.__composer,p));const R=y.unmount;y.unmount=()=>{P&&P(),p.dispose(),R()}},get global(){return a},dispose(){o.stop()},__instances:i,__getInstance:u,__setInstance:h,__deleteInstance:f};return p}}function Ra(t={}){const e=es();if(e==null)throw Ut(Ot.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Ut(Ot.NOT_INSTALLED);const n=YS(e),r=XS(n),s=CE(e),i=QS(t,s);if(__VUE_I18N_LEGACY_API__&&n.mode==="legacy"&&!t.__useComponent){if(!n.allowComposition)throw Ut(Ot.NOT_AVAILABLE_IN_LEGACY_MODE);return tP(e,i,r,t)}if(i==="global")return RE(r,t,s),r;if(i==="parent"){let c=JS(n,e,t.__useComponent);return c==null&&(c=r),c}const o=n;let a=o.__getInstance(e);if(a==null){const c=Gt({},t);"__i18n"in s&&(c.__i18n=s.__i18n),r&&(c.__root=r),a=nf(c),o.__composerExtend&&(a[Fh]=o.__composerExtend(a)),eP(o,e,a),o.__setInstance(e,a)}return a}function KS(t,e,n){const r=Md();{const s=__VUE_I18N_LEGACY_API__&&e?r.run(()=>Uh(t)):r.run(()=>nf(t));if(s==null)throw Ut(Ot.UNEXPECTED_ERROR);return[r,s]}}function YS(t){{const e=un(t.isCE?GS:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Ut(t.isCE?Ot.NOT_INSTALLED_WITH_PROVIDE:Ot.UNEXPECTED_ERROR);return e}}function QS(t,e){return Bc(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function XS(t){return t.mode==="composition"?t.global:t.global.__composer}function JS(t,e,n=!1){let r=null;const s=e.root;let i=ZS(e,n);for(;i!=null;){const o=t;if(t.mode==="composition")r=o.__getInstance(i);else if(__VUE_I18N_LEGACY_API__){const a=o.__getInstance(i);a!=null&&(r=a.__composer,n&&r&&!r[AE]&&(r=null))}if(r!=null||s===i)break;i=i.parent}return r}function ZS(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function eP(t,e,n){Rv(()=>{},e),Gd(()=>{const r=n;t.__deleteInstance(e);const s=r[Fh];s&&(s(),delete r[Fh])},e)}function tP(t,e,n,r={}){const s=e==="local",i=Sc(null);if(s&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw Ut(Ot.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=Le(r.inheritLocale)?r.inheritLocale:!oe(r.locale),a=We(!s||o?n.locale.value:oe(r.locale)?r.locale:ki),c=We(!s||o?n.fallbackLocale.value:oe(r.fallbackLocale)||ut(r.fallbackLocale)||Re(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:a.value),u=We(Wc(a.value,r)),h=We(Re(r.datetimeFormats)?r.datetimeFormats:{[a.value]:{}}),f=We(Re(r.numberFormats)?r.numberFormats:{[a.value]:{}}),p=s?n.missingWarn:Le(r.missingWarn)||ts(r.missingWarn)?r.missingWarn:!0,y=s?n.fallbackWarn:Le(r.fallbackWarn)||ts(r.fallbackWarn)?r.fallbackWarn:!0,w=s?n.fallbackRoot:Le(r.fallbackRoot)?r.fallbackRoot:!0,P=!!r.fallbackFormat,R=st(r.missing)?r.missing:null,b=st(r.postTranslation)?r.postTranslation:null,k=s?n.warnHtmlMessage:Le(r.warnHtmlMessage)?r.warnHtmlMessage:!0,L=!!r.escapeParameter,N=s?n.modifiers:Re(r.modifiers)?r.modifiers:{},H=r.pluralRules||s&&n.pluralRules;function $(){return[a.value,c.value,u.value,h.value,f.value]}const A=be({get:()=>i.value?i.value.locale.value:a.value,set:m=>{i.value&&(i.value.locale.value=m),a.value=m}}),E=be({get:()=>i.value?i.value.fallbackLocale.value:c.value,set:m=>{i.value&&(i.value.fallbackLocale.value=m),c.value=m}}),T=be(()=>i.value?i.value.messages.value:u.value),S=be(()=>h.value),O=be(()=>f.value);function D(){return i.value?i.value.getPostTranslationHandler():b}function C(m){i.value&&i.value.setPostTranslationHandler(m)}function nt(){return i.value?i.value.getMissingHandler():R}function gt(m){i.value&&i.value.setMissingHandler(m)}function Ne(m){return $(),m()}function fe(...m){return i.value?Ne(()=>Reflect.apply(i.value.t,null,[...m])):Ne(()=>"")}function Se(...m){return i.value?Reflect.apply(i.value.rt,null,[...m]):""}function yt(...m){return i.value?Ne(()=>Reflect.apply(i.value.d,null,[...m])):Ne(()=>"")}function Ct(...m){return i.value?Ne(()=>Reflect.apply(i.value.n,null,[...m])):Ne(()=>"")}function rt(m){return i.value?i.value.tm(m):{}}function Oe(m,I){return i.value?i.value.te(m,I):!1}function Te(m){return i.value?i.value.getLocaleMessage(m):{}}function Je(m,I){i.value&&(i.value.setLocaleMessage(m,I),u.value[m]=I)}function Yt(m,I){i.value&&i.value.mergeLocaleMessage(m,I)}function ft(m){return i.value?i.value.getDateTimeFormat(m):{}}function z(m,I){i.value&&(i.value.setDateTimeFormat(m,I),h.value[m]=I)}function se(m,I){i.value&&i.value.mergeDateTimeFormat(m,I)}function te(m){return i.value?i.value.getNumberFormat(m):{}}function ae(m,I){i.value&&(i.value.setNumberFormat(m,I),f.value[m]=I)}function ke(m,I){i.value&&i.value.mergeNumberFormat(m,I)}const Fe={get id(){return i.value?i.value.id:-1},locale:A,fallbackLocale:E,messages:T,datetimeFormats:S,numberFormats:O,get inheritLocale(){return i.value?i.value.inheritLocale:o},set inheritLocale(m){i.value&&(i.value.inheritLocale=m)},get availableLocales(){return i.value?i.value.availableLocales:Object.keys(u.value)},get modifiers(){return i.value?i.value.modifiers:N},get pluralRules(){return i.value?i.value.pluralRules:H},get isGlobal(){return i.value?i.value.isGlobal:!1},get missingWarn(){return i.value?i.value.missingWarn:p},set missingWarn(m){i.value&&(i.value.missingWarn=m)},get fallbackWarn(){return i.value?i.value.fallbackWarn:y},set fallbackWarn(m){i.value&&(i.value.missingWarn=m)},get fallbackRoot(){return i.value?i.value.fallbackRoot:w},set fallbackRoot(m){i.value&&(i.value.fallbackRoot=m)},get fallbackFormat(){return i.value?i.value.fallbackFormat:P},set fallbackFormat(m){i.value&&(i.value.fallbackFormat=m)},get warnHtmlMessage(){return i.value?i.value.warnHtmlMessage:k},set warnHtmlMessage(m){i.value&&(i.value.warnHtmlMessage=m)},get escapeParameter(){return i.value?i.value.escapeParameter:L},set escapeParameter(m){i.value&&(i.value.escapeParameter=m)},t:fe,getPostTranslationHandler:D,setPostTranslationHandler:C,getMissingHandler:nt,setMissingHandler:gt,rt:Se,d:yt,n:Ct,tm:rt,te:Oe,getLocaleMessage:Te,setLocaleMessage:Je,mergeLocaleMessage:Yt,getDateTimeFormat:ft,setDateTimeFormat:z,mergeDateTimeFormat:se,getNumberFormat:te,setNumberFormat:ae,mergeNumberFormat:ke};function g(m){m.locale.value=a.value,m.fallbackLocale.value=c.value,Object.keys(u.value).forEach(I=>{m.mergeLocaleMessage(I,u.value[I])}),Object.keys(h.value).forEach(I=>{m.mergeDateTimeFormat(I,h.value[I])}),Object.keys(f.value).forEach(I=>{m.mergeNumberFormat(I,f.value[I])}),m.escapeParameter=L,m.fallbackFormat=P,m.fallbackRoot=w,m.fallbackWarn=y,m.missingWarn=p,m.warnHtmlMessage=k}return Cv(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw Ut(Ot.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const m=i.value=t.proxy.$i18n.__composer;e==="global"?(a.value=m.locale.value,c.value=m.fallbackLocale.value,u.value=m.messages.value,h.value=m.datetimeFormats.value,f.value=m.numberFormats.value):s&&g(m)}),Fe}const nP=["locale","fallbackLocale","availableLocales"],Um=["t","rt","d","n","tm","te"];function rP(t,e){const n=Object.create(null);return nP.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i)throw Ut(Ot.UNEXPECTED_ERROR);const o=It(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(n,s,o)}),t.config.globalProperties.$i18n=n,Um.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i||!i.value)throw Ut(Ot.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${s}`,i)}),()=>{delete t.config.globalProperties.$i18n,Um.forEach(s=>{delete t.config.globalProperties[`$${s}`]})}}LS();__INTLIFY_JIT_COMPILATION__?ym(RS):ym(CS);vS(eS);ES(uE);if(__INTLIFY_PROD_DEVTOOLS__){const t=fr();t.__INTLIFY__=!0,cS(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}function Sn(){const{t}=Ra();return t}function Cr(){const{locale:t}=Ra({useScope:"global"});return t}function Oi(t){const e=We();return t.then(n=>e.value=n.default),e}const sP="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M7.28451%2010.3333C7.10026%2010.8546%207%2011.4156%207%2012C7%2014.7614%209.23858%2017%2012%2017C14.7614%2017%2017%2014.7614%2017%2012C17%209.23858%2014.7614%207%2012%207C11.4156%207%2010.8546%207.10026%2010.3333%207.28451'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M12%202V4'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M12%2020V22'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M4%2012L2%2012'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M22%2012L20%2012'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M19.7778%204.22266L17.5558%206.25424'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M4.22217%204.22266L6.44418%206.25424'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M6.44434%2017.5557L4.22211%2019.7779'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M19.7778%2019.7773L17.5558%2017.5551'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3c/svg%3e",iP="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M12%202V3'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M12%2021V22'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M22%2012L21%2012'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M3%2012L2%2012'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M19.0708%204.92969L18.678%205.32252'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M5.32178%2018.6777L4.92894%2019.0706'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M19.0708%2019.0703L18.678%2018.6775'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M5.32178%205.32227L4.92894%204.92943'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3cpath%20d='M6.34141%2010C6.12031%2010.6256%206%2011.2987%206%2012C6%2015.3137%208.68629%2018%2012%2018C15.3137%2018%2018%2015.3137%2018%2012C18%208.68629%2015.3137%206%2012%206C11.2987%206%2010.6256%206.12031%2010%206.34141'%20stroke='%231C274C'%20stroke-width='1.5'%20stroke-linecap='round'/%3e%3c/svg%3e",oP="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M21.0672%2011.8568L20.4253%2011.469L21.0672%2011.8568ZM12.1432%202.93276L11.7553%202.29085V2.29085L12.1432%202.93276ZM7.37554%2020.013C7.017%2019.8056%206.5582%2019.9281%206.3508%2020.2866C6.14339%2020.6452%206.26591%2021.104%206.62446%2021.3114L7.37554%2020.013ZM2.68862%2017.3755C2.89602%2017.7341%203.35482%2017.8566%203.71337%2017.6492C4.07191%2017.4418%204.19443%2016.983%203.98703%2016.6245L2.68862%2017.3755ZM21.25%2012C21.25%2017.1086%2017.1086%2021.25%2012%2021.25V22.75C17.9371%2022.75%2022.75%2017.9371%2022.75%2012H21.25ZM2.75%2012C2.75%206.89137%206.89137%202.75%2012%202.75V1.25C6.06294%201.25%201.25%206.06294%201.25%2012H2.75ZM15.5%2014.25C12.3244%2014.25%209.75%2011.6756%209.75%208.5H8.25C8.25%2012.5041%2011.4959%2015.75%2015.5%2015.75V14.25ZM20.4253%2011.469C19.4172%2013.1373%2017.5882%2014.25%2015.5%2014.25V15.75C18.1349%2015.75%2020.4407%2014.3439%2021.7092%2012.2447L20.4253%2011.469ZM9.75%208.5C9.75%206.41182%2010.8627%204.5828%2012.531%203.57467L11.7553%202.29085C9.65609%203.5593%208.25%205.86509%208.25%208.5H9.75ZM12%202.75C11.9115%202.75%2011.8077%202.71008%2011.7324%202.63168C11.6686%202.56527%2011.6538%202.50244%2011.6503%202.47703C11.6461%202.44587%2011.6482%202.35557%2011.7553%202.29085L12.531%203.57467C13.0342%203.27065%2013.196%202.71398%2013.1368%202.27627C13.0754%201.82126%2012.7166%201.25%2012%201.25V2.75ZM21.7092%2012.2447C21.6444%2012.3518%2021.5541%2012.3539%2021.523%2012.3497C21.4976%2012.3462%2021.4347%2012.3314%2021.3683%2012.2676C21.2899%2012.1923%2021.25%2012.0885%2021.25%2012H22.75C22.75%2011.2834%2022.1787%2010.9246%2021.7237%2010.8632C21.286%2010.804%2020.7293%2010.9658%2020.4253%2011.469L21.7092%2012.2447ZM12%2021.25C10.3139%2021.25%208.73533%2020.7996%207.37554%2020.013L6.62446%2021.3114C8.2064%2022.2265%2010.0432%2022.75%2012%2022.75V21.25ZM3.98703%2016.6245C3.20043%2015.2647%202.75%2013.6861%202.75%2012H1.25C1.25%2013.9568%201.77351%2015.7936%202.68862%2017.3755L3.98703%2016.6245Z'%20fill='%231C274C'/%3e%3c/svg%3e",aP={__name:"ThemeButton",setup(t){const e=Mt(),n=be(()=>e.currentTheme);return(r,s)=>(de(),ge("div",{class:Y(["theme-button",M(e).secondaryBackgroundColor]),onClick:s[0]||(s[0]=(...i)=>M(e).toggle&&M(e).toggle(...i))},[W("div",{class:Y(["theme-button-icon-wrapper",{"theme-button-icon-wrapper-selected":n.value=="light"}])},[W("img",{class:Y(["theme-button-icon",{"theme-button-icon-selected":n.value=="light"}]),src:sP},null,2)],2),W("div",{class:Y(["theme-button-icon-wrapper",{"theme-button-icon-wrapper-selected":n.value=="sepia"}])},[W("img",{class:Y(["theme-button-icon",{"theme-button-icon-selected":n.value=="sepia"}]),src:iP},null,2)],2),W("div",{class:Y(["theme-button-icon-wrapper",{"theme-button-icon-wrapper-selected":n.value=="dark"}])},[W("img",{class:Y(["theme-button-icon",{"theme-button-icon-selected":n.value=="dark"}]),src:oP},null,2)],2)],2))}},Gu=dt(aP,[["__scopeId","data-v-c1c8d6a9"]]),lP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAUAAAADICAIAAAAWZq/8AAAACXBIWXMAAAsTAAALEwEAmpwYAAAFyGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0NDg4LCAyMDIwLzA3LzEwLTIyOjA2OjUzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDI0LTA0LTAyVDIzOjE1OjIwKzAyOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDI0LTA0LTAyVDIzOjE1OjIwKzAyOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyNC0wNC0wMlQyMzoxNToyMCswMjowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0ZDIzMDRhNi0wNjRjLTY5NGUtYjFiNy00ODZiZDUwZTIzYmMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1YmUxNjM4Ni00NTk1LWE4NDMtODA1ZS00ODQ5ZGIyNmY1MTAiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3OGUwNzg4ZS1lZjE2LWM2NDctODdiZi05YzM2OTIwNDk1NDgiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3OGUwNzg4ZS1lZjE2LWM2NDctODdiZi05YzM2OTIwNDk1NDgiIHN0RXZ0OndoZW49IjIwMjQtMDQtMDJUMjM6MTU6MjArMDI6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4wIChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NGQyMzA0YTYtMDY0Yy02OTRlLWIxYjctNDg2YmQ1MGUyM2JjIiBzdEV2dDp3aGVuPSIyMDI0LTA0LTAyVDIzOjE1OjIwKzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMCAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+CXb9HgAAAmlJREFUeJzt1UENgEAQBEEODcjBvwq8LB7uc+mkSsF8OrNm5gKa7tMDgH0ChjABQ5iAIUzAECZgCBMwhAkYwgQMYQKGMAFDmIAhTMAQJmAIEzCECRjCBAxhAoYwAUOYgCFMwBAmYAgTMIQJGMIEDGEChjABQ5iAIUzAECZgCBMwhAkYwgQMYQKGMAFDmIAhTMAQJmAIEzCECRjCBAxhAoYwAUOYgCFMwBAmYAgTMIQJGMIEDGEChjABQ5iAIUzAECZgCBMwhAkYwgQMYQKGMAFDmIAhTMAQJmAIEzCECRjCBAxhAoYwAUOYgCFMwBAmYAgTMIQJGMIEDGEChjABQ5iAIUzAECZgCBMwhAkYwgQMYQKGMAFDmIAhTMAQJmAIEzCECRjCBAxhAoYwAUOYgCFMwBAmYAgTMIQJGMIEDGEChjABQ9j6nvf0BmCTB4YwAUOYgCFMwBAmYAgTMIQJGMIEDGEChjABQ5iAIUzAECZgCBMwhAkYwgQMYQKGMAFDmIAhTMAQJmAIEzCECRjCBAxhAoYwAUOYgCFMwBAmYAgTMIQJGMIEDGEChjABQ5iAIUzAECZgCBMwhAkYwgQMYQKGMAFDmIAhTMAQJmAIEzCECRjCBAxhAoYwAUOYgCFMwBAmYAgTMIQJGMIEDGEChjABQ5iAIUzAECZgCBMwhAkYwgQMYQKGMAFDmIAhTMAQJmAIEzCECRjCBAxhAoYwAUOYgCFMwBAmYAgTMIQJGMIEDGEChjABQ5iAIUzAECZgCBMwhAkYwgQMYQKGMAFDmIAhTMAQJmAIEzCECRjCBAxhAoYwAUOYgCHsBzCCBbgGeXPEAAAAAElFTkSuQmCC",cP="/assets/ENG-mr07SDf8.png",uP={key:0,class:"language-button-flag",src:lP},hP={key:1,class:"language-button-flag",src:cP},dP={__name:"LanguageButton",setup(t){const e=Us(),n=Uc(),r=Cr(),s=Mt(),i=()=>{r.value==="pl"?r.value="en":r.value="pl",e.name!=="home"&&(e.query?n.push({name:e.name,params:{...e.params,lang:r.value},query:{...e.query}}):n.push({name:e.name,params:{...e.params,lang:r.value}}))};return(o,a)=>(de(),ge("a",{href:"#",class:Y(["language-button",M(s).primaryTextColor]),onClick:i},[M(r)==="en"?(de(),ge("img",uP)):St("",!0),M(r)==="pl"?(de(),ge("img",hP)):St("",!0),Ze(" "+he(M(r)==="pl"?"ENG":"PL"),1)],2))}},qu=dt(dP,[["__scopeId","data-v-91af9a62"]]),fP={class:"navbar-full"},pP={class:"navbar-section"},_P={class:"navbar-section"},mP={class:"navbar-medium"},gP={class:"navbar-section"},yP={class:"collapsed-link"},vP={class:"collapsed-link"},EP={class:"collapsed-link"},TP={class:"collapsed-link"},IP={class:"navbar-minimal"},wP={class:"navbar-section-minimal"},bP={class:"collapsed-link"},AP={class:"collapsed-link"},CP={class:"collapsed-link"},RP={class:"collapsed-link"},SP=30,PP={__name:"Navbar",setup(t){const e=Sn(),n=Cr(),r=Mt(),s=We(!1),i=c=>{s.value=window.scrollY>SP};window.addEventListener("scroll",i);const o=c=>be(()=>({name:"reader",params:{lang:n.value,title:c}})),a=c=>be(()=>({name:c,params:{lang:n.value}}));return(c,u)=>(de(),ge("nav",{class:Y(["navbar",[s.value?"navbar-solid":"",M(r).primaryBackgroundColor]])},[W("span",fP,[W("span",pP,[J(M(Et),{to:o("powstanie_na_brillar"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.powstanie_na_brillar")),1)]),_:1},8,["to","class"]),J(M(Et),{to:o("klatwa_imetheru"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.kltwa_imetheru")),1)]),_:1},8,["to","class"]),J(M(Et),{to:o("projekt_eclipse"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.projekt_eclipse")),1)]),_:1},8,["to","class"]),J(M(Et),{to:a("stories"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.stories")),1)]),_:1},8,["to","class"])]),J(M(Et),{to:"/",class:Y(["logo",M(r).primaryTextColor])},{default:pt(()=>[Ze("Alternata")]),_:1},8,["class"]),W("span",_P,[J(M(Et),{to:a("books"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.books")),1)]),_:1},8,["to","class"]),J(M(Et),{to:a("blog"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.blog")),1)]),_:1},8,["to","class"]),J(M(Et),{to:a("about"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.about")),1)]),_:1},8,["to","class"]),J(Gu,{class:"theme-toggle"}),J(qu)])]),W("span",mP,[J(M(Et),{to:"/",class:Y(["logo",M(r).primaryTextColor])},{default:pt(()=>[Ze("Alternata")]),_:1},8,["class"]),W("span",gP,[J(im,{label:M(e)("navbar.stories"),id:"menu-stories-medium"},{default:pt(()=>[W("li",yP,[J(M(Et),{to:o("powstanie_na_brillar"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.powstanie_na_brillar")),1)]),_:1},8,["to","class"])]),W("li",vP,[J(M(Et),{to:o("klatwa_imetheru"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.kltwa_imetheru")),1)]),_:1},8,["to","class"])]),W("li",EP,[J(M(Et),{to:o("projekt_eclipse"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.projekt_eclipse")),1)]),_:1},8,["to","class"])]),W("li",TP,[J(M(Et),{to:a("stories"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.stories")),1)]),_:1},8,["to","class"])])]),_:1},8,["label"]),J(M(Et),{to:a("books"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.books")),1)]),_:1},8,["to","class"]),J(M(Et),{to:a("blog"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.blog")),1)]),_:1},8,["to","class"]),J(M(Et),{to:a("about"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.about")),1)]),_:1},8,["to","class"]),J(Gu,{class:"theme-toggle"}),J(qu)])]),W("span",IP,[J(M(Et),{to:"/",class:Y(["logo",M(r).primaryTextColor])},{default:pt(()=>[Ze("Alternata")]),_:1},8,["class"]),W("span",wP,[J(im,{id:"menu-overflow-minimal"},{default:pt(()=>[W("li",bP,[J(M(Et),{to:a("stories"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.stories")),1)]),_:1},8,["to","class"])]),W("li",AP,[J(M(Et),{to:a("books"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.books")),1)]),_:1},8,["to","class"])]),W("li",CP,[J(M(Et),{to:a("blog"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.blog")),1)]),_:1},8,["to","class"])]),W("li",RP,[J(M(Et),{to:a("about"),class:Y(["navlink",M(r).primaryTextColor])},{default:pt(()=>[Ze(he(M(e)("navbar.about")),1)]),_:1},8,["to","class"])])]),_:1}),J(Gu,{class:"theme-toggle"}),J(qu)])])],2))}},kP=dt(PP,[["__scopeId","data-v-69a25b75"]]),NP={class:"copyrights font-segoe"},OP={class:"copyrights analytics font-segoe"},LP={__name:"Copyrights",setup(t){const e=Sn(),n=Mt();return(r,s)=>(de(),ge("div",{class:Y(["footer",[M(n).secondaryBackgroundColor,M(n).primaryTextColor]])},[W("div",NP," "+he(M(e)("copyrights.arr")),1),W("div",OP," "+he(M(e)("copyrights.cookies")),1)],2))}},DP=dt(LP,[["__scopeId","data-v-48590a66"]]),MP="/assets/wip-7OWwCTIk.png",xP=t=>(cs("data-v-1b0f88e4"),t=t(),us(),t),VP={class:"work-in-progress"},FP=xP(()=>W("img",{src:MP,class:"work-in-progress-roadblock"},null,-1)),UP={class:"work-in-progress-text font-segoe"},$P={__name:"WorkInProgress",setup(t){const e=Sn();return(n,r)=>(de(),ge("div",VP,[FP,W("div",UP,he(M(e)("work-in-progress")),1)]))}},sf=dt($P,[["__scopeId","data-v-1b0f88e4"]]),BP={__name:"App",setup(t){const e=Mt(),n=We(!0);return(r,s)=>(de(),ge(bt,null,[W("header",null,[J(kP)]),W("div",{class:Y(["content",M(e).primaryBackgroundColor])},[n.value?(de(),er(sf,{key:0})):(de(),er(M(eE),{key:r.$route.fullPath}))],2),W("footer",null,[J(DP)])],64))}},jP=dt(BP,[["__scopeId","data-v-05350130"]]),WP="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABl0lEQVQ4Ed1Sz0tVQRgdsqBCRIIXdu+ZxwONwIXonHu77/vGV3eTuBTktmhnL4MIAv8DdWU7wU3/QAv11ULatgtXtmoZiIQLSV1I5K+NMZen4ANp78CB+WbOd4bznTHmeqxKPtgNceNW+caKe3sOqJuu5fVa5XNzvG+l+Ti4rTZGBq26qcgnj0r3tTy/DeUilEdt/IUy4BDKg2hMXlZar9bur06/j7MhxMINKM8gySeI3DHI3FCs3IG6lvWuEdUTH1D1HMUos4Es64lWXld71mfuQZPJtvBvCDetst88qNNBuQfh3P8CiT3nS666FpS7VtPURE9SC+VPeH40xty4SiQi70L5tbQgnINyP/aubkjessJlKLcgbuAqgapPnkH5B8qFSFK13n0Ij5d8K5wIgwuHwXOnCLLhh9bzG5S/wszK+6LouuCVSYhbgvIEyi8QvgivQNKnsU9moPwREoFPmhdNnZtaPtwLTWah3IbytB1liPbYKr/H3j03eX6zs+9yXRRdYQ6xsIDyXfmxlGN9jZHKZeK1qv4Bxa5zHWV2BfgAAAAASUVORK5CYII=",HP="/assets/patronite-Cky-cGeM.png",kE=t=>(cs("data-v-b83c3c7e"),t=t(),us(),t),zP={class:"welcome-buycoffee font-madimi",target:"_blank",href:"https://buycoffee.to/"},GP=kE(()=>W("img",{src:WP},null,-1)),qP={class:"welcome-patronite font-segoe",target:"_blank",href:"https://patronite.pl/"},KP=kE(()=>W("img",{src:HP},null,-1)),YP={__name:"Welcome",setup(t){const e=Sn(),n=Mt();return(r,s)=>(de(),ge("div",{class:Y(["font-segoe welcome",M(n).primaryTextColor])},[Ze(he(M(e)("welcome.text"))+" ",1),W("a",zP,[GP,Ze(" "+he(M(e)("welcome.buycoffee")),1)]),Ze(" "+he(M(e)("welcome.text2"))+" ",1),W("a",qP,[KP,Ze(" "+he(M(e)("welcome.patronite")),1)]),Ze(" . ")],2))}},QP=dt(YP,[["__scopeId","data-v-b83c3c7e"]]),XP="/assets/alternata_mock-CNZPGMM2.png",JP=["href"],ZP={__name:"LinkButton",props:["text","url","action"],setup(t){const e=t,n=Mt();return(r,s)=>(de(),ge("a",{class:Y(["link-button font-segoe",M(n).primaryLinkColor]),href:e.url,target:"_blank"},he(e.text)+" ",11,JP))}},ca=dt(ZP,[["__scopeId","data-v-4bdce014"]]),e1={__name:"TextButton",props:["text","action"],setup(t){const e=t,n=Mt();return(r,s)=>(de(),ge("div",{class:Y(["text-button font-segoe",[M(n).buttonFillColor,M(n).buttonTextColor]]),onClick:s[0]||(s[0]=(...i)=>e.action&&e.action(...i))},he(e.text),3))}},of=dt(e1,[["__scopeId","data-v-2e05a4b2"]]),t1={__name:"H1",props:["text","colorful"],setup(t){const e=t,n=Mt();return(r,s)=>(de(),ge("h1",{class:Y(["h1",[e.colorful?M(n).primaryColor:M(n).primaryTextColor]])},he(e.text),3))}},Li=dt(t1,[["__scopeId","data-v-3fc770ea"]]),n1={__name:"H2",props:["text","colorful"],setup(t){const e=t,n=Mt();return(r,s)=>(de(),ge("h2",{class:Y(["h2",[e.colorful?M(n).secondaryColor:M(n).primaryTextColor]])},he(e.text),3))}},Gl=dt(n1,[["__scopeId","data-v-04eb7682"]]),r1={__name:"H3",props:["text","colorful"],setup(t){const e=t,n=Mt();return(r,s)=>(de(),ge("h3",{class:Y(["h3",[e.colorful?M(n).trinaryColor:M(n).primaryTextColor]])},he(e.text),3))}},Hc=dt(r1,[["__scopeId","data-v-68959448"]]),s1="modulepreload",i1=function(t){return"/"+t},$m={},me=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.all(n.map(c=>{if(c=i1(c),c in $m)return;$m[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(!!r)for(let y=i.length-1;y>=0;y--){const w=i[y];if(w.href===c&&(!u||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":s1,u||(p.as="script",p.crossOrigin=""),p.href=c,a&&p.setAttribute("nonce",a),document.head.appendChild(p),u)return new Promise((y,w)=>{p.addEventListener("load",y),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}return s.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Di=(t,e)=>{const n=t[e];return n?typeof n=="function"?n():Promise.resolve(n):new Promise((r,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+e)))})},ns={__name:"SecondaryText",props:["text"],setup(t){const e=Mt();return(n,r)=>(de(),ge("div",{class:Y(["font-segoe",M(e).secondaryTextColor])},he(t.text),3))}},o1=["src"],a1={class:"tile-texts"},l1={__name:"HomeTile",props:["title","subtitle","cover"],setup(t){const e=t,n=Oi(Di(Object.assign({"../assets/alternata_cover.jpg":()=>me(()=>import("./alternata_cover-QixxA9tv.js"),__vite__mapDeps([])),"../assets/bukowe_widziadlo.jpg":()=>me(()=>import("./bukowe_widziadlo-IlWmff8V.js"),__vite__mapDeps([])),"../assets/laniakea.jpg":()=>me(()=>import("./laniakea-CI405J2H.js"),__vite__mapDeps([])),"../assets/nowa_ba.jpg":()=>me(()=>import("./nowa_ba-zjR7_h-r.js"),__vite__mapDeps([])),"../assets/pismo.jpg":()=>me(()=>import("./pismo-DhUcvKRF.js"),__vite__mapDeps([])),"../assets/solstice.jpg":()=>me(()=>import("./solstice-DjPyoUfw.js"),__vite__mapDeps([]))}),`../assets/${e.cover}.jpg`)),r=Mt(),s=We(!1),i=()=>{s.value=!0},o=()=>{s.value=!1};return(a,c)=>(de(),ge("div",{class:Y(["tile",[s.value?M(r).onHoverBackgroundColor:""]]),onMouseenter:i,onMouseleave:o},[W("img",{src:M(n),class:"tile-cover"},null,8,o1),W("div",a1,[J(Hc,{text:e.title},null,8,["text"]),J(ns,{class:"tile-subtitle",text:e.subtitle},null,8,["text"])]),J(ca,{text:"Przeczytaj fragment"})],34))}},ei=dt(l1,[["__scopeId","data-v-57b3adcd"]]),c1=t=>(cs("data-v-22557c34"),t=t(),us(),t),u1={class:"ad"},h1=c1(()=>W("img",{src:XP,class:"ad-middle"},null,-1)),d1={class:"others"},f1={class:"cols-3"},p1={__name:"BookAd",setup(t){const e=Sn(),n=Mt(),r=We(!1),s=()=>{r.value=!0},i=()=>{r.value=!1},o=We(!1),a=()=>{o.value=!0},c=()=>{o.value=!1};return(u,h)=>(de(),ge("div",null,[W("div",u1,[W("div",{class:Y(["ad-left",[M(n).secondaryBackgroundColor,o.value?M(n).onHoverBackgroundColor:""]]),onMouseenter:a,onMouseleave:c},[J(Li,{text:"Antologia Alternata",colorful:"true"}),J(ns,{class:"ad-description",text:"Nostrud sunt adipisicing Lorem commodo ipsum. Ex magna adipisicing ullamco fugiat et sit minim eu Lorem ad irure et. adipisicing Lorem commodo ipsum. Ex magna adipisicing ullamco fugiat et sit minim eu Lorem ad irure et. Esse id ut reprehenderit in proident fugiat exercitation labore ullamco tempor. Aliquip culpa sunt ex ipsum sint do nisi ut commodo fugiat ad. Aute ad culpa consequat aliqua."}),J(of,{text:"Premiera marzec 2026"})],34),h1,W("div",{class:Y(["ad-right",[r.value?M(n).onHoverBackgroundColor:""]]),onMouseenter:s,onMouseleave:i},[J(Hc,{text:"Fragment W drodze do Walhalli"}),J(ns,{class:"ad-description",text:"Nostrud sunt adipisicing Lorem commodo ipsum. Ex magna adipisicing ullamco fugiat et sit minim eu Lorem ad irure et."}),J(ca,{text:"Przeczytaj fragment"})],34)]),W("div",d1,[J(Gl,{text:"Pozostae opowiadania antologii",colorful:"true"}),W("div",f1,[J(ei,{title:M(e)("alternata-ad.title_1"),subtitle:"Laboris dolore pariatur laborum duis occaecat eu reprehenderit excepteur aliquip non anim exercitation reprehenderit.",cover:"laniakea"},null,8,["title"]),J(ei,{title:M(e)("alternata-ad.title_2"),subtitle:"Culpa sint non dolor magna incididunt id dolor do pariatur sint do proident.",cover:"nowa_ba"},null,8,["title"]),J(ei,{title:M(e)("alternata-ad.title_3"),subtitle:"Fugiat elit aliqua officia proident aliquip do otinis est amarne equis.",cover:"pismo"},null,8,["title"]),J(ei,{title:M(e)("alternata-ad.title_4"),subtitle:"Do commodo duis magna incididunt nostrud officia aliquip officia proident aliquip.",cover:"solstice"},null,8,["title"]),J(ei,{title:M(e)("alternata-ad.title_5"),subtitle:"Enim velit aliqua reprehenderit ullamco eiusmod laborum ullamco occaecat amet ex enim deserunt commodo anim.",cover:"alternata_cover"},null,8,["title"]),J(ei,{title:M(e)("alternata-ad.title_6"),subtitle:"Enim ea adipisicing labore do occaecat laboris reprehenderit laborum ex officia sit adipisicing tempor laborum.",cover:"alternata_cover"},null,8,["title"])])])]))}},_1=dt(p1,[["__scopeId","data-v-22557c34"]]),m1=t=>(cs("data-v-0b28d7c8"),t=t(),us(),t),g1={class:"ad-flex ad-spacer"},y1={class:"ad-flex"},v1={class:"ad-flex"},E1=m1(()=>W("img",{src:"https://fantazmaty.pl/wp-content/uploads/2023/04/Fantazmaty-3-optimized.jpg",class:"ad-middle"},null,-1)),T1={__name:"FantazmatyAd",setup(t){Sn();const e=Mt(),n=be(()=>`ad-background-${e.currentTheme}`),r=be(()=>`ad-background-on-hover-${e.currentTheme}`),s=We(!1),i=()=>{s.value=!0},o=()=>{s.value=!1};return(a,c)=>(de(),ge("div",{class:Y(["ad-content",[n.value,s.value?r.value:""]]),onMouseenter:i,onMouseleave:o},[W("div",g1,[W("div",y1,[J(Li,{text:"Antologia Fantazmaty VI",colorful:"true"}),J(ca,{text:"Strona wydawcy",url:"https://fantazmaty.pl/czytaj/antologie/#fantazmaty-3"})]),W("div",v1,[J(Hc,{text:"Fragment Egzorcyzmy Emily OS",class:"gainsboro"}),J(ns,{class:"ad-description gainsboro",text:"Nostrud sunt adipisicing Lorem commodo ipsum. Ex magna adipisicing ullamco fugiat et sit minim eu Lorem ad irure et."}),J(ca,{text:"Przeczytaj fragment"})])]),E1],34))}},I1=dt(T1,[["__scopeId","data-v-0b28d7c8"]]),w1="/assets/youtube-SsrGC1K8.png",b1=t=>(cs("data-v-9c43dbca"),t=t(),us(),t),A1=b1(()=>W("span",{class:"yt-channel"},[W("img",{class:"yt-channel-icon",src:w1}),W("span",{class:"yt-channel-name font-segoe"},"Posuchaj audiobooka")],-1)),C1={__name:"OpowiesciSiakaAd",setup(t){const e=We(!1),n=()=>{e.value=!0},r=()=>{e.value=!1};return(s,i)=>(de(),ge("div",{class:Y(["ad",[e.value?"ad-on-hover":""]]),onMouseenter:n,onMouseleave:r},[J(Li,{text:"Bukowe Widziado",colorful:"true",class:"white"}),J(ns,{text:"Nostrud sunt adipisicing Lorem commodo ipsum. Ex magna adipisicing ullamco fugiat et sit minim eu Lorem ad irure et.",class:"gainsboro"}),J(ca,{text:"Przeczytaj fragment",class:"white white-link"}),W("div",null,[J(ns,{text:"Audiobook dostpny na kanale Opowieci Siaka.",class:"gainsboro"}),A1])],34))}},R1=dt(C1,[["__scopeId","data-v-9c43dbca"]]),S1={class:"welcome-container"},P1={class:"tempppp"},k1={__name:"HomeView",setup(t){return Sn(),(e,n)=>(de(),ge("main",S1,[J(QP),J(_1),W("div",P1,[J(I1),J(R1)])]))}},N1=dt(k1,[["__scopeId","data-v-cfce3961"]]);var wo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var NE={exports:{}};(function(t,e){(function(n,r){r()})(wo,function(){function n(u,h){return typeof h>"u"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,h,f){var p=new XMLHttpRequest;p.open("GET",u),p.responseType="blob",p.onload=function(){c(p.response,h,f)},p.onerror=function(){console.error("could not download file")},p.send()}function s(u){var h=new XMLHttpRequest;h.open("HEAD",u,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function i(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(h)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof wo=="object"&&wo.global===wo?wo:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(u,h,f){var p=o.URL||o.webkitURL,y=document.createElement("a");h=h||u.name||"download",y.download=h,y.rel="noopener",typeof u=="string"?(y.href=u,y.origin===location.origin?i(y):s(y.href)?r(u,h,f):i(y,y.target="_blank")):(y.href=p.createObjectURL(u),setTimeout(function(){p.revokeObjectURL(y.href)},4e4),setTimeout(function(){i(y)},0))}:"msSaveOrOpenBlob"in navigator?function(u,h,f){if(h=h||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,f),h);else if(s(u))r(u,h,f);else{var p=document.createElement("a");p.href=u,p.target="_blank",setTimeout(function(){i(p)})}}:function(u,h,f,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof u=="string")return r(u,h,f);var y=u.type==="application/octet-stream",w=/constructor/i.test(o.HTMLElement)||o.safari,P=/CriOS\/[\d]+/.test(navigator.userAgent);if((P||y&&w||a)&&typeof FileReader<"u"){var R=new FileReader;R.onloadend=function(){var L=R.result;L=P?L:L.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=L:location=L,p=null},R.readAsDataURL(u)}else{var b=o.URL||o.webkitURL,k=b.createObjectURL(u);p?p.location=k:location.href=k,p=null,setTimeout(function(){b.revokeObjectURL(k)},4e4)}});o.saveAs=c.saveAs=c,t.exports=c})})(NE);var L1=NE.exports;class D1{static saveAsEpub(e,n,r,s){const i=new jEpub;let o=1;i.init({i18n:"en",title:e,author:"Adam Kurzawa",publisher:"Adam Kurzawa",description:e,tags:["epub"]}),n.forEach(a=>{s?i.add(`${r} ${o} - ${s[o-1]}`,a):i.add(`${r} ${o}`,a),o+=1}),i.generate("blob").then(a=>{const c=new Blob([a],{type:a.type});L1.saveAs(c,`${e}.epub`)})}}function OE(t){return t.reduce((e,n)=>e+n.reduce((r,s)=>r+s.length,0),0)}var Bm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie=function(t,e){if(!t)throw Yi(e)},Yi=function(t){return new Error("Firebase Database ("+LE.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},M1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},zc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let p=(a&15)<<2|u>>6,y=u&63;c||(y=64,o||(p=64)),r.push(n[h],n[f],n[p],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(DE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):M1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new x1;const p=i<<2|a>>4;if(r.push(p),u!==64){const y=a<<4&240|u>>2;if(r.push(y),f!==64){const w=u<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class x1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ME=function(t){const e=DE(t);return zc.encodeByteArray(e,!0)},ql=function(t){return ME(t).replace(/\./g,"")},Kl=function(t){try{return zc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(t){return xE(void 0,t)}function xE(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!F1(n)||(t[n]=xE(t[n],e[n]));return t}function F1(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=()=>U1().__FIREBASE_DEFAULTS__,B1=()=>{if(typeof process>"u"||typeof Bm>"u")return;const t=Bm.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},j1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Kl(t[1]);return e&&JSON.parse(e)},Gc=()=>{try{return $1()||B1()||j1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},W1=t=>{var e,n;return(n=(e=Gc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},H1=t=>{const e=W1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},VE=()=>{var t;return(t=Gc())===null||t===void 0?void 0:t.config},z1=t=>{var e;return(e=Gc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ql(JSON.stringify(n)),ql(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function af(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Un())}function q1(){var t;const e=(t=Gc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function K1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Y1(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function FE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UE(){return LE.NODE_ADMIN===!0}function Q1(){return!q1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $E(){try{return typeof indexedDB=="object"}catch{return!1}}function X1(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="FirebaseError";class Rr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=J1,Object.setPrototypeOf(this,Rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qi.prototype.create)}}class Qi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Z1(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Rr(s,a,r)}}function Z1(t,e){return t.replace(ek,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const ek=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(t){return JSON.parse(t)}function Ht(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=ha(Kl(i[0])||""),n=ha(Kl(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},tk=function(t){const e=BE(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},nk=function(t){const e=BE(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Mi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function jm(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yl(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function $h(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Wm(i)&&Wm(o)){if(!$h(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Wm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)r[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)r[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){const p=r[f-3]^r[f-8]^r[f-14]^r[f-16];r[f]=(p<<1|p>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,h;for(let f=0;f<80;f++){f<40?f<20?(u=a^i&(o^a),h=1518500249):(u=i^o^a,h=1859775393):f<60?(u=i&o|a&(i|o),h=2400959708):(u=i^o^a,h=3395469782);const p=(s<<5|s>>>27)+u+c+h+r[f]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=p}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function sk(t,e){const n=new ik(t,e);return n.subscribe.bind(n)}class ik{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ok(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ku),s.error===void 0&&(s.error=Ku),s.complete===void 0&&(s.complete=Ku);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ok(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ku(){}function ak(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,ie(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},qc=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t){return t&&t._delegate?t._delegate:t}class Bn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ua;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hk(e))try{this.getOrInitializeService({instanceIdentifier:Es})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Es){return this.instances.has(e)}getOptions(e=Es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Es){return this.component?this.component.multipleInstances?e:Es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uk(t){return t===Es?void 0:t}function hk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ck(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const fk={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},pk=De.INFO,_k={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},mk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=_k[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sa{constructor(e){this.name=e,this._logLevel=pk,this._logHandler=mk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const gk=(t,e)=>e.some(n=>t instanceof n);let Hm,zm;function yk(){return Hm||(Hm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vk(){return zm||(zm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jE=new WeakMap,Bh=new WeakMap,WE=new WeakMap,Yu=new WeakMap,cf=new WeakMap;function Ek(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(qr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jE.set(n,t)}).catch(()=>{}),cf.set(e,t),e}function Tk(t){if(Bh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Bh.set(t,e)}let jh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||WE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Ik(t){jh=t(jh)}function wk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Qu(this),e,...n);return WE.set(r,e.sort?e.sort():[e]),qr(r)}:vk().includes(t)?function(...e){return t.apply(Qu(this),e),qr(jE.get(this))}:function(...e){return qr(t.apply(Qu(this),e))}}function bk(t){return typeof t=="function"?wk(t):(t instanceof IDBTransaction&&Tk(t),gk(t,yk())?new Proxy(t,jh):t)}function qr(t){if(t instanceof IDBRequest)return Ek(t);if(Yu.has(t))return Yu.get(t);const e=bk(t);return e!==t&&(Yu.set(t,e),cf.set(e,t)),e}const Qu=t=>cf.get(t);function Ak(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=qr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(qr(o.result),c.oldVersion,c.newVersion,qr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Ck=["get","getKey","getAll","getAllKeys","count"],Rk=["put","add","delete","clear"],Xu=new Map;function Gm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xu.get(e))return Xu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Rk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Ck.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return Xu.set(e,i),i}Ik(t=>({...t,get:(e,n,r)=>Gm(e,n)||t.get(e,n,r),has:(e,n)=>!!Gm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Pk(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Pk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wh="@firebase/app",qm="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new Sa("@firebase/app"),kk="@firebase/app-compat",Nk="@firebase/analytics-compat",Ok="@firebase/analytics",Lk="@firebase/app-check-compat",Dk="@firebase/app-check",Mk="@firebase/auth",xk="@firebase/auth-compat",Vk="@firebase/database",Fk="@firebase/data-connect",Uk="@firebase/database-compat",$k="@firebase/functions",Bk="@firebase/functions-compat",jk="@firebase/installations",Wk="@firebase/installations-compat",Hk="@firebase/messaging",zk="@firebase/messaging-compat",Gk="@firebase/performance",qk="@firebase/performance-compat",Kk="@firebase/remote-config",Yk="@firebase/remote-config-compat",Qk="@firebase/storage",Xk="@firebase/storage-compat",Jk="@firebase/firestore",Zk="@firebase/vertexai",eN="@firebase/firestore-compat",tN="firebase",nN="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="[DEFAULT]",rN={[Wh]:"fire-core",[kk]:"fire-core-compat",[Ok]:"fire-analytics",[Nk]:"fire-analytics-compat",[Dk]:"fire-app-check",[Lk]:"fire-app-check-compat",[Mk]:"fire-auth",[xk]:"fire-auth-compat",[Vk]:"fire-rtdb",[Fk]:"fire-data-connect",[Uk]:"fire-rtdb-compat",[$k]:"fire-fn",[Bk]:"fire-fn-compat",[jk]:"fire-iid",[Wk]:"fire-iid-compat",[Hk]:"fire-fcm",[zk]:"fire-fcm-compat",[Gk]:"fire-perf",[qk]:"fire-perf-compat",[Kk]:"fire-rc",[Yk]:"fire-rc-compat",[Qk]:"fire-gcs",[Xk]:"fire-gcs-compat",[Jk]:"fire-fst",[eN]:"fire-fst-compat",[Zk]:"fire-vertex","fire-js":"fire-js",[tN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=new Map,sN=new Map,zh=new Map;function Km(t,e){try{t.container.addComponent(e)}catch(n){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function tr(t){const e=t.name;if(zh.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;zh.set(e,t);for(const n of Ql.values())Km(n,t);for(const n of sN.values())Km(n,t);return!0}function iN(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Po(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kr=new Qi("app","Firebase",oN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=nN;function HE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Kr.create("bad-app-name",{appName:String(s)});if(n||(n=VE()),!n)throw Kr.create("no-options");const i=Ql.get(s);if(i){if($h(n,i.options)&&$h(r,i.config))return i;throw Kr.create("duplicate-app",{appName:s})}const o=new dk(s);for(const c of zh.values())o.addComponent(c);const a=new aN(n,r,o);return Ql.set(s,a),a}function zE(t=Hh){const e=Ql.get(t);if(!e&&t===Hh&&VE())return HE();if(!e)throw Kr.create("no-app",{appName:t});return e}function yn(t,e,n){var r;let s=(r=rN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(a.join(" "));return}tr(new Bn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="firebase-heartbeat-database",cN=1,da="firebase-heartbeat-store";let Ju=null;function GE(){return Ju||(Ju=Ak(lN,cN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(da)}catch(n){console.warn(n)}}}}).catch(t=>{throw Kr.create("idb-open",{originalErrorMessage:t.message})})),Ju}async function uN(t){try{const n=(await GE()).transaction(da),r=await n.objectStore(da).get(qE(t));return await n.done,r}catch(e){if(e instanceof Rr)Ir.warn(e.message);else{const n=Kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ir.warn(n.message)}}}async function Ym(t,e){try{const r=(await GE()).transaction(da,"readwrite");await r.objectStore(da).put(e,qE(t)),await r.done}catch(n){if(n instanceof Rr)Ir.warn(n.message);else{const r=Kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ir.warn(r.message)}}}function qE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=1024,dN=30*24*60*60*1e3;class fN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _N(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Qm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=dN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ir.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qm(),{heartbeatsToSend:r,unsentEntries:s}=pN(this._heartbeatsCache.heartbeats),i=ql(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ir.warn(n),""}}}function Qm(){return new Date().toISOString().substring(0,10)}function pN(t,e=hN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Xm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Xm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _N{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $E()?X1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await uN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ym(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ym(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Xm(t){return ql(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mN(t){tr(new Bn("platform-logger",e=>new Sk(e),"PRIVATE")),tr(new Bn("heartbeat",e=>new fN(e),"PRIVATE")),yn(Wh,qm,t),yn(Wh,qm,"esm2017"),yn("fire-js","")}mN("");function KE(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function YE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gN=YE,QE=new Qi("auth","Firebase",YE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=new Sa("@firebase/auth");function yN(t,...e){Xl.logLevel<=De.WARN&&Xl.warn(`Auth (${Xi}): ${t}`,...e)}function Sl(t,...e){Xl.logLevel<=De.ERROR&&Xl.error(`Auth (${Xi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t,...e){throw uf(t,...e)}function XE(t,...e){return uf(t,...e)}function JE(t,e,n){const r=Object.assign(Object.assign({},gN()),{[e]:n});return new Qi("auth","Firebase",r).create(e,{appName:t.name})}function Pl(t){return JE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return QE.create(t,...e)}function Ge(t,e,...n){if(!t)throw uf(e,...n)}function Ho(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Sl(e),new Error(e)}function Jl(t,e){t||Ho(e)}function vN(){return Zm()==="http:"||Zm()==="https:"}function Zm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vN()||Y1()||"connection"in navigator)?navigator.onLine:!0}function TN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jl(n>e,"Short delay should be less than long delay!"),this.isMobile=af()||FE()}get(){return EN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(t,e){Jl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ho("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ho("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ho("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=new Pa(3e4,6e4);function eT(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Kc(t,e,n,r,s={}){return tT(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=lf(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},i);return K1()||(u.referrerPolicy="no-referrer"),ZE.fetch()(nT(t,t.config.apiHost,n,a),u)})}async function tT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},wN),e);try{const s=new AN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ul(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ul(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ul(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ul(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw JE(t,h,u);Jm(t,h)}}catch(s){if(s instanceof Rr)throw s;Jm(t,"network-request-failed",{message:String(s)})}}function nT(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?IN(t.config,s):`${t.config.apiScheme}://${s}`}class AN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(XE(this.auth,"network-request-failed")),bN.get())})}}function ul(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=XE(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(t,e){return Kc(t,"POST","/v1/accounts:delete",e)}async function rT(t,e){return Kc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function RN(t,e=!1){const n=$n(t),r=await n.getIdToken(e),s=sT(r);Ge(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:zo(Zu(s.auth_time)),issuedAtTime:zo(Zu(s.iat)),expirationTime:zo(Zu(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Zu(t){return Number(t)*1e3}function sT(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Sl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Kl(n);return s?JSON.parse(s):(Sl("Failed to decode base64 JWT payload"),null)}catch(s){return Sl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function eg(t){const e=sT(t);return Ge(e,"internal-error"),Ge(typeof e.exp<"u","internal-error"),Ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Rr&&SN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function SN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zo(this.lastLoginAt),this.creationTime=zo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Gh(t,rT(n,{idToken:r}));Ge(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?iT(i.providerUserInfo):[],a=NN(t.providerData,o),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new qh(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function kN(t){const e=$n(t);await Zl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function iT(t){return t.map(e=>{var{providerId:n}=e,r=KE(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e){const n=await tT(t,{},async()=>{const r=lf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=nT(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ZE.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function LN(t,e){return Kc(t,"POST","/v2/accounts:revokeToken",eT(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ge(e.idToken,"internal-error"),Ge(typeof e.idToken<"u","internal-error"),Ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ge(e.length!==0,"internal-error");const n=eg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await ON(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new mi;return r&&(Ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ge(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Ge(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mi,this.toJSON())}_performRefresh(){return Ho("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t,e){Ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=KE(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new qh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Gh(this,this.stsTokenManager.getToken(this.auth,e));return Ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return RN(this,e)}reload(){return kN(this)}_assign(e){this!==e&&(Ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Zl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Po(this.auth.app))return Promise.reject(Pl(this.auth));const e=await this.getIdToken();return await Gh(this,CN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,c,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,P=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,b=(u=n.createdAt)!==null&&u!==void 0?u:void 0,k=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:L,emailVerified:N,isAnonymous:H,providerData:$,stsTokenManager:A}=n;Ge(L&&A,e,"internal-error");const E=mi.fromJSON(this.name,A);Ge(typeof L=="string",e,"internal-error"),Mr(f,e.name),Mr(p,e.name),Ge(typeof N=="boolean",e,"internal-error"),Ge(typeof H=="boolean",e,"internal-error"),Mr(y,e.name),Mr(w,e.name),Mr(P,e.name),Mr(R,e.name),Mr(b,e.name),Mr(k,e.name);const T=new jr({uid:L,auth:e,email:p,emailVerified:N,displayName:f,isAnonymous:H,photoURL:w,phoneNumber:y,tenantId:P,stsTokenManager:E,createdAt:b,lastLoginAt:k});return $&&Array.isArray($)&&(T.providerData=$.map(S=>Object.assign({},S))),R&&(T._redirectEventId=R),T}static async _fromIdTokenResponse(e,n,r=!1){const s=new mi;s.updateFromServerResponse(n);const i=new jr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Zl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ge(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?iT(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new mi;a.updateFromIdToken(r);const c=new jr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new qh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg=new Map;function bs(t){Jl(t instanceof Function,"Expected a class definition");let e=tg.get(t);return e?(Jl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oT.type="NONE";const ng=oT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(t,e,n){return`firebase:${t}:${e}:${n}`}class gi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=eh(this.userKey,s.apiKey,i),this.fullPersistenceKey=eh("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?jr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new gi(bs(ng),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||bs(ng);const o=eh(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const f=jr._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new gi(i,e,r):(i=c[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new gi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UN(e))return"Blackberry";if($N(e))return"Webos";if(MN(e))return"Safari";if((e.includes("chrome/")||xN(e))&&!e.includes("edge/"))return"Chrome";if(FN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function DN(t=Un()){return/firefox\//i.test(t)}function MN(t=Un()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xN(t=Un()){return/crios\//i.test(t)}function VN(t=Un()){return/iemobile/i.test(t)}function FN(t=Un()){return/android/i.test(t)}function UN(t=Un()){return/blackberry/i.test(t)}function $N(t=Un()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t,e=[]){let n;switch(t){case"Browser":n=rg(Un());break;case"Worker":n=`${rg(Un())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const c=e(i);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(t,e={}){return Kc(t,"GET","/v2/passwordPolicy",eT(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=6;class HN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:WN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sg(this),this.idTokenSubscription=new sg(this),this.beforeStateQueue=new BN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=bs(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await gi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rT(this,{idToken:e}),r=await jr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Po(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Po(this.app))return Promise.reject(Pl(this));const n=e?$n(e):null;return n&&Ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Po(this.app)?Promise.reject(Pl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Po(this.app)?Promise.reject(Pl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jN(this),n=new HN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await LN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&bs(e)||this._popupRedirectResolver;Ge(n,this,"argument-error"),this.redirectPersistenceManager=await gi.create(this,[bs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ge(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&yN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function GN(t){return $n(t)}class sg{constructor(e){this.auth=e,this.observer=null,this.addObserver=sk(n=>this.observer=n)}get next(){return Ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function qN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(bs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}new Pa(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Pa(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Pa(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Pa(5e3,15e3);var ig="@firebase/auth",og="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QN(t){tr(new Bn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aT(t)},u=new zN(r,s,i,c);return qN(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),tr(new Bn("auth-internal",e=>{const n=GN(e.getProvider("auth").getImmediate());return(r=>new KN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yn(ig,og,YN(t)),yn(ig,og,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=5*60;z1("authIdTokenMaxAge");QN("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=new Map,ZN={activated:!1,tokenObservers:[]};function jn(t){return JN.get(t)||Object.assign({},ZN)}const ag={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,n,r,s,i){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=s,s>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new ua,this.pending.promise.catch(n=>{}),await tO(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new ua,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function tO(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ec=new Qi("appCheck","AppCheck",nO);function lT(t){if(!jn(t).activated)throw ec.create("use-before-activation",{appName:t.name})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO="firebase-app-check-database",sO=1,Kh="firebase-app-check-store";let hl=null;function iO(){return hl||(hl=new Promise((t,e)=>{try{const n=indexedDB.open(rO,sO);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var s;e(ec.create("storage-open",{originalErrorMessage:(s=r.target.error)===null||s===void 0?void 0:s.message}))},n.onupgradeneeded=r=>{const s=r.target.result;switch(r.oldVersion){case 0:s.createObjectStore(Kh,{keyPath:"compositeKey"})}}}catch(n){e(ec.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),hl)}function oO(t,e){return aO(lO(t),e)}async function aO(t,e){const r=(await iO()).transaction(Kh,"readwrite"),i=r.objectStore(Kh).put({compositeKey:t,value:e});return new Promise((o,a)=>{i.onsuccess=c=>{o()},r.onerror=c=>{var u;a(ec.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})}function lO(t){return`${t.options.appId}-${t.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=new Sa("@firebase/app-check");function lg(t,e){return $E()?oO(t,e).catch(n=>{Yh.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO={error:"UNKNOWN_ERROR"};function uO(t){return zc.encodeString(JSON.stringify(t),!1)}async function Qh(t,e=!1){const n=t.app;lT(n);const r=jn(n);let s=r.token,i;if(s&&!ko(s)&&(r.token=void 0,s=void 0),!s){const c=await r.cachedTokenPromise;c&&(ko(c)?s=c:await lg(n,void 0))}if(!e&&s&&ko(s))return{token:s.token};let o=!1;try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),s=await jn(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Yh.warn(c.message):Yh.error(c),i=c}let a;return s?i?ko(s)?a={token:s.token,internalError:i}:a=ug(i):(a={token:s.token},r.token=s,await lg(n,s)):a=ug(i),o&&pO(n,a),a}async function hO(t){const e=t.app;lT(e);const{provider:n}=jn(e);{const{token:r}=await n.getToken();return{token:r}}}function dO(t,e,n,r){const{app:s}=t,i=jn(s),o={next:n,error:r,type:e};if(i.tokenObservers=[...i.tokenObservers,o],i.token&&ko(i.token)){const a=i.token;Promise.resolve().then(()=>{n({token:a.token}),cg(t)}).catch(()=>{})}i.cachedTokenPromise.then(()=>cg(t))}function cT(t,e){const n=jn(t),r=n.tokenObservers.filter(s=>s.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function cg(t){const{app:e}=t,n=jn(e);let r=n.tokenRefresher;r||(r=fO(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function fO(t){const{app:e}=t;return new eO(async()=>{const n=jn(e);let r;if(n.token?r=await Qh(t,!0):r=await Qh(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=jn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const s=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,s),Math.max(0,r-Date.now())}else return 0},ag.RETRIAL_MIN_WAIT,ag.RETRIAL_MAX_WAIT)}function pO(t,e){const n=jn(t).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ko(t){return t.expireTimeMillis-Date.now()>0}function ug(t){return{token:uO(cO),error:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=jn(this.app);for(const n of e)cT(this.app,n.next);return Promise.resolve()}}function mO(t,e){return new _O(t,e)}function gO(t){return{getToken:e=>Qh(t,e),getLimitedUseToken:()=>hO(t),addTokenListener:e=>dO(t,"INTERNAL",e),removeTokenListener:e=>cT(t.app,e)}}const yO="@firebase/app-check",vO="0.8.10",EO="app-check",hg="app-check-internal";function TO(){tr(new Bn(EO,t=>{const e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return mO(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(hg).initialize()})),tr(new Bn(hg,t=>{const e=t.getProvider("app-check").getImmediate();return gO(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),yn(yO,vO)}TO();var IO="firebase",wO="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn(IO,wO,"app");const uT=Symbol("firebaseApp");function hf(t){return es()&&un(uT,null)||zE(t)}const Yn=()=>{};function df(t,e){return e.split(".").reduce((n,r)=>n&&n[r],t)}function bO(t,e,n){const r=(""+e).split("."),s=r.pop(),i=r.reduce((o,a)=>o&&o[a],t);if(i!=null)return Array.isArray(i)?i.splice(Number(s),1,n):i[s]=n}function $s(t){return!!t&&typeof t=="object"}const AO=Object.prototype;function CO(t){return $s(t)&&Object.getPrototypeOf(t)===AO}function ff(t){return $s(t)&&t.type==="document"}function RO(t){return $s(t)&&t.type==="collection"}function SO(t){return ff(t)||RO(t)}function PO(t){return $s(t)&&t.type==="query"}function kO(t){return $s(t)&&"ref"in t}function NO(t){return $s(t)&&typeof t.bucket=="string"}function OO(t,e){let n;return()=>{if(!n)return n=!0,t(e())}}const LO=Symbol.for("v-scx");function DO(){return es(),!!un(LO,0)}var dg={};const fg="@firebase/database",pg="1.0.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hT="";function MO(t){hT=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ht(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ha(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Sr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new xO(e)}}catch{}return new VO},As=dT("localStorage"),Xh=dT("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=new Sa("@firebase/database"),FO=function(){let t=1;return function(){return t++}}(),fT=function(t){const e=lk(t),n=new rk;n.update(e);const r=n.digest();return zc.encodeByteArray(r)},ka=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ka.apply(null,r):typeof r=="object"?e+=Ht(r):e+=r,e+=" "}return e};let Ps=null,_g=!0;const UO=function(t,e){ie(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(yi.logLevel=De.VERBOSE,Ps=yi.log.bind(yi),e&&Xh.set("logging_enabled",!0)):typeof t=="function"?Ps=t:(Ps=null,Xh.remove("logging_enabled"))},en=function(...t){if(_g===!0&&(_g=!1,Ps===null&&Xh.get("logging_enabled")===!0&&UO(!0)),Ps){const e=ka.apply(null,t);Ps(e)}},Na=function(t){return function(...e){en(t,...e)}},Jh=function(...t){const e="FIREBASE INTERNAL ERROR: "+ka(...t);yi.error(e)},Ns=function(...t){const e=`FIREBASE FATAL ERROR: ${ka(...t)}`;throw yi.error(e),new Error(e)},vn=function(...t){const e="FIREBASE WARNING: "+ka(...t);yi.warn(e)},$O=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&vn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},pT=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},BO=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},xi="[MIN_NAME]",Os="[MAX_NAME]",Ji=function(t,e){if(t===e)return 0;if(t===xi||e===Os)return-1;if(e===xi||t===Os)return 1;{const n=mg(t),r=mg(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},jO=function(t,e){return t===e?0:t<e?-1:1},bo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ht(e))},pf=function(t){if(typeof t!="object"||t===null)return Ht(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Ht(e[r]),n+=":",n+=pf(t[e[r]]);return n+="}",n},_T=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Rn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const mT=function(t){ie(!pT(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const h=u.join("");let f="";for(c=0;c<64;c+=8){let p=parseInt(h.substr(c,8),2).toString(16);p.length===1&&(p="0"+p),f=f+p}return f.toLowerCase()},WO=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},HO=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},zO=new RegExp("^-?(0*)\\d{1,10}$"),GO=-2147483648,qO=2147483647,mg=function(t){if(zO.test(t)){const e=Number(t);if(e>=GO&&e<=qO)return e}return null},Oa=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw vn("Exception was thrown by user callback.",n),e},Math.floor(0))}},KO=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Go=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){vn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(en("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vn(e)}}class Zh{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Zh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="5",gT="v",yT="s",vT="r",ET="f",TT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,IT="ls",wT="p",ed="ac",bT="websocket",AT="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=As.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&As.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function JO(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function CT(t,e,n){ie(typeof e=="string","typeof type must == string"),ie(typeof n=="object","typeof params must == object");let r;if(e===bT)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===AT)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);JO(t)&&(n.ns=t.namespace);const s=[];return Rn(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(){this.counters_={}}incrementCounter(e,n=1){Sr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return V1(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th={},nh={};function mf(t){const e=t.toString();return th[e]||(th[e]=new ZO),th[e]}function eL(t,e){const n=t.toString();return nh[n]||(nh[n]=e()),nh[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Oa(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg="start",nL="close",rL="pLPCommand",sL="pRTLPCB",RT="id",ST="pw",PT="ser",iL="cb",oL="seg",aL="ts",lL="d",cL="dframe",kT=1870,NT=30,uL=kT-NT,hL=25e3,dL=3e4;class ui{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Na(e),this.stats_=mf(n),this.urlFn=c=>(this.appCheckToken&&(c[ed]=this.appCheckToken),CT(n,AT,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new tL(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(dL)),BO(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gf((...i)=>{const[o,a,c,u,h]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===gg)this.id=a,this.password=c;else if(o===nL)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[gg]="t",r[PT]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[iL]=this.scriptTagHolder.uniqueCallbackIdentifier),r[gT]=_f,this.transportSessionId&&(r[yT]=this.transportSessionId),this.lastSessionId&&(r[IT]=this.lastSessionId),this.applicationId&&(r[wT]=this.applicationId),this.appCheckToken&&(r[ed]=this.appCheckToken),typeof location<"u"&&location.hostname&&TT.test(location.hostname)&&(r[vT]=ET);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ui.forceAllow_=!0}static forceDisallow(){ui.forceDisallow_=!0}static isAvailable(){return ui.forceAllow_?!0:!ui.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!WO()&&!HO()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ht(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=ME(n),s=_T(r,uL);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[cL]="t",r[RT]=e,r[ST]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ht(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class gf{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=FO(),window[rL+this.uniqueCallbackIdentifier]=e,window[sL+this.uniqueCallbackIdentifier]=n,this.myIFrame=gf.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){en("frame writing exception"),a.stack&&en(a.stack),en(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||en("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[RT]=this.myID,e[ST]=this.myPW,e[PT]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+NT+r.length<=kT;){const o=this.pendingSegs.shift();r=r+"&"+oL+s+"="+o.seg+"&"+aL+s+"="+o.ts+"&"+lL+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(hL)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{en("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=16384,pL=45e3;let tc=null;typeof MozWebSocket<"u"?tc=MozWebSocket:typeof WebSocket<"u"&&(tc=WebSocket);class kn{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Na(this.connId),this.stats_=mf(n),this.connURL=kn.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[gT]=_f,typeof location<"u"&&location.hostname&&TT.test(location.hostname)&&(o[vT]=ET),n&&(o[yT]=n),r&&(o[IT]=r),s&&(o[ed]=s),i&&(o[wT]=i),CT(e,bT,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,As.set("previous_websocket_failure",!0);try{let r;UE(),this.mySock=new tc(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){kn.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&tc!==null&&!kn.forceDisallow_}static previouslyFailed(){return As.isInMemoryStorage||As.get("previous_websocket_failure")===!0}markConnectionHealthy(){As.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=ha(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ie(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Ht(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=_T(n,fL);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(pL))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}kn.responsesRequiredToBeHealthy=2;kn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{static get ALL_TRANSPORTS(){return[ui,kn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=kn&&kn.isAvailable();let r=n&&!kn.previouslyFailed();if(e.webSocketOnly&&(n||vn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[kn];else{const s=this.transports_=[];for(const i of fa.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);fa.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}fa.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=6e4,mL=5e3,gL=10*1024,yL=100*1024,rh="t",yg="d",vL="s",vg="r",EL="e",Eg="o",Tg="a",Ig="n",wg="p",TL="h";class IL{constructor(e,n,r,s,i,o,a,c,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Na("c:"+this.id+":"),this.transportManager_=new fa(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Go(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>yL?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>gL?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(rh in e){const n=e[rh];n===Tg?this.upgradeIfSecondaryHealthy_():n===vg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Eg&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=bo("t",e),r=bo("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:wg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Tg,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Ig,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=bo("t",e),r=bo("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=bo(rh,e);if(yg in e){const r=e[yg];if(n===TL){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Ig){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===vL?this.onConnectionShutdown_(r):n===vg?this.onReset_(r):n===EL?Jh("Server Error: "+r):n===Eg?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Jh("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),_f!==r&&vn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Go(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(_L))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Go(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(mL))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:wg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(As.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e){this.allowedEvents_=e,this.listeners_={},ie(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){ie(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends LT{static getInstance(){return new nc}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!af()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ie(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg=32,Ag=768;class ht{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function et(){return new ht("")}function $e(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function rs(t){return t.pieces_.length-t.pieceNum_}function ct(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ht(t.pieces_,e)}function DT(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function wL(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function MT(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function xT(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ht(e,0)}function Ft(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ht)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new ht(n,0)}function Ve(t){return t.pieceNum_>=t.pieces_.length}function Cn(t,e){const n=$e(t),r=$e(e);if(n===null)return e;if(n===r)return Cn(ct(t),ct(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function VT(t,e){if(rs(t)!==rs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ln(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(rs(t)>rs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class bL{constructor(e,n){this.errorPrefix_=n,this.parts_=MT(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=qc(this.parts_[r]);FT(this)}}function AL(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=qc(e),FT(t)}function CL(t){const e=t.parts_.pop();t.byteLength_-=qc(e),t.parts_.length>0&&(t.byteLength_-=1)}function FT(t){if(t.byteLength_>Ag)throw new Error(t.errorPrefix_+"has a key path longer than "+Ag+" bytes ("+t.byteLength_+").");if(t.parts_.length>bg)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+bg+") or object contains a cycle "+Ts(t))}function Ts(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends LT{static getInstance(){return new yf}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return ie(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=1e3,RL=60*5*1e3,Cg=30*1e3,SL=1.3,PL=3e4,kL="server_kill",Rg=3;class yr extends OT{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=yr.nextPersistentConnectionId_++,this.log_=Na("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ao,this.maxReconnectDelay_=RL,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!UE())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&nc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Ht(i)),ie(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new ua,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ie(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ie(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,u=a.s;yr.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),u!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(u,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Sr(e,"w")){const r=Mi(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();vn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||nk(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Cg)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=tk(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),ie(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ht(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Jh("Unrecognized action received from server: "+Ht(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ie(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ao,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ao,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>PL&&(this.reconnectDelay_=Ao),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*SL)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+yr.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},u=function(f){ie(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(f)};this.realtime_={close:c,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,p]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?en("getToken() completed but was canceled"):(en("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,a=new IL(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{vn(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(kL)},i))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&vn(f),c())}}}interrupt(e){en("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){en("Resuming connection for reason: "+e),delete this.interruptReasons_[e],jm(this.interruptReasons_)&&(this.reconnectDelay_=Ao,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>pf(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new ht(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){en("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Rg&&(this.reconnectDelay_=Cg,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){en("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Rg&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+hT.replace(/\./g,"-")]=1,af()?e["framework.cordova"]=1:FE()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=nc.getInstance().currentlyOnline();return jm(this.interruptReasons_)&&e}}yr.nextPersistentConnectionId_=0;yr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Be(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Be(xi,e),s=new Be(xi,n);return this.compare(r,s)!==0}minPost(){return Be.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dl;class UT extends Yc{static get __EMPTY_NODE(){return dl}static set __EMPTY_NODE(e){dl=e}compare(e,n){return Ji(e.name,n.name)}isDefinedOn(e){throw Yi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Be.MIN}maxPost(){return new Be(Os,dl)}makePost(e,n){return ie(typeof e=="string","KeyIndex indexValue must always be a string."),new Be(e,dl)}toString(){return".key"}}const vi=new UT;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fl=class{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},gn=class No{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??No.RED,this.left=s??Qn.EMPTY_NODE,this.right=i??Qn.EMPTY_NODE}copy(e,n,r,s,i){return new No(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Qn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Qn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,No.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,No.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};gn.RED=!0;gn.BLACK=!1;class NL{copy(e,n,r,s,i){return this}insert(e,n,r){return new gn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Qn=class kl{constructor(e,n=kl.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new kl(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,gn.BLACK,null,null))}remove(e){return new kl(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,gn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new fl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new fl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new fl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new fl(this.root_,null,this.comparator_,!0,e)}};Qn.EMPTY_NODE=new NL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(t,e){return Ji(t.name,e.name)}function vf(t,e){return Ji(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let td;function LL(t){td=t}const $T=function(t){return typeof t=="number"?"number:"+mT(t):"string:"+t},BT=function(t){if(t.isLeafNode()){const e=t.val();ie(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Sr(e,".sv"),"Priority must be a string or number.")}else ie(t===td||t.isEmpty(),"priority of unexpected type.");ie(t===td||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sg;class xt{static set __childrenNodeConstructor(e){Sg=e}static get __childrenNodeConstructor(){return Sg}constructor(e,n=xt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ie(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),BT(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new xt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:xt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ve(e)?this:$e(e)===".priority"?this.priorityNode_:xt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:xt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=$e(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ie(r!==".priority"||rs(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,xt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ct(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+$T(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=mT(this.value_):e+=this.value_,this.lazyHash_=fT(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===xt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof xt.__childrenNodeConstructor?-1:(ie(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=xt.VALUE_TYPE_ORDER.indexOf(n),i=xt.VALUE_TYPE_ORDER.indexOf(r);return ie(s>=0,"Unknown leaf type: "+n),ie(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}xt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jT,WT;function DL(t){jT=t}function ML(t){WT=t}class xL extends Yc{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Ji(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Be.MIN}maxPost(){return new Be(Os,new xt("[PRIORITY-POST]",WT))}makePost(e,n){const r=jT(e);return new Be(n,new xt("[PRIORITY-POST]",r))}toString(){return".priority"}}const sn=new xL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=Math.log(2);class FL{constructor(e){const n=i=>parseInt(Math.log(i)/VL,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const rc=function(t,e,n,r){t.sort(e);const s=function(c,u){const h=u-c;let f,p;if(h===0)return null;if(h===1)return f=t[c],p=n?n(f):f,new gn(p,f.node,gn.BLACK,null,null);{const y=parseInt(h/2,10)+c,w=s(c,y),P=s(y+1,u);return f=t[y],p=n?n(f):f,new gn(p,f.node,gn.BLACK,w,P)}},i=function(c){let u=null,h=null,f=t.length;const p=function(w,P){const R=f-w,b=f;f-=w;const k=s(R+1,b),L=t[R],N=n?n(L):L;y(new gn(N,L.node,P,null,k))},y=function(w){u?(u.left=w,u=w):(h=w,u=w)};for(let w=0;w<c.count;++w){const P=c.nextBitIsOne(),R=Math.pow(2,c.count-(w+1));P?p(R,gn.BLACK):(p(R,gn.BLACK),p(R,gn.RED))}return h},o=new FL(t.length),a=i(o);return new Qn(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sh;const ti={};class pr{static get Default(){return ie(ti&&sn,"ChildrenNode.ts has not been loaded"),sh=sh||new pr({".priority":ti},{".priority":sn}),sh}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Mi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Qn?n:null}hasIndex(e){return Sr(this.indexSet_,e.toString())}addIndex(e,n){ie(e!==vi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Be.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=rc(r,e.getCompare()):a=ti;const c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;const h=Object.assign({},this.indexes_);return h[c]=a,new pr(h,u)}addToIndexes(e,n){const r=Yl(this.indexes_,(s,i)=>{const o=Mi(this.indexSet_,i);if(ie(o,"Missing index implementation for "+i),s===ti)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Be.Wrap);let u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),rc(a,o.getCompare())}else return ti;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new Be(e.name,a))),c.insert(e,e.node)}});return new pr(r,this.indexSet_)}removeFromIndexes(e,n){const r=Yl(this.indexes_,s=>{if(s===ti)return s;{const i=n.get(e.name);return i?s.remove(new Be(e.name,i)):s}});return new pr(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Co;class Ke{static get EMPTY_NODE(){return Co||(Co=new Ke(new Qn(vf),null,pr.Default))}constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&BT(this.priorityNode_),this.children_.isEmpty()&&ie(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Co}updatePriority(e){return this.children_.isEmpty()?this:new Ke(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Co:n}}getChild(e){const n=$e(e);return n===null?this:this.getImmediateChild(n).getChild(ct(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ie(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Be(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Co:this.priorityNode_;return new Ke(s,o,i)}}updateChild(e,n){const r=$e(e);if(r===null)return n;{ie($e(e)!==".priority"||rs(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(ct(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(sn,(o,a)=>{n[o]=a.val(e),r++,i&&Ke.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+$T(this.getPriority().val())+":"),this.forEachChild(sn,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":fT(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Be(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Be(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Be(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Be.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Be.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===La?-1:0}withIndex(e){if(e===vi||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ke(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===vi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(sn),s=n.getIterator(sn);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===vi?null:this.indexMap_.get(e.toString())}}Ke.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class UL extends Ke{constructor(){super(new Qn(vf),Ke.EMPTY_NODE,pr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ke.EMPTY_NODE}isEmpty(){return!1}}const La=new UL;Object.defineProperties(Be,{MIN:{value:new Be(xi,Ke.EMPTY_NODE)},MAX:{value:new Be(Os,La)}});UT.__EMPTY_NODE=Ke.EMPTY_NODE;xt.__childrenNodeConstructor=Ke;LL(La);ML(La);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=!0;function tn(t,e=null){if(t===null)return Ke.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ie(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new xt(n,tn(e))}if(!(t instanceof Array)&&$L){const n=[];let r=!1;if(Rn(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=tn(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Be(o,c)))}}),n.length===0)return Ke.EMPTY_NODE;const i=rc(n,OL,o=>o.name,vf);if(r){const o=rc(n,sn.getCompare());return new Ke(i,tn(e),new pr({".priority":o},{".priority":sn}))}else return new Ke(i,tn(e),pr.Default)}else{let n=Ke.EMPTY_NODE;return Rn(t,(r,s)=>{if(Sr(t,r)&&r.substring(0,1)!=="."){const i=tn(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(tn(e))}}DL(tn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL extends Yc{constructor(e){super(),this.indexPath_=e,ie(!Ve(e)&&$e(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Ji(e.name,n.name):i}makePost(e,n){const r=tn(e),s=Ke.EMPTY_NODE.updateChild(this.indexPath_,r);return new Be(n,s)}maxPost(){const e=Ke.EMPTY_NODE.updateChild(this.indexPath_,La);return new Be(Os,e)}toString(){return MT(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL extends Yc{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Ji(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Be.MIN}maxPost(){return Be.MAX}makePost(e,n){const r=tn(e);return new Be(n,r)}toString(){return".value"}}const WL=new jL;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(t){return{type:"value",snapshotNode:t}}function zL(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function GL(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Pg(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function qL(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=sn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ie(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ie(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xi}hasEnd(){return this.endSet_}getIndexEndValue(){return ie(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ie(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Os}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ie(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===sn}copy(){const e=new Ef;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function kg(t){const e={};if(t.isDefault())return e;let n;if(t.index_===sn?n="$priority":t.index_===WL?n="$value":t.index_===vi?n="$key":(ie(t.index_ instanceof BL,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ht(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ht(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ht(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ht(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ht(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Ng(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==sn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends OT{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ie(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=Na("p:rest:"),this.listens_={}}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=sc.getListenId_(e,r),a={};this.listens_[o]=a;const c=kg(e._queryParams);this.restRequest_(i+".json",c,(u,h)=>{let f=h;if(u===404&&(f=null,u=null),u===null&&this.onDataUpdate_(i,f,!1,r),Mi(this.listens_,o)===a){let p;u?u===401?p="permission_denied":p="rest_error:"+u:p="ok",s(p,null)}})}unlisten(e,n){const r=sc.getListenId_(e,n);delete this.listens_[r]}get(e){const n=kg(e._queryParams),r=e._path.toString(),s=new ua;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+lf(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ha(a.responseText)}catch{vn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&vn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(){this.rootNode_=Ke.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(){return{value:null,children:new Map}}function HT(t,e,n){if(Ve(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=$e(e);t.children.has(r)||t.children.set(r,ic());const s=t.children.get(r);e=ct(e),HT(s,e,n)}}function nd(t,e,n){t.value!==null?n(e,t.value):YL(t,(r,s)=>{const i=new ht(e.toString()+"/"+r);nd(s,i,n)})}function YL(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QL{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Rn(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og=10*1e3,XL=30*1e3,JL=5*60*1e3;class ZL{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new QL(e);const r=Og+(XL-Og)*Math.random();Go(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Rn(e,(s,i)=>{i>0&&Sr(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Go(this.reportStats_.bind(this),Math.floor(Math.random()*2*JL))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xn;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Xn||(Xn={}));function zT(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function GT(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function qT(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Xn.ACK_USER_WRITE,this.source=zT()}operationForChild(e){if(Ve(this.path)){if(this.affectedTree.value!=null)return ie(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ht(e));return new oc(et(),n,this.revert)}}else return ie($e(this.path)===e,"operationForChild called for unrelated child."),new oc(ct(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Xn.OVERWRITE}operationForChild(e){return Ve(this.path)?new Ls(this.source,et(),this.snap.getImmediateChild(e)):new Ls(this.source,ct(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Xn.MERGE}operationForChild(e){if(Ve(this.path)){const n=this.children.subtree(new ht(e));return n.isEmpty()?null:n.value?new Ls(this.source,et(),n.value):new pa(this.source,et(),n)}else return ie($e(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new pa(this.source,ct(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ve(e))return this.isFullyInitialized()&&!this.filtered_;const n=$e(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function eD(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(qL(o.childName,o.snapshotNode))}),Ro(t,s,"child_removed",e,r,n),Ro(t,s,"child_added",e,r,n),Ro(t,s,"child_moved",i,r,n),Ro(t,s,"child_changed",e,r,n),Ro(t,s,"value",e,r,n),s}function Ro(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>nD(t,a,c)),o.forEach(a=>{const c=tD(t,a,i);s.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function tD(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function nD(t,e,n){if(e.childName==null||n.childName==null)throw Yi("Should only compare child_ events.");const r=new Be(e.childName,e.snapshotNode),s=new Be(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(t,e){return{eventCache:t,serverCache:e}}function qo(t,e,n,r){return KT(new Tf(e,n,r),t.serverCache)}function YT(t,e,n,r){return KT(t.eventCache,new Tf(e,n,r))}function rd(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ds(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ih;const rD=()=>(ih||(ih=new Qn(jO)),ih);class at{static fromObject(e){let n=new at(null);return Rn(e,(r,s)=>{n=n.set(new ht(r),s)}),n}constructor(e,n=rD()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:et(),value:this.value};if(Ve(e))return null;{const r=$e(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(ct(e),n);return i!=null?{path:Ft(new ht(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ve(e))return this;{const n=$e(e),r=this.children.get(n);return r!==null?r.subtree(ct(e)):new at(null)}}set(e,n){if(Ve(e))return new at(n,this.children);{const r=$e(e),i=(this.children.get(r)||new at(null)).set(ct(e),n),o=this.children.insert(r,i);return new at(this.value,o)}}remove(e){if(Ve(e))return this.children.isEmpty()?new at(null):new at(null,this.children);{const n=$e(e),r=this.children.get(n);if(r){const s=r.remove(ct(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new at(null):new at(this.value,i)}else return this}}get(e){if(Ve(e))return this.value;{const n=$e(e),r=this.children.get(n);return r?r.get(ct(e)):null}}setTree(e,n){if(Ve(e))return n;{const r=$e(e),i=(this.children.get(r)||new at(null)).setTree(ct(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new at(this.value,o)}}fold(e){return this.fold_(et(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Ft(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,et(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Ve(e))return null;{const i=$e(e),o=this.children.get(i);return o?o.findOnPath_(ct(e),Ft(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,et(),n)}foreachOnPath_(e,n,r){if(Ve(e))return this;{this.value&&r(n,this.value);const s=$e(e),i=this.children.get(s);return i?i.foreachOnPath_(ct(e),Ft(n,s),r):new at(null)}}foreach(e){this.foreach_(et(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Ft(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.writeTree_=e}static empty(){return new Vn(new at(null))}}function Ko(t,e,n){if(Ve(e))return new Vn(new at(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Cn(s,e);return i=i.updateChild(o,n),new Vn(t.writeTree_.set(s,i))}else{const s=new at(n),i=t.writeTree_.setTree(e,s);return new Vn(i)}}}function Lg(t,e,n){let r=t;return Rn(n,(s,i)=>{r=Ko(r,Ft(e,s),i)}),r}function Dg(t,e){if(Ve(e))return Vn.empty();{const n=t.writeTree_.setTree(e,new at(null));return new Vn(n)}}function sd(t,e){return Bs(t,e)!=null}function Bs(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Cn(n.path,e)):null}function Mg(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(sn,(r,s)=>{e.push(new Be(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Be(r,s.value))}),e}function Yr(t,e){if(Ve(e))return t;{const n=Bs(t,e);return n!=null?new Vn(new at(n)):new Vn(t.writeTree_.subtree(e))}}function id(t){return t.writeTree_.isEmpty()}function Vi(t,e){return QT(et(),t.writeTree_,e)}function QT(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(ie(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=QT(Ft(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Ft(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(t,e){return nI(e,t)}function sD(t,e,n,r,s){ie(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=Ko(t.visibleWrites,e,n)),t.lastWriteId=r}function iD(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function oD(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ie(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&aD(a,r.path)?s=!1:Ln(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return lD(t),!0;if(r.snap)t.visibleWrites=Dg(t.visibleWrites,r.path);else{const a=r.children;Rn(a,c=>{t.visibleWrites=Dg(t.visibleWrites,Ft(r.path,c))})}return!0}else return!1}function aD(t,e){if(t.snap)return Ln(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Ln(Ft(t.path,n),e))return!0;return!1}function lD(t){t.visibleWrites=JT(t.allWrites,cD,et()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function cD(t){return t.visible}function JT(t,e,n){let r=Vn.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Ln(n,o)?(a=Cn(n,o),r=Ko(r,a,i.snap)):Ln(o,n)&&(a=Cn(o,n),r=Ko(r,et(),i.snap.getChild(a)));else if(i.children){if(Ln(n,o))a=Cn(n,o),r=Lg(r,a,i.children);else if(Ln(o,n))if(a=Cn(o,n),Ve(a))r=Lg(r,et(),i.children);else{const c=Mi(i.children,$e(a));if(c){const u=c.getChild(ct(a));r=Ko(r,et(),u)}}}else throw Yi("WriteRecord should have .snap or .children")}}return r}function ZT(t,e,n,r,s){if(!r&&!s){const i=Bs(t.visibleWrites,e);if(i!=null)return i;{const o=Yr(t.visibleWrites,e);if(id(o))return n;if(n==null&&!sd(o,et()))return null;{const a=n||Ke.EMPTY_NODE;return Vi(o,a)}}}else{const i=Yr(t.visibleWrites,e);if(!s&&id(i))return n;if(!s&&n==null&&!sd(i,et()))return null;{const o=function(u){return(u.visible||s)&&(!r||!~r.indexOf(u.writeId))&&(Ln(u.path,e)||Ln(e,u.path))},a=JT(t.allWrites,o,e),c=n||Ke.EMPTY_NODE;return Vi(a,c)}}}function uD(t,e,n){let r=Ke.EMPTY_NODE;const s=Bs(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(sn,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=Yr(t.visibleWrites,e);return n.forEachChild(sn,(o,a)=>{const c=Vi(Yr(i,new ht(o)),a);r=r.updateImmediateChild(o,c)}),Mg(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=Yr(t.visibleWrites,e);return Mg(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function hD(t,e,n,r,s){ie(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Ft(e,n);if(sd(t.visibleWrites,i))return null;{const o=Yr(t.visibleWrites,i);return id(o)?s.getChild(n):Vi(o,s.getChild(n))}}function dD(t,e,n,r){const s=Ft(e,n),i=Bs(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=Yr(t.visibleWrites,s);return Vi(o,r.getNode().getImmediateChild(n))}else return null}function fD(t,e){return Bs(t.visibleWrites,e)}function pD(t,e,n,r,s,i,o){let a;const c=Yr(t.visibleWrites,e),u=Bs(c,et());if(u!=null)a=u;else if(n!=null)a=Vi(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const h=[],f=o.getCompare(),p=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let y=p.getNext();for(;y&&h.length<s;)f(y,r)!==0&&h.push(y),y=p.getNext();return h}else return[]}function _D(){return{visibleWrites:Vn.empty(),allWrites:[],lastWriteId:-1}}function od(t,e,n,r){return ZT(t.writeTree,t.treePath,e,n,r)}function eI(t,e){return uD(t.writeTree,t.treePath,e)}function xg(t,e,n,r){return hD(t.writeTree,t.treePath,e,n,r)}function ac(t,e){return fD(t.writeTree,Ft(t.treePath,e))}function mD(t,e,n,r,s,i){return pD(t.writeTree,t.treePath,e,n,r,s,i)}function If(t,e,n){return dD(t.writeTree,t.treePath,e,n)}function tI(t,e){return nI(Ft(t.treePath,e),t.writeTree)}function nI(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ie(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ie(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,Pg(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,GL(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,zL(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,Pg(r,e.snapshotNode,s.oldSnap));else throw Yi("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const rI=new yD;class wf{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Tf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return If(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ds(this.viewCache_),i=mD(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}function vD(t,e){ie(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ie(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function ED(t,e,n,r,s){const i=new gD;let o,a;if(n.type===Xn.OVERWRITE){const u=n;u.source.fromUser?o=ad(t,e,u.path,u.snap,r,s,i):(ie(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Ve(u.path),o=lc(t,e,u.path,u.snap,r,s,a,i))}else if(n.type===Xn.MERGE){const u=n;u.source.fromUser?o=ID(t,e,u.path,u.children,r,s,i):(ie(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=ld(t,e,u.path,u.children,r,s,a,i))}else if(n.type===Xn.ACK_USER_WRITE){const u=n;u.revert?o=AD(t,e,u.path,r,s,i):o=wD(t,e,u.path,u.affectedTree,r,s,i)}else if(n.type===Xn.LISTEN_COMPLETE)o=bD(t,e,n.path,r,i);else throw Yi("Unknown operation type: "+n.type);const c=i.getChanges();return TD(e,o,c),{viewCache:o,changes:c}}function TD(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=rd(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(HL(rd(e)))}}function sI(t,e,n,r,s,i){const o=e.eventCache;if(ac(r,n)!=null)return e;{let a,c;if(Ve(n))if(ie(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Ds(e),h=u instanceof Ke?u:Ke.EMPTY_NODE,f=eI(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),f,i)}else{const u=od(r,Ds(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,i)}else{const u=$e(n);if(u===".priority"){ie(rs(n)===1,"Can't have a priority with additional path components");const h=o.getNode();c=e.serverCache.getNode();const f=xg(r,n,h,c);f!=null?a=t.filter.updatePriority(h,f):a=o.getNode()}else{const h=ct(n);let f;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();const p=xg(r,n,o.getNode(),c);p!=null?f=o.getNode().getImmediateChild(u).updateChild(h,p):f=o.getNode().getImmediateChild(u)}else f=If(r,u,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),u,f,h,s,i):a=o.getNode()}}return qo(e,a,o.isFullyInitialized()||Ve(n),t.filter.filtersNodes())}}function lc(t,e,n,r,s,i,o,a){const c=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(Ve(n))u=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){const y=c.getNode().updateChild(n,r);u=h.updateFullNode(c.getNode(),y,null)}else{const y=$e(n);if(!c.isCompleteForPath(n)&&rs(n)>1)return e;const w=ct(n),R=c.getNode().getImmediateChild(y).updateChild(w,r);y===".priority"?u=h.updatePriority(c.getNode(),R):u=h.updateChild(c.getNode(),y,R,w,rI,null)}const f=YT(e,u,c.isFullyInitialized()||Ve(n),h.filtersNodes()),p=new wf(s,f,i);return sI(t,f,n,s,p,a)}function ad(t,e,n,r,s,i,o){const a=e.eventCache;let c,u;const h=new wf(s,e,i);if(Ve(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=qo(e,u,!0,t.filter.filtersNodes());else{const f=$e(n);if(f===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=qo(e,u,a.isFullyInitialized(),a.isFiltered());else{const p=ct(n),y=a.getNode().getImmediateChild(f);let w;if(Ve(p))w=r;else{const P=h.getCompleteChild(f);P!=null?DT(p)===".priority"&&P.getChild(xT(p)).isEmpty()?w=P:w=P.updateChild(p,r):w=Ke.EMPTY_NODE}if(y.equals(w))c=e;else{const P=t.filter.updateChild(a.getNode(),f,w,p,h,o);c=qo(e,P,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Vg(t,e){return t.eventCache.isCompleteForChild(e)}function ID(t,e,n,r,s,i,o){let a=e;return r.foreach((c,u)=>{const h=Ft(n,c);Vg(e,$e(h))&&(a=ad(t,a,h,u,s,i,o))}),r.foreach((c,u)=>{const h=Ft(n,c);Vg(e,$e(h))||(a=ad(t,a,h,u,s,i,o))}),a}function Fg(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function ld(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;Ve(n)?u=r:u=new at(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((f,p)=>{if(h.hasChild(f)){const y=e.serverCache.getNode().getImmediateChild(f),w=Fg(t,y,p);c=lc(t,c,new ht(f),w,s,i,o,a)}}),u.children.inorderTraversal((f,p)=>{const y=!e.serverCache.isCompleteForChild(f)&&p.value===null;if(!h.hasChild(f)&&!y){const w=e.serverCache.getNode().getImmediateChild(f),P=Fg(t,w,p);c=lc(t,c,new ht(f),P,s,i,o,a)}}),c}function wD(t,e,n,r,s,i,o){if(ac(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Ve(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return lc(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Ve(n)){let u=new at(null);return c.getNode().forEachChild(vi,(h,f)=>{u=u.set(new ht(h),f)}),ld(t,e,n,u,s,i,a,o)}else return e}else{let u=new at(null);return r.foreach((h,f)=>{const p=Ft(n,h);c.isCompleteForPath(p)&&(u=u.set(h,c.getNode().getChild(p)))}),ld(t,e,n,u,s,i,a,o)}}function bD(t,e,n,r,s){const i=e.serverCache,o=YT(e,i.getNode(),i.isFullyInitialized()||Ve(n),i.isFiltered());return sI(t,o,n,r,rI,s)}function AD(t,e,n,r,s,i){let o;if(ac(r,n)!=null)return e;{const a=new wf(r,e,s),c=e.eventCache.getNode();let u;if(Ve(n)||$e(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=od(r,Ds(e));else{const f=e.serverCache.getNode();ie(f instanceof Ke,"serverChildren would be complete if leaf node"),h=eI(r,f)}h=h,u=t.filter.updateFullNode(c,h,i)}else{const h=$e(n);let f=If(r,h,e.serverCache);f==null&&e.serverCache.isCompleteForChild(h)&&(f=c.getImmediateChild(h)),f!=null?u=t.filter.updateChild(c,h,f,ct(n),a,i):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(c,h,Ke.EMPTY_NODE,ct(n),a,i):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=od(r,Ds(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,i)))}return o=e.serverCache.isFullyInitialized()||ac(r,et())!=null,qo(e,u,o,t.filter.filtersNodes())}}function CD(t,e){const n=Ds(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ve(e)&&!n.getImmediateChild($e(e)).isEmpty())?n.getChild(e):null}function Ug(t,e,n,r){e.type===Xn.MERGE&&e.source.queryId!==null&&(ie(Ds(t.viewCache_),"We should always have a full cache before handling merges"),ie(rd(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=ED(t.processor_,s,e,n,r);return vD(t.processor_,i.viewCache),ie(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,RD(t,i.changes,i.viewCache.eventCache.getNode(),null)}function RD(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return eD(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $g;function SD(t){ie(!$g,"__referenceConstructor has already been defined"),$g=t}function bf(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return ie(i!=null,"SyncTree gave us an op for an invalid query."),Ug(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(Ug(o,e,n,r));return i}}function Af(t,e){let n=null;for(const r of t.views.values())n=n||CD(r,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bg;function PD(t){ie(!Bg,"__referenceConstructor has already been defined"),Bg=t}class jg{constructor(e){this.listenProvider_=e,this.syncPointTree_=new at(null),this.pendingWriteTree_=_D(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kD(t,e,n,r,s){return sD(t.pendingWriteTree_,e,n,r,s),s?Xc(t,new Ls(zT(),e,n)):[]}function hi(t,e,n=!1){const r=iD(t.pendingWriteTree_,e);if(oD(t.pendingWriteTree_,e)){let i=new at(null);return r.snap!=null?i=i.set(et(),!0):Rn(r.children,o=>{i=i.set(new ht(o),!0)}),Xc(t,new oc(r.path,i,n))}else return[]}function Qc(t,e,n){return Xc(t,new Ls(GT(),e,n))}function ND(t,e,n){const r=at.fromObject(n);return Xc(t,new pa(GT(),e,r))}function OD(t,e,n,r){const s=lI(t,r);if(s!=null){const i=cI(s),o=i.path,a=i.queryId,c=Cn(o,e),u=new Ls(qT(a),c,n);return uI(t,o,u)}else return[]}function LD(t,e,n,r){const s=lI(t,r);if(s){const i=cI(s),o=i.path,a=i.queryId,c=Cn(o,e),u=at.fromObject(n),h=new pa(qT(a),c,u);return uI(t,o,h)}else return[]}function iI(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Cn(o,e),u=Af(a,c);if(u)return u});return ZT(s,e,i,n,!0)}function Xc(t,e){return oI(e,t.syncPointTree_,null,XT(t.pendingWriteTree_,et()))}function oI(t,e,n,r){if(Ve(t.path))return aI(t,e,n,r);{const s=e.get(et());n==null&&s!=null&&(n=Af(s,et()));let i=[];const o=$e(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const u=n?n.getImmediateChild(o):null,h=tI(r,o);i=i.concat(oI(a,c,u,h))}return s&&(i=i.concat(bf(s,t,r,n))),i}}function aI(t,e,n,r){const s=e.get(et());n==null&&s!=null&&(n=Af(s,et()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,u=tI(r,o),h=t.operationForChild(o);h&&(i=i.concat(aI(h,a,c,u)))}),s&&(i=i.concat(bf(s,t,r,n))),i}function lI(t,e){return t.tagToQueryMap.get(e)}function cI(t){const e=t.indexOf("$");return ie(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ht(t.substr(0,e))}}function uI(t,e,n){const r=t.syncPointTree_.get(e);ie(r,"Missing sync point for query tag that we're tracking");const s=XT(t.pendingWriteTree_,e);return bf(r,n,s,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Cf(n)}node(){return this.node_}}class Rf{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ft(this.path_,e);return new Rf(this.syncTree_,n)}node(){return iI(this.syncTree_,this.path_)}}const DD=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Wg=function(t,e,n){if(!t||typeof t!="object")return t;if(ie(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return MD(t[".sv"],e,n);if(typeof t[".sv"]=="object")return xD(t[".sv"],e);ie(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},MD=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ie(!1,"Unexpected server value: "+t)}},xD=function(t,e,n){t.hasOwnProperty("increment")||ie(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ie(!1,"Unexpected increment value: "+r);const s=e.node();if(ie(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},VD=function(t,e,n,r){return Sf(e,new Rf(n,t),r)},FD=function(t,e,n){return Sf(t,new Cf(e),n)};function Sf(t,e,n){const r=t.getPriority().val(),s=Wg(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=Wg(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new xt(a,tn(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new xt(s))),o.forEachChild(sn,(a,c)=>{const u=Sf(c,e.getImmediateChild(a),n);u!==c&&(i=i.updateImmediateChild(a,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function kf(t,e){let n=e instanceof ht?e:new ht(e),r=t,s=$e(n);for(;s!==null;){const i=Mi(r.node.children,s)||{children:{},childCount:0};r=new Pf(s,r,i),n=ct(n),s=$e(n)}return r}function Zi(t){return t.node.value}function hI(t,e){t.node.value=e,cd(t)}function dI(t){return t.node.childCount>0}function UD(t){return Zi(t)===void 0&&!dI(t)}function Jc(t,e){Rn(t.node.children,(n,r)=>{e(new Pf(n,t,r))})}function fI(t,e,n,r){n&&!r&&e(t),Jc(t,s=>{fI(s,e,!0,r)}),n&&r&&e(t)}function $D(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Da(t){return new ht(t.parent===null?t.name:Da(t.parent)+"/"+t.name)}function cd(t){t.parent!==null&&BD(t.parent,t.name,t)}function BD(t,e,n){const r=UD(n),s=Sr(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,cd(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,cd(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=/[\[\].#$\/\u0000-\u001F\u007F]/,WD=/[\[\].#$\u0000-\u001F\u007F]/,oh=10*1024*1024,pI=function(t){return typeof t=="string"&&t.length!==0&&!jD.test(t)},HD=function(t){return typeof t=="string"&&t.length!==0&&!WD.test(t)},zD=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),HD(t)},_I=function(t,e,n){const r=n instanceof ht?new bL(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ts(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ts(r)+" with contents = "+e.toString());if(pT(e))throw new Error(t+"contains "+e.toString()+" "+Ts(r));if(typeof e=="string"&&e.length>oh/3&&qc(e)>oh)throw new Error(t+"contains a string greater than "+oh+" utf8 bytes "+Ts(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Rn(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!pI(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ts(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);AL(r,o),_I(t,a,r),CL(r)}),s&&i)throw new Error(t+' contains ".value" child '+Ts(r)+" in addition to actual children.")}},GD=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!pI(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!zD(n))throw new Error(ak(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function KD(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!VT(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function js(t,e,n){KD(t,n),YD(t,r=>Ln(r,e)||Ln(e,r))}function YD(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(QD(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function QD(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Ps&&en("event: "+n.toString()),Oa(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="repo_interrupt",JD=25;class ZD{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ic(),this.transactionQueueTree_=new Pf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function e2(t,e,n){if(t.stats_=mf(t.repoInfo_),t.forceRestClient_||KO())t.server_=new sc(t.repoInfo_,(r,s,i,o)=>{Hg(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>zg(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ht(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new yr(t.repoInfo_,e,(r,s,i,o)=>{Hg(t,r,s,i,o)},r=>{zg(t,r)},r=>{n2(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=eL(t.repoInfo_,()=>new ZL(t.stats_,t.server_)),t.infoData_=new KL,t.infoSyncTree_=new jg({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Qc(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Nf(t,"connected",!1),t.serverSyncTree_=new jg({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const u=o(a,c);js(t.eventQueue_,r._path,u)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function t2(t){const n=t.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function mI(t){return DD({timestamp:t2(t)})}function Hg(t,e,n,r,s){t.dataUpdateCount++;const i=new ht(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=Yl(n,u=>tn(u));o=LD(t.serverSyncTree_,i,c,s)}else{const c=tn(n);o=OD(t.serverSyncTree_,i,c,s)}else if(r){const c=Yl(n,u=>tn(u));o=ND(t.serverSyncTree_,i,c)}else{const c=tn(n);o=Qc(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=Lf(t,i)),js(t.eventQueue_,a,o)}function zg(t,e){Nf(t,"connected",e),e===!1&&s2(t)}function n2(t,e){Rn(e,(n,r)=>{Nf(t,n,r)})}function Nf(t,e,n){const r=new ht("/.info/"+e),s=tn(n);t.infoData_.updateSnapshot(r,s);const i=Qc(t.infoSyncTree_,r,s);js(t.eventQueue_,r,i)}function r2(t){return t.nextWriteId_++}function s2(t){gI(t,"onDisconnectEvents");const e=mI(t),n=ic();nd(t.onDisconnect_,et(),(s,i)=>{const o=VD(s,i,t.serverSyncTree_,e);HT(n,s,o)});let r=[];nd(n,et(),(s,i)=>{r=r.concat(Qc(t.serverSyncTree_,s,i));const o=l2(t,s);Lf(t,o)}),t.onDisconnect_=ic(),js(t.eventQueue_,et(),r)}function i2(t){t.persistentConnection_&&t.persistentConnection_.interrupt(XD)}function gI(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),en(n,...e)}function yI(t,e,n){return iI(t.serverSyncTree_,e,n)||Ke.EMPTY_NODE}function Of(t,e=t.transactionQueueTree_){if(e||Zc(t,e),Zi(e)){const n=EI(t,e);ie(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&o2(t,Da(e),n)}else dI(e)&&Jc(e,n=>{Of(t,n)})}function o2(t,e,n){const r=n.map(u=>u.currentWriteId),s=yI(t,e,r);let i=s;const o=s.hash();for(let u=0;u<n.length;u++){const h=n[u];ie(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const f=Cn(e,h.path);i=i.updateChild(f,h.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,u=>{gI(t,"transaction put response",{path:c.toString(),status:u});let h=[];if(u==="ok"){const f=[];for(let p=0;p<n.length;p++)n[p].status=2,h=h.concat(hi(t.serverSyncTree_,n[p].currentWriteId)),n[p].onComplete&&f.push(()=>n[p].onComplete(null,!0,n[p].currentOutputSnapshotResolved)),n[p].unwatcher();Zc(t,kf(t.transactionQueueTree_,e)),Of(t,t.transactionQueueTree_),js(t.eventQueue_,e,h);for(let p=0;p<f.length;p++)Oa(f[p])}else{if(u==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{vn("transaction at "+c.toString()+" failed: "+u);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=u}Lf(t,e)}},o)}function Lf(t,e){const n=vI(t,e),r=Da(n),s=EI(t,n);return a2(t,s,r),r}function a2(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],u=Cn(n,c.path);let h=!1,f;if(ie(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)h=!0,f=c.abortReason,s=s.concat(hi(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=JD)h=!0,f="maxretry",s=s.concat(hi(t.serverSyncTree_,c.currentWriteId,!0));else{const p=yI(t,c.path,o);c.currentInputSnapshot=p;const y=e[a].update(p.val());if(y!==void 0){_I("transaction failed: Data returned ",y,c.path);let w=tn(y);typeof y=="object"&&y!=null&&Sr(y,".priority")||(w=w.updatePriority(p.getPriority()));const R=c.currentWriteId,b=mI(t),k=FD(w,p,b);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=k,c.currentWriteId=r2(t),o.splice(o.indexOf(R),1),s=s.concat(kD(t.serverSyncTree_,c.path,k,c.currentWriteId,c.applyLocally)),s=s.concat(hi(t.serverSyncTree_,R,!0))}else h=!0,f="nodata",s=s.concat(hi(t.serverSyncTree_,c.currentWriteId,!0))}js(t.eventQueue_,n,s),s=[],h&&(e[a].status=2,function(p){setTimeout(p,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}Zc(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Oa(r[a]);Of(t,t.transactionQueueTree_)}function vI(t,e){let n,r=t.transactionQueueTree_;for(n=$e(e);n!==null&&Zi(r)===void 0;)r=kf(r,n),e=ct(e),n=$e(e);return r}function EI(t,e){const n=[];return TI(t,e,n),n.sort((r,s)=>r.order-s.order),n}function TI(t,e,n){const r=Zi(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);Jc(e,s=>{TI(t,s,n)})}function Zc(t,e){const n=Zi(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,hI(e,n.length>0?n:void 0)}Jc(e,r=>{Zc(t,r)})}function l2(t,e){const n=Da(vI(t,e)),r=kf(t.transactionQueueTree_,e);return $D(r,s=>{ah(t,s)}),ah(t,r),fI(r,s=>{ah(t,s)}),n}function ah(t,e){const n=Zi(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ie(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(ie(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(hi(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?hI(e,void 0):n.length=i+1,js(t.eventQueue_,Da(e),s);for(let o=0;o<r.length;o++)Oa(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function u2(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):vn(`Invalid query segment '${n}' in query '${t}'`)}return e}const Gg=function(t,e){const n=h2(t),r=n.namespace;n.domain==="firebase.com"&&Ns(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Ns("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||$O();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new XO(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new ht(n.pathString)}},h2=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(s=c2(t.substring(h,f)));const p=u2(t.substring(Math.min(t.length,f)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;const y=e.slice(0,u);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),i=r}"ns"in p&&(i=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Ve(this._path)?null:DT(this._path)}get ref(){return new eo(this._repo,this._path)}get _queryIdentifier(){const e=Ng(this._queryParams),n=pf(e);return n==="{}"?"default":n}get _queryObject(){return Ng(this._queryParams)}isEqual(e){if(e=$n(e),!(e instanceof Df))return!1;const n=this._repo===e._repo,r=VT(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+wL(this._path)}}class eo extends Df{constructor(e,n){super(e,n,new Ef,!1)}get parent(){const e=xT(this._path);return e===null?null:new eo(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}SD(eo);PD(eo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="FIREBASE_DATABASE_EMULATOR_HOST",ud={};let f2=!1;function p2(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||Ns("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),en("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Gg(i,s),a=o.repoInfo,c,u;typeof process<"u"&&dg&&(u=dg[d2]),u?(c=!0,i=`http://${u}?ns=${a.namespace}`,o=Gg(i,s),a=o.repoInfo):c=!o.repoInfo.secure;const h=s&&c?new Zh(Zh.OWNER):new QO(t.name,t.options,e);GD("Invalid Firebase Database URL",o),Ve(o.path)||Ns("Database URL must point to the root of a Firebase Database (not including a child path).");const f=m2(a,t,h,new YO(t.name,n));return new g2(f,t)}function _2(t,e){const n=ud[e];(!n||n[t.key]!==t)&&Ns(`Database ${e}(${t.repoInfo_}) has already been deleted.`),i2(t),delete n[t.key]}function m2(t,e,n,r){let s=ud[e.name];s||(s={},ud[e.name]=s);let i=s[t.toURLString()];return i&&Ns("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new ZD(t,f2,n,r),s[t.toURLString()]=i,i}class g2{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(e2(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new eo(this._repo,et())),this._rootInternal}_delete(){return this._rootInternal!==null&&(_2(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ns("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(t){MO(Xi),tr(new Bn("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return p2(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),yn(fg,pg,t),yn(fg,pg,"esm2017")}yr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};yr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};y2();var qg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ks,II;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,E){function T(){}T.prototype=E.prototype,A.D=E.prototype,A.prototype=new T,A.prototype.constructor=A,A.C=function(S,O,D){for(var C=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)C[nt-2]=arguments[nt];return E.prototype[O].apply(S,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,E,T){T||(T=0);var S=Array(16);if(typeof E=="string")for(var O=0;16>O;++O)S[O]=E.charCodeAt(T++)|E.charCodeAt(T++)<<8|E.charCodeAt(T++)<<16|E.charCodeAt(T++)<<24;else for(O=0;16>O;++O)S[O]=E[T++]|E[T++]<<8|E[T++]<<16|E[T++]<<24;E=A.g[0],T=A.g[1],O=A.g[2];var D=A.g[3],C=E+(D^T&(O^D))+S[0]+3614090360&4294967295;E=T+(C<<7&4294967295|C>>>25),C=D+(O^E&(T^O))+S[1]+3905402710&4294967295,D=E+(C<<12&4294967295|C>>>20),C=O+(T^D&(E^T))+S[2]+606105819&4294967295,O=D+(C<<17&4294967295|C>>>15),C=T+(E^O&(D^E))+S[3]+3250441966&4294967295,T=O+(C<<22&4294967295|C>>>10),C=E+(D^T&(O^D))+S[4]+4118548399&4294967295,E=T+(C<<7&4294967295|C>>>25),C=D+(O^E&(T^O))+S[5]+1200080426&4294967295,D=E+(C<<12&4294967295|C>>>20),C=O+(T^D&(E^T))+S[6]+2821735955&4294967295,O=D+(C<<17&4294967295|C>>>15),C=T+(E^O&(D^E))+S[7]+4249261313&4294967295,T=O+(C<<22&4294967295|C>>>10),C=E+(D^T&(O^D))+S[8]+1770035416&4294967295,E=T+(C<<7&4294967295|C>>>25),C=D+(O^E&(T^O))+S[9]+2336552879&4294967295,D=E+(C<<12&4294967295|C>>>20),C=O+(T^D&(E^T))+S[10]+4294925233&4294967295,O=D+(C<<17&4294967295|C>>>15),C=T+(E^O&(D^E))+S[11]+2304563134&4294967295,T=O+(C<<22&4294967295|C>>>10),C=E+(D^T&(O^D))+S[12]+1804603682&4294967295,E=T+(C<<7&4294967295|C>>>25),C=D+(O^E&(T^O))+S[13]+4254626195&4294967295,D=E+(C<<12&4294967295|C>>>20),C=O+(T^D&(E^T))+S[14]+2792965006&4294967295,O=D+(C<<17&4294967295|C>>>15),C=T+(E^O&(D^E))+S[15]+1236535329&4294967295,T=O+(C<<22&4294967295|C>>>10),C=E+(O^D&(T^O))+S[1]+4129170786&4294967295,E=T+(C<<5&4294967295|C>>>27),C=D+(T^O&(E^T))+S[6]+3225465664&4294967295,D=E+(C<<9&4294967295|C>>>23),C=O+(E^T&(D^E))+S[11]+643717713&4294967295,O=D+(C<<14&4294967295|C>>>18),C=T+(D^E&(O^D))+S[0]+3921069994&4294967295,T=O+(C<<20&4294967295|C>>>12),C=E+(O^D&(T^O))+S[5]+3593408605&4294967295,E=T+(C<<5&4294967295|C>>>27),C=D+(T^O&(E^T))+S[10]+38016083&4294967295,D=E+(C<<9&4294967295|C>>>23),C=O+(E^T&(D^E))+S[15]+3634488961&4294967295,O=D+(C<<14&4294967295|C>>>18),C=T+(D^E&(O^D))+S[4]+3889429448&4294967295,T=O+(C<<20&4294967295|C>>>12),C=E+(O^D&(T^O))+S[9]+568446438&4294967295,E=T+(C<<5&4294967295|C>>>27),C=D+(T^O&(E^T))+S[14]+3275163606&4294967295,D=E+(C<<9&4294967295|C>>>23),C=O+(E^T&(D^E))+S[3]+4107603335&4294967295,O=D+(C<<14&4294967295|C>>>18),C=T+(D^E&(O^D))+S[8]+1163531501&4294967295,T=O+(C<<20&4294967295|C>>>12),C=E+(O^D&(T^O))+S[13]+2850285829&4294967295,E=T+(C<<5&4294967295|C>>>27),C=D+(T^O&(E^T))+S[2]+4243563512&4294967295,D=E+(C<<9&4294967295|C>>>23),C=O+(E^T&(D^E))+S[7]+1735328473&4294967295,O=D+(C<<14&4294967295|C>>>18),C=T+(D^E&(O^D))+S[12]+2368359562&4294967295,T=O+(C<<20&4294967295|C>>>12),C=E+(T^O^D)+S[5]+4294588738&4294967295,E=T+(C<<4&4294967295|C>>>28),C=D+(E^T^O)+S[8]+2272392833&4294967295,D=E+(C<<11&4294967295|C>>>21),C=O+(D^E^T)+S[11]+1839030562&4294967295,O=D+(C<<16&4294967295|C>>>16),C=T+(O^D^E)+S[14]+4259657740&4294967295,T=O+(C<<23&4294967295|C>>>9),C=E+(T^O^D)+S[1]+2763975236&4294967295,E=T+(C<<4&4294967295|C>>>28),C=D+(E^T^O)+S[4]+1272893353&4294967295,D=E+(C<<11&4294967295|C>>>21),C=O+(D^E^T)+S[7]+4139469664&4294967295,O=D+(C<<16&4294967295|C>>>16),C=T+(O^D^E)+S[10]+3200236656&4294967295,T=O+(C<<23&4294967295|C>>>9),C=E+(T^O^D)+S[13]+681279174&4294967295,E=T+(C<<4&4294967295|C>>>28),C=D+(E^T^O)+S[0]+3936430074&4294967295,D=E+(C<<11&4294967295|C>>>21),C=O+(D^E^T)+S[3]+3572445317&4294967295,O=D+(C<<16&4294967295|C>>>16),C=T+(O^D^E)+S[6]+76029189&4294967295,T=O+(C<<23&4294967295|C>>>9),C=E+(T^O^D)+S[9]+3654602809&4294967295,E=T+(C<<4&4294967295|C>>>28),C=D+(E^T^O)+S[12]+3873151461&4294967295,D=E+(C<<11&4294967295|C>>>21),C=O+(D^E^T)+S[15]+530742520&4294967295,O=D+(C<<16&4294967295|C>>>16),C=T+(O^D^E)+S[2]+3299628645&4294967295,T=O+(C<<23&4294967295|C>>>9),C=E+(O^(T|~D))+S[0]+4096336452&4294967295,E=T+(C<<6&4294967295|C>>>26),C=D+(T^(E|~O))+S[7]+1126891415&4294967295,D=E+(C<<10&4294967295|C>>>22),C=O+(E^(D|~T))+S[14]+2878612391&4294967295,O=D+(C<<15&4294967295|C>>>17),C=T+(D^(O|~E))+S[5]+4237533241&4294967295,T=O+(C<<21&4294967295|C>>>11),C=E+(O^(T|~D))+S[12]+1700485571&4294967295,E=T+(C<<6&4294967295|C>>>26),C=D+(T^(E|~O))+S[3]+2399980690&4294967295,D=E+(C<<10&4294967295|C>>>22),C=O+(E^(D|~T))+S[10]+4293915773&4294967295,O=D+(C<<15&4294967295|C>>>17),C=T+(D^(O|~E))+S[1]+2240044497&4294967295,T=O+(C<<21&4294967295|C>>>11),C=E+(O^(T|~D))+S[8]+1873313359&4294967295,E=T+(C<<6&4294967295|C>>>26),C=D+(T^(E|~O))+S[15]+4264355552&4294967295,D=E+(C<<10&4294967295|C>>>22),C=O+(E^(D|~T))+S[6]+2734768916&4294967295,O=D+(C<<15&4294967295|C>>>17),C=T+(D^(O|~E))+S[13]+1309151649&4294967295,T=O+(C<<21&4294967295|C>>>11),C=E+(O^(T|~D))+S[4]+4149444226&4294967295,E=T+(C<<6&4294967295|C>>>26),C=D+(T^(E|~O))+S[11]+3174756917&4294967295,D=E+(C<<10&4294967295|C>>>22),C=O+(E^(D|~T))+S[2]+718787259&4294967295,O=D+(C<<15&4294967295|C>>>17),C=T+(D^(O|~E))+S[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,A.g[2]=A.g[2]+O&4294967295,A.g[3]=A.g[3]+D&4294967295}r.prototype.u=function(A,E){E===void 0&&(E=A.length);for(var T=E-this.blockSize,S=this.B,O=this.h,D=0;D<E;){if(O==0)for(;D<=T;)s(this,A,D),D+=this.blockSize;if(typeof A=="string"){for(;D<E;)if(S[O++]=A.charCodeAt(D++),O==this.blockSize){s(this,S),O=0;break}}else for(;D<E;)if(S[O++]=A[D++],O==this.blockSize){s(this,S),O=0;break}}this.h=O,this.o+=E},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;var T=8*this.o;for(E=A.length-8;E<A.length;++E)A[E]=T&255,T/=256;for(this.u(A),A=Array(16),E=T=0;4>E;++E)for(var S=0;32>S;S+=8)A[T++]=this.g[E]>>>S&255;return A};function i(A,E){var T=a;return Object.prototype.hasOwnProperty.call(T,A)?T[A]:T[A]=E(A)}function o(A,E){this.h=E;for(var T=[],S=!0,O=A.length-1;0<=O;O--){var D=A[O]|0;S&&D==E||(T[O]=D,S=!1)}this.g=T}var a={};function c(A){return-128<=A&&128>A?i(A,function(E){return new o([E|0],0>E?-1:0)}):new o([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return f;if(0>A)return R(u(-A));for(var E=[],T=1,S=0;A>=T;S++)E[S]=A/T|0,T*=4294967296;return new o(E,0)}function h(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return R(h(A.substring(1),E));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(E,8)),S=f,O=0;O<A.length;O+=8){var D=Math.min(8,A.length-O),C=parseInt(A.substring(O,O+D),E);8>D?(D=u(Math.pow(E,D)),S=S.j(D).add(u(C))):(S=S.j(T),S=S.add(u(C)))}return S}var f=c(0),p=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(P(this))return-R(this).m();for(var A=0,E=1,T=0;T<this.g.length;T++){var S=this.i(T);A+=(0<=S?S:4294967296+S)*E,E*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(w(this))return"0";if(P(this))return"-"+R(this).toString(A);for(var E=u(Math.pow(A,6)),T=this,S="";;){var O=N(T,E).g;T=b(T,O.j(E));var D=((0<T.g.length?T.g[0]:T.h)>>>0).toString(A);if(T=O,w(T))return D+S;for(;6>D.length;)D="0"+D;S=D+S}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function w(A){if(A.h!=0)return!1;for(var E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function P(A){return A.h==-1}t.l=function(A){return A=b(this,A),P(A)?-1:w(A)?0:1};function R(A){for(var E=A.g.length,T=[],S=0;S<E;S++)T[S]=~A.g[S];return new o(T,~A.h).add(p)}t.abs=function(){return P(this)?R(this):this},t.add=function(A){for(var E=Math.max(this.g.length,A.g.length),T=[],S=0,O=0;O<=E;O++){var D=S+(this.i(O)&65535)+(A.i(O)&65535),C=(D>>>16)+(this.i(O)>>>16)+(A.i(O)>>>16);S=C>>>16,D&=65535,C&=65535,T[O]=C<<16|D}return new o(T,T[T.length-1]&-2147483648?-1:0)};function b(A,E){return A.add(R(E))}t.j=function(A){if(w(this)||w(A))return f;if(P(this))return P(A)?R(this).j(R(A)):R(R(this).j(A));if(P(A))return R(this.j(R(A)));if(0>this.l(y)&&0>A.l(y))return u(this.m()*A.m());for(var E=this.g.length+A.g.length,T=[],S=0;S<2*E;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var O=0;O<A.g.length;O++){var D=this.i(S)>>>16,C=this.i(S)&65535,nt=A.i(O)>>>16,gt=A.i(O)&65535;T[2*S+2*O]+=C*gt,k(T,2*S+2*O),T[2*S+2*O+1]+=D*gt,k(T,2*S+2*O+1),T[2*S+2*O+1]+=C*nt,k(T,2*S+2*O+1),T[2*S+2*O+2]+=D*nt,k(T,2*S+2*O+2)}for(S=0;S<E;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=E;S<2*E;S++)T[S]=0;return new o(T,0)};function k(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function L(A,E){this.g=A,this.h=E}function N(A,E){if(w(E))throw Error("division by zero");if(w(A))return new L(f,f);if(P(A))return E=N(R(A),E),new L(R(E.g),R(E.h));if(P(E))return E=N(A,R(E)),new L(R(E.g),E.h);if(30<A.g.length){if(P(A)||P(E))throw Error("slowDivide_ only works with positive integers.");for(var T=p,S=E;0>=S.l(A);)T=H(T),S=H(S);var O=$(T,1),D=$(S,1);for(S=$(S,2),T=$(T,2);!w(S);){var C=D.add(S);0>=C.l(A)&&(O=O.add(T),D=C),S=$(S,1),T=$(T,1)}return E=b(A,O.j(E)),new L(O,E)}for(O=f;0<=A.l(E);){for(T=Math.max(1,Math.floor(A.m()/E.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),D=u(T),C=D.j(E);P(C)||0<C.l(A);)T-=S,D=u(T),C=D.j(E);w(D)&&(D=p),O=O.add(D),A=b(A,C)}return new L(O,A)}t.A=function(A){return N(this,A).h},t.and=function(A){for(var E=Math.max(this.g.length,A.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)&A.i(S);return new o(T,this.h&A.h)},t.or=function(A){for(var E=Math.max(this.g.length,A.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)|A.i(S);return new o(T,this.h|A.h)},t.xor=function(A){for(var E=Math.max(this.g.length,A.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)^A.i(S);return new o(T,this.h^A.h)};function H(A){for(var E=A.g.length+1,T=[],S=0;S<E;S++)T[S]=A.i(S)<<1|A.i(S-1)>>>31;return new o(T,A.h)}function $(A,E){var T=E>>5;E%=32;for(var S=A.g.length-T,O=[],D=0;D<S;D++)O[D]=0<E?A.i(D+T)>>>E|A.i(D+T+1)<<32-E:A.i(D+T);return new o(O,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,II=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,ks=o}).apply(typeof qg<"u"?qg:typeof self<"u"?self:typeof window<"u"?window:{});var pl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wI,Oo,bI,Nl,hd,AI,CI,RI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,_){return l==Array.prototype||l==Object.prototype||(l[d]=_.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof pl=="object"&&pl];for(var d=0;d<l.length;++d){var _=l[d];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function s(l,d){if(d)e:{var _=r;l=l.split(".");for(var v=0;v<l.length-1;v++){var V=l[v];if(!(V in _))break e;_=_[V]}l=l[l.length-1],v=_[l],d=d(v),d!=v&&d!=null&&e(_,l,{configurable:!0,writable:!0,value:d})}}function i(l,d){l instanceof String&&(l+="");var _=0,v=!1,V={next:function(){if(!v&&_<l.length){var j=_++;return{value:d(j,l[j]),done:!1}}return v=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(l){return l||function(){return i(this,function(d,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function c(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function u(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function h(l,d,_){return l.call.apply(l.bind,arguments)}function f(l,d,_){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,v),l.apply(d,V)}}return function(){return l.apply(d,arguments)}}function p(l,d,_){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function y(l,d){var _=Array.prototype.slice.call(arguments,1);return function(){var v=_.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function w(l,d){function _(){}_.prototype=d.prototype,l.aa=d.prototype,l.prototype=new _,l.prototype.constructor=l,l.Qb=function(v,V,j){for(var ne=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)ne[tt-2]=arguments[tt];return d.prototype[V].apply(v,ne)}}function P(l){const d=l.length;if(0<d){const _=Array(d);for(let v=0;v<d;v++)_[v]=l[v];return _}return[]}function R(l,d){for(let _=1;_<arguments.length;_++){const v=arguments[_];if(c(v)){const V=l.length||0,j=v.length||0;l.length=V+j;for(let ne=0;ne<j;ne++)l[V+ne]=v[ne]}else l.push(v)}}class b{constructor(d,_){this.i=d,this.j=_,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function k(l){return/^[\s\xa0]*$/.test(l)}function L(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function N(l){return N[" "](l),l}N[" "]=function(){};var H=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function $(l,d,_){for(const v in l)d.call(_,l[v],v,l)}function A(l,d){for(const _ in l)d.call(void 0,l[_],_,l)}function E(l){const d={};for(const _ in l)d[_]=l[_];return d}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,d){let _,v;for(let V=1;V<arguments.length;V++){v=arguments[V];for(_ in v)l[_]=v[_];for(let j=0;j<T.length;j++)_=T[j],Object.prototype.hasOwnProperty.call(v,_)&&(l[_]=v[_])}}function O(l){var d=1;l=l.split(":");const _=[];for(;0<d&&l.length;)_.push(l.shift()),d--;return l.length&&_.push(l.join(":")),_}function D(l){a.setTimeout(()=>{throw l},0)}function C(){var l=yt;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class nt{constructor(){this.h=this.g=null}add(d,_){const v=gt.get();v.set(d,_),this.h?this.h.next=v:this.g=v,this.h=v}}var gt=new b(()=>new Ne,l=>l.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(d,_){this.h=d,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,Se=!1,yt=new nt,Ct=()=>{const l=a.Promise.resolve(void 0);fe=()=>{l.then(rt)}};var rt=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(_){D(_)}var d=gt;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}Se=!1};function Oe(){this.s=this.s,this.C=this.C}Oe.prototype.s=!1,Oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var Je=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const _=()=>{};a.addEventListener("test",_,d),a.removeEventListener("test",_,d)}catch{}return l}();function Yt(l,d){if(Te.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var _=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(H){e:{try{N(d.nodeName);var V=!0;break e}catch{}V=!1}V||(d=null)}}else _=="mouseover"?d=l.fromElement:_=="mouseout"&&(d=l.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ft[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Yt.aa.h.call(this)}}w(Yt,Te);var ft={2:"touch",3:"pen",4:"mouse"};Yt.prototype.h=function(){Yt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var z="closure_listenable_"+(1e6*Math.random()|0),se=0;function te(l,d,_,v,V){this.listener=l,this.proxy=null,this.src=d,this.type=_,this.capture=!!v,this.ha=V,this.key=++se,this.da=this.fa=!1}function ae(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ke(l){this.src=l,this.g={},this.h=0}ke.prototype.add=function(l,d,_,v,V){var j=l.toString();l=this.g[j],l||(l=this.g[j]=[],this.h++);var ne=g(l,d,v,V);return-1<ne?(d=l[ne],_||(d.fa=!1)):(d=new te(d,this.src,j,!!v,V),d.fa=_,l.push(d)),d};function Fe(l,d){var _=d.type;if(_ in l.g){var v=l.g[_],V=Array.prototype.indexOf.call(v,d,void 0),j;(j=0<=V)&&Array.prototype.splice.call(v,V,1),j&&(ae(d),l.g[_].length==0&&(delete l.g[_],l.h--))}}function g(l,d,_,v){for(var V=0;V<l.length;++V){var j=l[V];if(!j.da&&j.listener==d&&j.capture==!!_&&j.ha==v)return V}return-1}var m="closure_lm_"+(1e6*Math.random()|0),I={};function x(l,d,_,v,V){if(v&&v.once)return Z(l,d,_,v,V);if(Array.isArray(d)){for(var j=0;j<d.length;j++)x(l,d[j],_,v,V);return null}return _=U(_),l&&l[z]?l.K(d,_,u(v)?!!v.capture:!!v,V):F(l,d,_,!1,v,V)}function F(l,d,_,v,V,j){if(!d)throw Error("Invalid event type");var ne=u(V)?!!V.capture:!!V,tt=pe(l);if(tt||(l[m]=tt=new ke(l)),_=tt.add(d,_,v,ne,j),_.proxy)return _;if(v=G(),_.proxy=v,v.src=l,v.listener=_,l.addEventListener)Je||(V=ne),V===void 0&&(V=!1),l.addEventListener(d.toString(),v,V);else if(l.attachEvent)l.attachEvent(K(d.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return _}function G(){function l(_){return d.call(l.src,l.listener,_)}const d=ce;return l}function Z(l,d,_,v,V){if(Array.isArray(d)){for(var j=0;j<d.length;j++)Z(l,d[j],_,v,V);return null}return _=U(_),l&&l[z]?l.L(d,_,u(v)?!!v.capture:!!v,V):F(l,d,_,!0,v,V)}function X(l,d,_,v,V){if(Array.isArray(d))for(var j=0;j<d.length;j++)X(l,d[j],_,v,V);else v=u(v)?!!v.capture:!!v,_=U(_),l&&l[z]?(l=l.i,d=String(d).toString(),d in l.g&&(j=l.g[d],_=g(j,_,v,V),-1<_&&(ae(j[_]),Array.prototype.splice.call(j,_,1),j.length==0&&(delete l.g[d],l.h--)))):l&&(l=pe(l))&&(d=l.g[d.toString()],l=-1,d&&(l=g(d,_,v,V)),(_=-1<l?d[l]:null)&&ee(_))}function ee(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[z])Fe(d.i,l);else{var _=l.type,v=l.proxy;d.removeEventListener?d.removeEventListener(_,v,l.capture):d.detachEvent?d.detachEvent(K(_),v):d.addListener&&d.removeListener&&d.removeListener(v),(_=pe(d))?(Fe(_,l),_.h==0&&(_.src=null,d[m]=null)):ae(l)}}}function K(l){return l in I?I[l]:I[l]="on"+l}function ce(l,d){if(l.da)l=!0;else{d=new Yt(d,this);var _=l.listener,v=l.ha||l.src;l.fa&&ee(l),l=_.call(v,d)}return l}function pe(l){return l=l[m],l instanceof ke?l:null}var re="__closure_events_fn_"+(1e9*Math.random()>>>0);function U(l){return typeof l=="function"?l:(l[re]||(l[re]=function(d){return l.handleEvent(d)}),l[re])}function B(){Oe.call(this),this.i=new ke(this),this.M=this,this.F=null}w(B,Oe),B.prototype[z]=!0,B.prototype.removeEventListener=function(l,d,_,v){X(this,l,d,_,v)};function le(l,d){var _,v=l.F;if(v)for(_=[];v;v=v.F)_.push(v);if(l=l.M,v=d.type||d,typeof d=="string")d=new Te(d,l);else if(d instanceof Te)d.target=d.target||l;else{var V=d;d=new Te(v,l),S(d,V)}if(V=!0,_)for(var j=_.length-1;0<=j;j--){var ne=d.g=_[j];V=ve(ne,v,!0,d)&&V}if(ne=d.g=l,V=ve(ne,v,!0,d)&&V,V=ve(ne,v,!1,d)&&V,_)for(j=0;j<_.length;j++)ne=d.g=_[j],V=ve(ne,v,!1,d)&&V}B.prototype.N=function(){if(B.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var _=l.g[d],v=0;v<_.length;v++)ae(_[v]);delete l.g[d],l.h--}}this.F=null},B.prototype.K=function(l,d,_,v){return this.i.add(String(l),d,!1,_,v)},B.prototype.L=function(l,d,_,v){return this.i.add(String(l),d,!0,_,v)};function ve(l,d,_,v){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var V=!0,j=0;j<d.length;++j){var ne=d[j];if(ne&&!ne.da&&ne.capture==_){var tt=ne.listener,Bt=ne.ha||ne.src;ne.fa&&Fe(l.i,ne),V=tt.call(Bt,v)!==!1&&V}}return V&&!v.defaultPrevented}function qe(l,d,_){if(typeof l=="function")_&&(l=p(l,_));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function Rt(l){l.g=qe(()=>{l.g=null,l.i&&(l.i=!1,Rt(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class on extends Oe{constructor(d,_){super(),this.m=d,this.l=_,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Rt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wn(l){Oe.call(this),this.h=l,this.g={}}w(Wn,Oe);var or=[];function oo(l){$(l.g,function(d,_){this.g.hasOwnProperty(_)&&ee(d)},l),l.g={}}Wn.prototype.N=function(){Wn.aa.N.call(this),oo(this)},Wn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $t=a.JSON.stringify,In=a.JSON.parse,Ba=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function gu(){}gu.prototype.h=null;function pp(l){return l.h||(l.h=l.i())}function _p(){}var ao={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yu(){Te.call(this,"d")}w(yu,Te);function vu(){Te.call(this,"c")}w(vu,Te);var fs={},mp=null;function ja(){return mp=mp||new B}fs.La="serverreachability";function gp(l){Te.call(this,fs.La,l)}w(gp,Te);function lo(l){const d=ja();le(d,new gp(d))}fs.STAT_EVENT="statevent";function yp(l,d){Te.call(this,fs.STAT_EVENT,l),this.stat=d}w(yp,Te);function an(l){const d=ja();le(d,new yp(d,l))}fs.Ma="timingevent";function vp(l,d){Te.call(this,fs.Ma,l),this.size=d}w(vp,Te);function co(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function uo(){this.g=!0}uo.prototype.xa=function(){this.g=!1};function iw(l,d,_,v,V,j){l.info(function(){if(l.g)if(j)for(var ne="",tt=j.split("&"),Bt=0;Bt<tt.length;Bt++){var ze=tt[Bt].split("=");if(1<ze.length){var Qt=ze[0];ze=ze[1];var Xt=Qt.split("_");ne=2<=Xt.length&&Xt[1]=="type"?ne+(Qt+"="+ze+"&"):ne+(Qt+"=redacted&")}}else ne=null;else ne=j;return"XMLHTTP REQ ("+v+") [attempt "+V+"]: "+d+`
`+_+`
`+ne})}function ow(l,d,_,v,V,j,ne){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+V+"]: "+d+`
`+_+`
`+j+" "+ne})}function Ys(l,d,_,v){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+lw(l,_)+(v?" "+v:"")})}function aw(l,d){l.info(function(){return"TIMEOUT: "+d})}uo.prototype.info=function(){};function lw(l,d){if(!l.g)return d;if(!d)return null;try{var _=JSON.parse(d);if(_){for(l=0;l<_.length;l++)if(Array.isArray(_[l])){var v=_[l];if(!(2>v.length)){var V=v[1];if(Array.isArray(V)&&!(1>V.length)){var j=V[0];if(j!="noop"&&j!="stop"&&j!="close")for(var ne=1;ne<V.length;ne++)V[ne]=""}}}}return $t(_)}catch{return d}}var Wa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ep={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Eu;function Ha(){}w(Ha,gu),Ha.prototype.g=function(){return new XMLHttpRequest},Ha.prototype.i=function(){return{}},Eu=new Ha;function Pr(l,d,_,v){this.j=l,this.i=d,this.l=_,this.R=v||1,this.U=new Wn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tp}function Tp(){this.i=null,this.g="",this.h=!1}var Ip={},Tu={};function Iu(l,d,_){l.L=1,l.v=Ka(ar(d)),l.m=_,l.P=!0,wp(l,null)}function wp(l,d){l.F=Date.now(),za(l),l.A=ar(l.v);var _=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),Vp(_.i,"t",v),l.C=0,_=l.j.J,l.h=new Tp,l.g=t_(l.j,_?d:null,!l.m),0<l.O&&(l.M=new on(p(l.Y,l,l.g),l.O)),d=l.U,_=l.g,v=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(or[0]=V.toString()),V=or);for(var j=0;j<V.length;j++){var ne=x(_,V[j],v||d.handleEvent,!1,d.h||d);if(!ne)break;d.g[ne.key]=ne}d=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),lo(),iw(l.i,l.u,l.A,l.l,l.R,l.m)}Pr.prototype.ca=function(l){l=l.target;const d=this.M;d&&lr(l)==3?d.j():this.Y(l)},Pr.prototype.Y=function(l){try{if(l==this.g)e:{const Xt=lr(this.g);var d=this.g.Ba();const Js=this.g.Z();if(!(3>Xt)&&(Xt!=3||this.g&&(this.h.h||this.g.oa()||Hp(this.g)))){this.J||Xt!=4||d==7||(d==8||0>=Js?lo(3):lo(2)),wu(this);var _=this.g.Z();this.X=_;t:if(bp(this)){var v=Hp(this.g);l="";var V=v.length,j=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ps(this),ho(this);var ne="";break t}this.h.i=new a.TextDecoder}for(d=0;d<V;d++)this.h.h=!0,l+=this.h.i.decode(v[d],{stream:!(j&&d==V-1)});v.length=0,this.h.g+=l,this.C=0,ne=this.h.g}else ne=this.g.oa();if(this.o=_==200,ow(this.i,this.u,this.A,this.l,this.R,Xt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,Bt=this.g;if((tt=Bt.g?Bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(tt)){var ze=tt;break t}}ze=null}if(_=ze)Ys(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bu(this,_);else{this.o=!1,this.s=3,an(12),ps(this),ho(this);break e}}if(this.P){_=!0;let Pn;for(;!this.J&&this.C<ne.length;)if(Pn=cw(this,ne),Pn==Tu){Xt==4&&(this.s=4,an(14),_=!1),Ys(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==Ip){this.s=4,an(15),Ys(this.i,this.l,ne,"[Invalid Chunk]"),_=!1;break}else Ys(this.i,this.l,Pn,null),bu(this,Pn);if(bp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xt!=4||ne.length!=0||this.h.h||(this.s=1,an(16),_=!1),this.o=this.o&&_,!_)Ys(this.i,this.l,ne,"[Invalid Chunked Response]"),ps(this),ho(this);else if(0<ne.length&&!this.W){this.W=!0;var Qt=this.j;Qt.g==this&&Qt.ba&&!Qt.M&&(Qt.j.info("Great, no buffering proxy detected. Bytes received: "+ne.length),ku(Qt),Qt.M=!0,an(11))}}else Ys(this.i,this.l,ne,null),bu(this,ne);Xt==4&&ps(this),this.o&&!this.J&&(Xt==4?Xp(this.j,this):(this.o=!1,za(this)))}else Cw(this.g),_==400&&0<ne.indexOf("Unknown SID")?(this.s=3,an(12)):(this.s=0,an(13)),ps(this),ho(this)}}}catch{}finally{}};function bp(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function cw(l,d){var _=l.C,v=d.indexOf(`
`,_);return v==-1?Tu:(_=Number(d.substring(_,v)),isNaN(_)?Ip:(v+=1,v+_>d.length?Tu:(d=d.slice(v,v+_),l.C=v+_,d)))}Pr.prototype.cancel=function(){this.J=!0,ps(this)};function za(l){l.S=Date.now()+l.I,Ap(l,l.I)}function Ap(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=co(p(l.ba,l),d)}function wu(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Pr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(aw(this.i,this.A),this.L!=2&&(lo(),an(17)),ps(this),this.s=2,ho(this)):Ap(this,this.S-l)};function ho(l){l.j.G==0||l.J||Xp(l.j,l)}function ps(l){wu(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,oo(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function bu(l,d){try{var _=l.j;if(_.G!=0&&(_.g==l||Au(_.h,l))){if(!l.K&&Au(_.h,l)&&_.G==3){try{var v=_.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var V=v;if(V[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<l.F)el(_),Ja(_);else break e;Pu(_),an(18)}}else _.za=V[1],0<_.za-_.T&&37500>V[2]&&_.F&&_.v==0&&!_.C&&(_.C=co(p(_.Za,_),6e3));if(1>=Sp(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else ms(_,11)}else if((l.K||_.g==l)&&el(_),!k(d))for(V=_.Da.g.parse(d),d=0;d<V.length;d++){let ze=V[d];if(_.T=ze[0],ze=ze[1],_.G==2)if(ze[0]=="c"){_.K=ze[1],_.ia=ze[2];const Qt=ze[3];Qt!=null&&(_.la=Qt,_.j.info("VER="+_.la));const Xt=ze[4];Xt!=null&&(_.Aa=Xt,_.j.info("SVER="+_.Aa));const Js=ze[5];Js!=null&&typeof Js=="number"&&0<Js&&(v=1.5*Js,_.L=v,_.j.info("backChannelRequestTimeoutMs_="+v)),v=_;const Pn=l.g;if(Pn){const nl=Pn.g?Pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nl){var j=v.h;j.g||nl.indexOf("spdy")==-1&&nl.indexOf("quic")==-1&&nl.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Cu(j,j.h),j.h=null))}if(v.D){const Nu=Pn.g?Pn.g.getResponseHeader("X-HTTP-Session-Id"):null;Nu&&(v.ya=Nu,ot(v.I,v.D,Nu))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-l.F,_.j.info("Handshake RTT: "+_.R+"ms")),v=_;var ne=l;if(v.qa=e_(v,v.J?v.ia:null,v.W),ne.K){Pp(v.h,ne);var tt=ne,Bt=v.L;Bt&&(tt.I=Bt),tt.B&&(wu(tt),za(tt)),v.g=ne}else Yp(v);0<_.i.length&&Za(_)}else ze[0]!="stop"&&ze[0]!="close"||ms(_,7);else _.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?ms(_,7):Su(_):ze[0]!="noop"&&_.l&&_.l.ta(ze),_.v=0)}}lo(4)}catch{}}var uw=class{constructor(l,d){this.g=l,this.map=d}};function Cp(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Rp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Sp(l){return l.h?1:l.g?l.g.size:0}function Au(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function Cu(l,d){l.g?l.g.add(d):l.h=d}function Pp(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}Cp.prototype.cancel=function(){if(this.i=kp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function kp(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const _ of l.g.values())d=d.concat(_.D);return d}return P(l.i)}function hw(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var d=[],_=l.length,v=0;v<_;v++)d.push(l[v]);return d}d=[],_=0;for(v in l)d[_++]=l[v];return d}function dw(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var d=[];l=l.length;for(var _=0;_<l;_++)d.push(_);return d}d=[],_=0;for(const v in l)d[_++]=v;return d}}}function Np(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var _=dw(l),v=hw(l),V=v.length,j=0;j<V;j++)d.call(void 0,v[j],_&&_[j],l)}var Op=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fw(l,d){if(l){l=l.split("&");for(var _=0;_<l.length;_++){var v=l[_].indexOf("="),V=null;if(0<=v){var j=l[_].substring(0,v);V=l[_].substring(v+1)}else j=l[_];d(j,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function _s(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof _s){this.h=l.h,Ga(this,l.j),this.o=l.o,this.g=l.g,qa(this,l.s),this.l=l.l;var d=l.i,_=new _o;_.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),Lp(this,_),this.m=l.m}else l&&(d=String(l).match(Op))?(this.h=!1,Ga(this,d[1]||"",!0),this.o=fo(d[2]||""),this.g=fo(d[3]||"",!0),qa(this,d[4]),this.l=fo(d[5]||"",!0),Lp(this,d[6]||"",!0),this.m=fo(d[7]||"")):(this.h=!1,this.i=new _o(null,this.h))}_s.prototype.toString=function(){var l=[],d=this.j;d&&l.push(po(d,Dp,!0),":");var _=this.g;return(_||d=="file")&&(l.push("//"),(d=this.o)&&l.push(po(d,Dp,!0),"@"),l.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&l.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(po(_,_.charAt(0)=="/"?mw:_w,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",po(_,yw)),l.join("")};function ar(l){return new _s(l)}function Ga(l,d,_){l.j=_?fo(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function qa(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Lp(l,d,_){d instanceof _o?(l.i=d,vw(l.i,l.h)):(_||(d=po(d,gw)),l.i=new _o(d,l.h))}function ot(l,d,_){l.i.set(d,_)}function Ka(l){return ot(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function fo(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function po(l,d,_){return typeof l=="string"?(l=encodeURI(l).replace(d,pw),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function pw(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Dp=/[#\/\?@]/g,_w=/[#\?:]/g,mw=/[#\?]/g,gw=/[#\?@]/g,yw=/#/g;function _o(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function kr(l){l.g||(l.g=new Map,l.h=0,l.i&&fw(l.i,function(d,_){l.add(decodeURIComponent(d.replace(/\+/g," ")),_)}))}t=_o.prototype,t.add=function(l,d){kr(this),this.i=null,l=Qs(this,l);var _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(d),this.h+=1,this};function Mp(l,d){kr(l),d=Qs(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function xp(l,d){return kr(l),d=Qs(l,d),l.g.has(d)}t.forEach=function(l,d){kr(this),this.g.forEach(function(_,v){_.forEach(function(V){l.call(d,V,v,this)},this)},this)},t.na=function(){kr(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),_=[];for(let v=0;v<d.length;v++){const V=l[v];for(let j=0;j<V.length;j++)_.push(d[v])}return _},t.V=function(l){kr(this);let d=[];if(typeof l=="string")xp(this,l)&&(d=d.concat(this.g.get(Qs(this,l))));else{l=Array.from(this.g.values());for(let _=0;_<l.length;_++)d=d.concat(l[_])}return d},t.set=function(l,d){return kr(this),this.i=null,l=Qs(this,l),xp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},t.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Vp(l,d,_){Mp(l,d),0<_.length&&(l.i=null,l.g.set(Qs(l,d),P(_)),l.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var _=0;_<d.length;_++){var v=d[_];const j=encodeURIComponent(String(v)),ne=this.V(v);for(v=0;v<ne.length;v++){var V=j;ne[v]!==""&&(V+="="+encodeURIComponent(String(ne[v]))),l.push(V)}}return this.i=l.join("&")};function Qs(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function vw(l,d){d&&!l.j&&(kr(l),l.i=null,l.g.forEach(function(_,v){var V=v.toLowerCase();v!=V&&(Mp(this,v),Vp(this,V,_))},l)),l.j=d}function Ew(l,d){const _=new uo;if(a.Image){const v=new Image;v.onload=y(Nr,_,"TestLoadImage: loaded",!0,d,v),v.onerror=y(Nr,_,"TestLoadImage: error",!1,d,v),v.onabort=y(Nr,_,"TestLoadImage: abort",!1,d,v),v.ontimeout=y(Nr,_,"TestLoadImage: timeout",!1,d,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else d(!1)}function Tw(l,d){const _=new uo,v=new AbortController,V=setTimeout(()=>{v.abort(),Nr(_,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:v.signal}).then(j=>{clearTimeout(V),j.ok?Nr(_,"TestPingServer: ok",!0,d):Nr(_,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(V),Nr(_,"TestPingServer: error",!1,d)})}function Nr(l,d,_,v,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),v(_)}catch{}}function Iw(){this.g=new Ba}function ww(l,d,_){const v=_||"";try{Np(l,function(V,j){let ne=V;u(V)&&(ne=$t(V)),d.push(v+j+"="+encodeURIComponent(ne))})}catch(V){throw d.push(v+"type="+encodeURIComponent("_badmap")),V}}function Ya(l){this.l=l.Ub||null,this.j=l.eb||!1}w(Ya,gu),Ya.prototype.g=function(){return new Qa(this.l,this.j)},Ya.prototype.i=function(l){return function(){return l}}({});function Qa(l,d){B.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Qa,B),t=Qa.prototype,t.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,go(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,go(this)),this.g&&(this.readyState=3,go(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?mo(this):go(this),this.readyState==3&&Fp(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,mo(this))},t.Qa=function(l){this.g&&(this.response=l,mo(this))},t.ga=function(){this.g&&mo(this)};function mo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,go(l)}t.setRequestHeader=function(l,d){this.u.append(l,d)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var _=d.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=d.next();return l.join(`\r
`)};function go(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Up(l){let d="";return $(l,function(_,v){d+=v,d+=":",d+=_,d+=`\r
`}),d}function Ru(l,d,_){e:{for(v in _){var v=!1;break e}v=!0}v||(_=Up(_),typeof l=="string"?_!=null&&encodeURIComponent(String(_)):ot(l,d,_))}function vt(l){B.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(vt,B);var bw=/^https?$/i,Aw=["POST","PUT"];t=vt.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,d,_,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Eu.g(),this.v=this.o?pp(this.o):pp(Eu),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(j){$p(this,j);return}if(l=_||"",_=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var V in v)_.set(V,v[V]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const j of v.keys())_.set(j,v.get(j));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(_.keys()).find(j=>j.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Aw,d,void 0))||v||V||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,ne]of _)this.g.setRequestHeader(j,ne);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wp(this),this.u=!0,this.g.send(l),this.u=!1}catch(j){$p(this,j)}};function $p(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,Bp(l),Xa(l)}function Bp(l){l.A||(l.A=!0,le(l,"complete"),le(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,le(this,"complete"),le(this,"abort"),Xa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xa(this,!0)),vt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?jp(this):this.bb())},t.bb=function(){jp(this)};function jp(l){if(l.h&&typeof o<"u"&&(!l.v[1]||lr(l)!=4||l.Z()!=2)){if(l.u&&lr(l)==4)qe(l.Ea,0,l);else if(le(l,"readystatechange"),lr(l)==4){l.h=!1;try{const ne=l.Z();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var _;if(!(_=d)){var v;if(v=ne===0){var V=String(l.D).match(Op)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),v=!bw.test(V?V.toLowerCase():"")}_=v}if(_)le(l,"complete"),le(l,"success");else{l.m=6;try{var j=2<lr(l)?l.g.statusText:""}catch{j=""}l.l=j+" ["+l.Z()+"]",Bp(l)}}finally{Xa(l)}}}}function Xa(l,d){if(l.g){Wp(l);const _=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||le(l,"ready");try{_.onreadystatechange=v}catch{}}}function Wp(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function lr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),In(d)}};function Hp(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Cw(l){const d={};l=(l.g&&2<=lr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(k(l[v]))continue;var _=O(l[v]);const V=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const j=d[V]||[];d[V]=j,j.push(_)}A(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yo(l,d,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||d}function zp(l){this.Aa=0,this.i=[],this.j=new uo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yo("baseRetryDelayMs",5e3,l),this.cb=yo("retryDelaySeedMs",1e4,l),this.Wa=yo("forwardChannelMaxRetries",2,l),this.wa=yo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Cp(l&&l.concurrentRequestLimit),this.Da=new Iw,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=zp.prototype,t.la=8,t.G=1,t.connect=function(l,d,_,v){an(0),this.W=l,this.H=d||{},_&&v!==void 0&&(this.H.OSID=_,this.H.OAID=v),this.F=this.X,this.I=e_(this,null,this.W),Za(this)};function Su(l){if(Gp(l),l.G==3){var d=l.U++,_=ar(l.I);if(ot(_,"SID",l.K),ot(_,"RID",d),ot(_,"TYPE","terminate"),vo(l,_),d=new Pr(l,l.j,d),d.L=2,d.v=Ka(ar(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=d.v,_=!0),_||(d.g=t_(d.j,null),d.g.ea(d.v)),d.F=Date.now(),za(d)}Zp(l)}function Ja(l){l.g&&(ku(l),l.g.cancel(),l.g=null)}function Gp(l){Ja(l),l.u&&(a.clearTimeout(l.u),l.u=null),el(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Za(l){if(!Rp(l.h)&&!l.s){l.s=!0;var d=l.Ga;fe||Ct(),Se||(fe(),Se=!0),yt.add(d,l),l.B=0}}function Rw(l,d){return Sp(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=co(p(l.Ga,l,d),Jp(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const V=new Pr(this,this.j,l);let j=this.o;if(this.S&&(j?(j=E(j),S(j,this.S)):j=this.S),this.m!==null||this.O||(V.H=j,j=null),this.P)e:{for(var d=0,_=0;_<this.i.length;_++){t:{var v=this.i[_];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=_;break e}if(d===4096||_===this.i.length-1){d=_+1;break e}}d=1e3}else d=1e3;d=Kp(this,V,d),_=ar(this.I),ot(_,"RID",l),ot(_,"CVER",22),this.D&&ot(_,"X-HTTP-Session-Id",this.D),vo(this,_),j&&(this.O?d="headers="+encodeURIComponent(String(Up(j)))+"&"+d:this.m&&Ru(_,this.m,j)),Cu(this.h,V),this.Ua&&ot(_,"TYPE","init"),this.P?(ot(_,"$req",d),ot(_,"SID","null"),V.T=!0,Iu(V,_,null)):Iu(V,_,d),this.G=2}}else this.G==3&&(l?qp(this,l):this.i.length==0||Rp(this.h)||qp(this))};function qp(l,d){var _;d?_=d.l:_=l.U++;const v=ar(l.I);ot(v,"SID",l.K),ot(v,"RID",_),ot(v,"AID",l.T),vo(l,v),l.m&&l.o&&Ru(v,l.m,l.o),_=new Pr(l,l.j,_,l.B+1),l.m===null&&(_.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Kp(l,_,1e3),_.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Cu(l.h,_),Iu(_,v,d)}function vo(l,d){l.H&&$(l.H,function(_,v){ot(d,v,_)}),l.l&&Np({},function(_,v){ot(d,v,_)})}function Kp(l,d,_){_=Math.min(l.i.length,_);var v=l.l?p(l.l.Na,l.l,l):null;e:{var V=l.i;let j=-1;for(;;){const ne=["count="+_];j==-1?0<_?(j=V[0].g,ne.push("ofs="+j)):j=0:ne.push("ofs="+j);let tt=!0;for(let Bt=0;Bt<_;Bt++){let ze=V[Bt].g;const Qt=V[Bt].map;if(ze-=j,0>ze)j=Math.max(0,V[Bt].g-100),tt=!1;else try{ww(Qt,ne,"req"+ze+"_")}catch{v&&v(Qt)}}if(tt){v=ne.join("&");break e}}}return l=l.i.splice(0,_),d.D=l,v}function Yp(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;fe||Ct(),Se||(fe(),Se=!0),yt.add(d,l),l.v=0}}function Pu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=co(p(l.Fa,l),Jp(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Qp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=co(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,an(10),Ja(this),Qp(this))};function ku(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Qp(l){l.g=new Pr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=ar(l.qa);ot(d,"RID","rpc"),ot(d,"SID",l.K),ot(d,"AID",l.T),ot(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&ot(d,"TO",l.ja),ot(d,"TYPE","xmlhttp"),vo(l,d),l.m&&l.o&&Ru(d,l.m,l.o),l.L&&(l.g.I=l.L);var _=l.g;l=l.ia,_.L=1,_.v=Ka(ar(d)),_.m=null,_.P=!0,wp(_,l)}t.Za=function(){this.C!=null&&(this.C=null,Ja(this),Pu(this),an(19))};function el(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Xp(l,d){var _=null;if(l.g==d){el(l),ku(l),l.g=null;var v=2}else if(Au(l.h,d))_=d.D,Pp(l.h,d),v=1;else return;if(l.G!=0){if(d.o)if(v==1){_=d.m?d.m.length:0,d=Date.now()-d.F;var V=l.B;v=ja(),le(v,new vp(v,_)),Za(l)}else Yp(l);else if(V=d.s,V==3||V==0&&0<d.X||!(v==1&&Rw(l,d)||v==2&&Pu(l)))switch(_&&0<_.length&&(d=l.h,d.i=d.i.concat(_)),V){case 1:ms(l,5);break;case 4:ms(l,10);break;case 3:ms(l,6);break;default:ms(l,2)}}}function Jp(l,d){let _=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(_*=2),_*d}function ms(l,d){if(l.j.info("Error code "+d),d==2){var _=p(l.fb,l),v=l.Xa;const V=!v;v=new _s(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ga(v,"https"),Ka(v),V?Ew(v.toString(),_):Tw(v.toString(),_)}else an(2);l.G=0,l.l&&l.l.sa(d),Zp(l),Gp(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),an(2)):(this.j.info("Failed to ping google.com"),an(1))};function Zp(l){if(l.G=0,l.ka=[],l.l){const d=kp(l.h);(d.length!=0||l.i.length!=0)&&(R(l.ka,d),R(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function e_(l,d,_){var v=_ instanceof _s?ar(_):new _s(_);if(v.g!="")d&&(v.g=d+"."+v.g),qa(v,v.s);else{var V=a.location;v=V.protocol,d=d?d+"."+V.hostname:V.hostname,V=+V.port;var j=new _s(null);v&&Ga(j,v),d&&(j.g=d),V&&qa(j,V),_&&(j.l=_),v=j}return _=l.D,d=l.ya,_&&d&&ot(v,_,d),ot(v,"VER",l.la),vo(l,v),v}function t_(l,d,_){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new vt(new Ya({eb:_})):new vt(l.pa),d.Ha(l.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function n_(){}t=n_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function tl(){}tl.prototype.g=function(l,d){return new _n(l,d)};function _n(l,d){B.call(this),this.g=new zp(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!k(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!k(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new Xs(this)}w(_n,B),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Su(this.g)},_n.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.u&&(_={},_.__data__=$t(l),l=_);d.i.push(new uw(d.Ya++,l)),d.G==3&&Za(d)},_n.prototype.N=function(){this.g.l=null,delete this.j,Su(this.g),delete this.g,_n.aa.N.call(this)};function r_(l){yu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const _ in d){l=_;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}w(r_,yu);function s_(){vu.call(this),this.status=1}w(s_,vu);function Xs(l){this.g=l}w(Xs,n_),Xs.prototype.ua=function(){le(this.g,"a")},Xs.prototype.ta=function(l){le(this.g,new r_(l))},Xs.prototype.sa=function(l){le(this.g,new s_)},Xs.prototype.ra=function(){le(this.g,"b")},tl.prototype.createWebChannel=tl.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,RI=function(){return new tl},CI=function(){return ja()},AI=fs,hd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wa.NO_ERROR=0,Wa.TIMEOUT=8,Wa.HTTP_ERROR=6,Nl=Wa,Ep.COMPLETE="complete",bI=Ep,_p.EventType=ao,ao.OPEN="a",ao.CLOSE="b",ao.ERROR="c",ao.MESSAGE="d",B.prototype.listen=B.prototype.K,Oo=_p,vt.prototype.listenOnce=vt.prototype.L,vt.prototype.getLastError=vt.prototype.Ka,vt.prototype.getLastErrorCode=vt.prototype.Ba,vt.prototype.getStatus=vt.prototype.Z,vt.prototype.getResponseJson=vt.prototype.Oa,vt.prototype.getResponseText=vt.prototype.oa,vt.prototype.send=vt.prototype.ea,vt.prototype.setWithCredentials=vt.prototype.Ha,wI=vt}).apply(typeof pl<"u"?pl:typeof self<"u"?self:typeof window<"u"?window:{});const Kg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let to="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Sa("@firebase/firestore");function ii(){return Ms.logLevel}function ue(t,...e){if(Ms.logLevel<=De.DEBUG){const n=e.map(Mf);Ms.debug(`Firestore (${to}): ${t}`,...n)}}function wr(t,...e){if(Ms.logLevel<=De.ERROR){const n=e.map(Mf);Ms.error(`Firestore (${to}): ${t}`,...n)}}function Fi(t,...e){if(Ms.logLevel<=De.WARN){const n=e.map(Mf);Ms.warn(`Firestore (${to}): ${t}`,...n)}}function Mf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t="Unexpected state"){const e=`FIRESTORE (${to}) INTERNAL ASSERTION FAILED: `+t;throw wr(e),new Error(e)}function Qe(t,e){t||we()}function Pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Rr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class v2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zt.UNAUTHENTICATED))}shutdown(){}}class E2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class T2{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string"),new SI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string"),new Zt(e)}}class I2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class w2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new I2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class b2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Qe(this.o===void 0);const r=i=>{i.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Qe(typeof n.token=="string"),this.R=n.token,new b2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=C2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function xe(t,e){return t<e?-1:t>e?1:0}function Ui(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{static now(){return At.fromMillis(Date.now())}static fromDate(e){return At.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new At(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _e(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _e(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new _e(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new At(0,0))}static max(){return new Ae(new At(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(),r===void 0?r=e.length-n:r>e.length-n&&we(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _a.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _a?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class _t extends _a{construct(e,n,r){return new _t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new _t(n)}static emptyPath(){return new _t([])}}const R2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends _a{construct(e,n,r){return new zt(e,n,r)}static isValidIdentifier(e){return R2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new _e(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new _e(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new _e(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new _e(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(n)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(_t.fromString(e))}static fromName(e){return new ye(_t.fromString(e).popFirst(5))}static empty(){return new ye(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _t.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new _t(e.slice()))}}function S2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ae.fromTimestamp(r===1e9?new At(n+1,0):new At(n,r));return new ss(s,ye.empty(),e)}function P2(t){return new ss(t.readTime,t.key,-1)}class ss{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ss(Ae.min(),ye.empty(),-1)}static max(){return new ss(Ae.max(),ye.empty(),-1)}}function k2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class O2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==N2)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function L2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ro(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}eu.oe=-1;function tu(t){return t==null}function cc(t){return t===0&&1/t==-1/0}function D2(t){return typeof t=="number"&&Number.isInteger(t)&&!cc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Yg(e)),e=x2(t.get(n),e);return Yg(e)}function x2(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function Yg(t){return t+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ws(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){this.comparator=e,this.root=n||jt.EMPTY}insert(e,n){return new mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,jt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _l(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _l(this.root,e,this.comparator,!1)}getReverseIterator(){return new _l(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _l(this.root,e,this.comparator,!0)}}class _l{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class jt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??jt.RED,this.left=s??jt.EMPTY,this.right=i??jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new jt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return jt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1;jt.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,n,r,s,i){return this}insert(e,n,r){return new jt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xg(this.data.getIterator())}getIteratorFrom(e){return new Xg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Lt(this.comparator);return n.data=e,n}}class Xg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new Dn([])}unionWith(e){let n=new Lt(zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ui(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new NI("Invalid base64 string: "+i):i}}(e);return new Kt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const V2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function is(t){if(Qe(!!t),typeof t=="string"){let e=0;const n=V2.exec(t);if(Qe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function os(t){return typeof t=="string"?Kt.fromBase64String(t):Kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function nu(t){const e=t.mapValue.fields.__previous_value__;return xf(e)?nu(e):e}function ma(t){const e=is(t.mapValue.fields.__local_write_time__.timestampValue);return new At(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n,r,s,i,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}}class ga{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ga("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ga&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function as(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xf(t)?4:$2(t)?9007199254740991:U2(t)?10:11:we()}function nr(t,e){if(t===e)return!0;const n=as(t);if(n!==as(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ma(t).isEqual(ma(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=is(s.timestampValue),a=is(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return os(s.bytesValue).isEqual(os(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Tt(s.geoPointValue.latitude)===Tt(i.geoPointValue.latitude)&&Tt(s.geoPointValue.longitude)===Tt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Tt(s.integerValue)===Tt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Tt(s.doubleValue),a=Tt(i.doubleValue);return o===a?cc(o)===cc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ui(t.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Qg(o)!==Qg(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!nr(o[c],a[c])))return!1;return!0}(t,e);default:return we()}}function ya(t,e){return(t.values||[]).find(n=>nr(n,e))!==void 0}function $i(t,e){if(t===e)return 0;const n=as(t),r=as(e);if(n!==r)return xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Tt(i.integerValue||i.doubleValue),c=Tt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Jg(t.timestampValue,e.timestampValue);case 4:return Jg(ma(t),ma(e));case 5:return xe(t.stringValue,e.stringValue);case 6:return function(i,o){const a=os(i),c=os(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=xe(a[u],c[u]);if(h!==0)return h}return xe(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=xe(Tt(i.latitude),Tt(o.latitude));return a!==0?a:xe(Tt(i.longitude),Tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Zg(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,c,u,h;const f=i.fields||{},p=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=p.value)===null||c===void 0?void 0:c.arrayValue,P=xe(((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0,((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:Zg(y,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ml.mapValue&&o===ml.mapValue)return 0;if(i===ml.mapValue)return 1;if(o===ml.mapValue)return-1;const a=i.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=xe(c[f],h[f]);if(p!==0)return p;const y=$i(a[c[f]],u[h[f]]);if(y!==0)return y}return xe(c.length,h.length)}(t.mapValue,e.mapValue);default:throw we()}}function Jg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const n=is(t),r=is(e),s=xe(n.seconds,r.seconds);return s!==0?s:xe(n.nanos,r.nanos)}function Zg(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=$i(n[s],r[s]);if(i)return i}return xe(n.length,r.length)}function Bi(t){return dd(t)}function dd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=is(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return os(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ye.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=dd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${dd(n.fields[o])}`;return s+"}"}(t.mapValue):we()}function Ol(t){switch(as(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=nu(t);return e?16+Ol(e):16;case 5:return 2*t.stringValue.length;case 6:return os(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ol(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ws(r.fields,(i,o)=>{s+=i.length+Ol(o)}),s}(t.mapValue);default:throw we()}}function fd(t){return!!t&&"integerValue"in t}function Vf(t){return!!t&&"arrayValue"in t}function ey(t){return!!t&&"nullValue"in t}function ty(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ll(t){return!!t&&"mapValue"in t}function U2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Yo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ws(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Yo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function $2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ll(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yo(n)}setAll(e){let n=zt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Yo(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ll(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ll(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ws(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new bn(Yo(this.value))}}function OI(t){const e=[];return Ws(t.fields,(n,r)=>{const s=new zt([n]);if(Ll(r)){const i=OI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new nn(e,0,Ae.min(),Ae.min(),Ae.min(),bn.empty(),0)}static newFoundDocument(e,n,r,s){return new nn(e,1,n,Ae.min(),r,s,0)}static newNoDocument(e,n){return new nn(e,2,n,Ae.min(),Ae.min(),bn.empty(),0)}static newUnknownDocument(e,n){return new nn(e,3,n,Ae.min(),Ae.min(),bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){this.position=e,this.inclusive=n}}function ny(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ye.comparator(ye.fromName(o.referenceValue),n.key):r=$i(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ry(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n="asc"){this.field=e,this.dir=n}}function B2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{}class kt extends LI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new W2(e,n,r):n==="array-contains"?new G2(e,r):n==="in"?new q2(e,r):n==="not-in"?new K2(e,r):n==="array-contains-any"?new Y2(e,r):new kt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new H2(e,r):new z2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison($i(n,this.value)):n!==null&&as(this.value)===as(n)&&this.matchesComparison($i(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends LI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new rr(e,n)}matches(e){return DI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function DI(t){return t.op==="and"}function MI(t){return j2(t)&&DI(t)}function j2(t){for(const e of t.filters)if(e instanceof rr)return!1;return!0}function pd(t){if(t instanceof kt)return t.field.canonicalString()+t.op.toString()+Bi(t.value);if(MI(t))return t.filters.map(e=>pd(e)).join(",");{const e=t.filters.map(n=>pd(n)).join(",");return`${t.op}(${e})`}}function xI(t,e){return t instanceof kt?function(r,s){return s instanceof kt&&r.op===s.op&&r.field.isEqual(s.field)&&nr(r.value,s.value)}(t,e):t instanceof rr?function(r,s){return s instanceof rr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&xI(o,s.filters[a]),!0):!1}(t,e):void we()}function VI(t){return t instanceof kt?function(n){return`${n.field.canonicalString()} ${n.op} ${Bi(n.value)}`}(t):t instanceof rr?function(n){return n.op.toString()+" {"+n.getFilters().map(VI).join(" ,")+"}"}(t):"Filter"}class W2 extends kt{constructor(e,n,r){super(e,n,r),this.key=ye.fromName(r.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class H2 extends kt{constructor(e,n){super(e,"in",n),this.keys=FI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class z2 extends kt{constructor(e,n){super(e,"not-in",n),this.keys=FI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function FI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ye.fromName(r.referenceValue))}class G2 extends kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vf(n)&&ya(n.arrayValue,this.value)}}class q2 extends kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ya(this.value.arrayValue,n)}}class K2 extends kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ya(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ya(this.value.arrayValue,n)}}class Y2 extends kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ya(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function sy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Q2(t,e,n,r,s,i,o)}function Ff(t){const e=Pe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),tu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bi(r)).join(",")),e.ue=n}return e.ue}function Uf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!B2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ry(t.startAt,e.startAt)&&ry(t.endAt,e.endAt)}function _d(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function X2(t,e,n,r,s,i,o,a){return new ru(t,e,n,r,s,i,o,a)}function su(t){return new ru(t)}function iy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function J2(t){return t.collectionGroup!==null}function Qo(t){const e=Pe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Lt(zt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new hc(i,r))}),n.has(zt.keyField().canonicalString())||e.ce.push(new hc(zt.keyField(),r))}return e.ce}function Jn(t){const e=Pe(t);return e.le||(e.le=Z2(e,Qo(t))),e.le}function Z2(t,e){if(t.limitType==="F")return sy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new hc(s.field,i)});const n=t.endAt?new uc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new uc(t.startAt.position,t.startAt.inclusive):null;return sy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function md(t,e,n){return new ru(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function iu(t,e){return Uf(Jn(t),Jn(e))&&t.limitType===e.limitType}function UI(t){return`${Ff(Jn(t))}|lt:${t.limitType}`}function oi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>VI(s)).join(", ")}]`),tu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Bi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Bi(s)).join(",")),`Target(${r})`}(Jn(t))}; limitType=${t.limitType})`}function ou(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ye.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Qo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,c){const u=ny(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Qo(r),s)||r.endAt&&!function(o,a,c){const u=ny(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Qo(r),s))}(t,e)}function eM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $I(t){return(e,n)=>{let r=!1;for(const s of Qo(t)){const i=tM(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function tM(t,e,n){const r=t.field.isKeyField()?ye.comparator(e.key,n.key):function(i,o,a){const c=o.data.field(i),u=a.data.field(i);return c!==null&&u!==null?$i(c,u):we()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ws(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return kI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM=new mt(ye.comparator);function br(){return nM}const BI=new mt(ye.comparator);function Lo(...t){let e=BI;for(const n of t)e=e.insert(n.key,n);return e}function jI(t){let e=BI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Cs(){return Xo()}function WI(){return Xo()}function Xo(){return new Hs(t=>t.toString(),(t,e)=>t.isEqual(e))}const rM=new mt(ye.comparator),sM=new Lt(ye.comparator);function Me(...t){let e=sM;for(const n of t)e=e.add(n);return e}const iM=new Lt(xe);function oM(){return iM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cc(e)?"-0":e}}function HI(t){return{integerValue:""+t}}function aM(t,e){return D2(e)?HI(e):$f(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(){this._=void 0}}function lM(t,e,n){return t instanceof dc?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&xf(i)&&(i=nu(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof va?GI(t,e):t instanceof Ea?qI(t,e):function(s,i){const o=zI(s,i),a=oy(o)+oy(s.Pe);return fd(o)&&fd(s.Pe)?HI(a):$f(s.serializer,a)}(t,e)}function cM(t,e,n){return t instanceof va?GI(t,e):t instanceof Ea?qI(t,e):n}function zI(t,e){return t instanceof fc?function(r){return fd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class dc extends au{}class va extends au{constructor(e){super(),this.elements=e}}function GI(t,e){const n=KI(e);for(const r of t.elements)n.some(s=>nr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ea extends au{constructor(e){super(),this.elements=e}}function qI(t,e){let n=KI(e);for(const r of t.elements)n=n.filter(s=>!nr(s,r));return{arrayValue:{values:n}}}class fc extends au{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function oy(t){return Tt(t.integerValue||t.doubleValue)}function KI(t){return Vf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function uM(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof va&&s instanceof va||r instanceof Ea&&s instanceof Ea?Ui(r.elements,s.elements,nr):r instanceof fc&&s instanceof fc?nr(r.Pe,s.Pe):r instanceof dc&&s instanceof dc}(t.transform,e.transform)}class hM{constructor(e,n){this.version=e,this.transformResults=n}}class Er{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Er}static exists(e){return new Er(void 0,e)}static updateTime(e){return new Er(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lu{}function YI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new XI(t.key,Er.none()):new Ma(t.key,t.data,Er.none());{const n=t.data,r=bn.empty();let s=new Lt(zt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new zs(t.key,r,new Dn(s.toArray()),Er.none())}}function dM(t,e,n){t instanceof Ma?function(s,i,o){const a=s.value.clone(),c=ly(s.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof zs?function(s,i,o){if(!Dl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=ly(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(QI(s)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Jo(t,e,n,r){return t instanceof Ma?function(i,o,a,c){if(!Dl(i.precondition,o))return a;const u=i.value.clone(),h=cy(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof zs?function(i,o,a,c){if(!Dl(i.precondition,o))return a;const u=cy(i.fieldTransforms,c,o),h=o.data;return h.setAll(QI(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Dl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function fM(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=zI(r.transform,s||null);i!=null&&(n===null&&(n=bn.empty()),n.set(r.field,i))}return n||null}function ay(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ui(r,s,(i,o)=>uM(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ma extends lu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class zs extends lu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function QI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ly(t,e,n){const r=new Map;Qe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,cM(o,a,n[s]))}return r}function cy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,lM(i,o,e))}return r}class XI extends lu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class pM extends lu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&dM(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Jo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Jo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=WI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const c=YI(o,a);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Me())}isEqual(e){return this.batchId===e.batchId&&Ui(this.mutations,e.mutations,(n,r)=>ay(n,r))&&Ui(this.baseMutations,e.baseMutations,(n,r)=>ay(n,r))}}class Bf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Qe(e.mutations.length===r.length);let s=function(){return rM}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Bf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Ue;function yM(t){switch(t){default:return we();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function JI(t){if(t===void 0)return wr("GRPC error has no .code"),Q.UNKNOWN;switch(t){case wt.OK:return Q.OK;case wt.CANCELLED:return Q.CANCELLED;case wt.UNKNOWN:return Q.UNKNOWN;case wt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case wt.INTERNAL:return Q.INTERNAL;case wt.UNAVAILABLE:return Q.UNAVAILABLE;case wt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case wt.NOT_FOUND:return Q.NOT_FOUND;case wt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case wt.ABORTED:return Q.ABORTED;case wt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case wt.DATA_LOSS:return Q.DATA_LOSS;default:return we()}}(Ue=wt||(wt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=new ks([4294967295,4294967295],0);function uy(t){const e=vM().encode(t),n=new II;return n.update(e),new Uint8Array(n.digest())}function hy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ks([n,r],0),new ks([s,i],0)]}class jf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Do(`Invalid padding: ${n}`);if(r<0)throw new Do(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Do(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Do(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=ks.fromNumber(this.Te)}Ee(e,n,r){let s=e.add(n.multiply(ks.fromNumber(r)));return s.compare(EM)===1&&(s=new ks([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=uy(e),[r,s]=hy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new jf(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=uy(e),[r,s]=hy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Do extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,xa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cu(Ae.min(),s,new mt(xe),br(),Me())}}class xa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xa(r,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class ZI{constructor(e,n){this.targetId=e,this.me=n}}class e0{constructor(e,n,r=Kt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class dy{constructor(){this.fe=0,this.ge=fy(),this.pe=Kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Me(),n=Me(),r=Me();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:we()}}),new xa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=fy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class TM{constructor(e){this.Le=e,this.Be=new Map,this.ke=br(),this.qe=gl(),this.Qe=gl(),this.Ke=new mt(xe)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:we()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.je(s)&&n(s)})}Je(e){const n=e.targetId,r=e.me.count,s=this.Ye(n);if(s){const i=s.target;if(_d(i))if(r===0){const o=new ye(i.path);this.We(n,o,nn.newNoDocument(o,Ae.min()))}else Qe(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=os(r).toUint8Array()}catch(c){if(c instanceof NI)return Fi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new jf(o,s,i)}catch(c){return Fi(c instanceof Do?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.We(n,i,null),s++)}),s}it(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&_d(a.target)){const c=new ye(a.target.path);this.st(c).has(o)||this.ot(o,c)||this.We(o,c,nn.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Me();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new cu(e,n,this.Ke,this.ke,r);return this.ke=br(),this.qe=gl(),this.Qe=gl(),this.Ke=new mt(xe),s}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const s=this.ze(e);this.ot(e,n)?s.Fe(n,1):s.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new dy,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new Lt(xe),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Lt(xe),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new dy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function gl(){return new mt(ye.comparator)}function fy(){return new mt(ye.comparator)}const IM={asc:"ASCENDING",desc:"DESCENDING"},wM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bM={and:"AND",or:"OR"};class AM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gd(t,e){return t.useProto3Json||tu(e)?e:{value:e}}function pc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function t0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function CM(t,e){return pc(t,e.toTimestamp())}function Zn(t){return Qe(!!t),Ae.fromTimestamp(function(n){const r=is(n);return new At(r.seconds,r.nanos)}(t))}function Wf(t,e){return yd(t,e).canonicalString()}function yd(t,e){const n=function(s){return new _t(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function n0(t){const e=_t.fromString(t);return Qe(a0(e)),e}function vd(t,e){return Wf(t.databaseId,e.path)}function lh(t,e){const n=n0(e);if(n.get(1)!==t.databaseId.projectId)throw new _e(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _e(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(s0(n))}function r0(t,e){return Wf(t.databaseId,e)}function RM(t){const e=n0(t);return e.length===4?_t.emptyPath():s0(e)}function Ed(t){return new _t(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function s0(t){return Qe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function py(t,e,n){return{name:vd(t,e),fields:n.value.mapValue.fields}}function SM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(Qe(h===void 0||typeof h=="string"),Kt.fromBase64String(h||"")):(Qe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Kt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?Q.UNKNOWN:JI(u.code);return new _e(h,u.message||"")}(o);n=new e0(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=lh(t,r.document.name),i=Zn(r.document.updateTime),o=r.document.createTime?Zn(r.document.createTime):Ae.min(),a=new bn({mapValue:{fields:r.document.fields}}),c=nn.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Ml(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=lh(t,r.document),i=r.readTime?Zn(r.readTime):Ae.min(),o=nn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Ml([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=lh(t,r.document),i=r.removedTargetIds||[];n=new Ml([],i,s,null)}else{if(!("filter"in e))return we();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new gM(s,i),a=r.targetId;n=new ZI(a,o)}}return n}function PM(t,e){let n;if(e instanceof Ma)n={update:py(t,e.key,e.value)};else if(e instanceof XI)n={delete:vd(t,e.key)};else if(e instanceof zs)n={update:py(t,e.key,e.data),updateMask:FM(e.fieldMask)};else{if(!(e instanceof pM))return we();n={verify:vd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof dc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof va)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ea)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw we()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:CM(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:we()}(t,e.precondition)),n}function kM(t,e){return t&&t.length>0?(Qe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Zn(s.updateTime):Zn(i);return o.isEqual(Ae.min())&&(o=Zn(i)),new hM(o,s.transformResults||[])}(n,e))):[]}function NM(t,e){return{documents:[r0(t,e.path)]}}function OM(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=r0(t,s);const i=function(u){if(u.length!==0)return o0(rr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:ai(p.field),direction:MM(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=gd(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ct:n,parent:s}}function LM(t){let e=RM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Qe(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=i0(f);return p instanceof rr&&MI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(w){return new hc(li(w.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,tu(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,y=f.values||[];return new uc(y,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,y=f.values||[];return new uc(y,p)}(n.endAt)),X2(e,s,o,i,a,"F",c,u)}function DM(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function i0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=li(n.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=li(n.unaryFilter.field);return kt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=li(n.unaryFilter.field);return kt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=li(n.unaryFilter.field);return kt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(t):t.fieldFilter!==void 0?function(n){return kt.create(li(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rr.create(n.compositeFilter.filters.map(r=>i0(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return we()}}(n.compositeFilter.op))}(t):we()}function MM(t){return IM[t]}function xM(t){return wM[t]}function VM(t){return bM[t]}function ai(t){return{fieldPath:t.canonicalString()}}function li(t){return zt.fromServerFormat(t.fieldPath)}function o0(t){return t instanceof kt?function(n){if(n.op==="=="){if(ty(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NAN"}};if(ey(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ty(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NOT_NAN"}};if(ey(n.value))return{unaryFilter:{field:ai(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ai(n.field),op:xM(n.op),value:n.value}}}(t):t instanceof rr?function(n){const r=n.getFilters().map(s=>o0(s));return r.length===1?r[0]:{compositeFilter:{op:VM(n.op),filters:r}}}(t):we()}function FM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function a0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,r,s,i=Ae.min(),o=Ae.min(),a=Kt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Wr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e){this.ht=e}}function $M(t){const e=LM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?md(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(){this.ln=new jM}addToCollectionParentIndex(e,n){return this.ln.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(ss.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class jM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Lt(_t.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Lt(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fn{static withCacheSize(e){return new fn(e,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn.DEFAULT_COLLECTION_PERCENTILE=10,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fn.DEFAULT=new fn(41943040,fn.DEFAULT_COLLECTION_PERCENTILE,fn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fn.DISABLED=new fn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new ji(0)}static Qn(){return new ji(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my([t,e],[n,r]){const s=xe(t,n);return s===0?xe(e,r):s}class WM{constructor(e){this.Gn=e,this.buffer=new Lt(my),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();my(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class HM{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ro(n)?ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await no(n)}await this.Yn(3e5)})}}class zM{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(eu.oe);const r=new WM(n);return this.Zn.forEachTarget(e,s=>r.Hn(s.sequenceNumber)).next(()=>this.Zn.er(e,s=>r.Hn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(_y)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_y):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,s,i,o,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),ii()<=De.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function GM(t,e){return new zM(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(){this.changes=new Hs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Jo(r.mutation,s,Dn.empty(),At.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Me()){const s=Cs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Lo();return i.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Cs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Me()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=br();const o=Xo(),a=function(){return Xo()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof zs)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Jo(h.mutation,u,h.mutation.getFieldMask(),At.now())):o.set(u.key,Dn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var f;return a.set(u,new KM(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Xo();let s=new mt((o,a)=>o-a),i=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Dn.empty();h=a.applyToLocalView(u,h),r.set(c,h);const f=(s.get(a.batchId)||Me()).add(c);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,f=WI();h.forEach(p=>{if(!i.has(p)){const y=YI(n.get(p),r.get(p));y!==null&&f.set(p,y),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ye.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):J2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(Cs());let a=-1,c=i;return o.next(u=>q.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Me())).next(h=>({batchId:a,changes:jI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(r=>{let s=Lo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Lo();return this.indexManager.getCollectionParents(e,i).next(a=>q.forEach(a,c=>{const u=function(f,p){return new ru(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,nn.newInvalidDocument(h)))});let a=Lo();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Jo(h.mutation,u,Dn.empty(),At.now()),ou(n,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return q.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Zn(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(s){return{name:s.name,query:$M(s.bundledQuery),readTime:Zn(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.overlays=new mt(ye.comparator),this.Er=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Cs();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.Tt(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Er.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Er.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=Cs(),i=n.length+1,o=new ye(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new mt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Cs(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Cs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return q.resolve(a)}Tt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Er.get(s.largestBatchId).delete(r.key);this.Er.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new mM(n,r));let i=this.Er.get(n);i===void 0&&(i=Me(),this.Er.set(n,i)),this.Er.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(){this.dr=new Lt(Vt.Ar),this.Rr=new Lt(Vt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const r=new Vt(e,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new Vt(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new ye(new _t([])),r=new Vt(n,e),s=new Vt(n,e+1),i=[];return this.Rr.forEachInRange([r,s],o=>{this.gr(o),i.push(o.key)}),i}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new ye(new _t([])),r=new Vt(n,e),s=new Vt(n,e+1);let i=Me();return this.Rr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Vt(e,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Vt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return ye.comparator(e.key,n.key)||xe(e.br,n.br)}static Vr(e,n){return xe(e.br,n.br)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new Lt(Vt.Ar)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _M(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.vr=this.vr.add(new Vt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Fr(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Vt(n,0),s=new Vt(n,Number.POSITIVE_INFINITY),i=[];return this.vr.forEachInRange([r,s],o=>{const a=this.Cr(o.br);i.push(a)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Lt(xe);return n.forEach(s=>{const i=new Vt(s,0),o=new Vt(s,Number.POSITIVE_INFINITY);this.vr.forEachInRange([i,o],a=>{r=r.add(a.br)})}),q.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ye.isDocumentKey(i)||(i=i.child(""));const o=new Vt(new ye(i),0);let a=new Lt(xe);return this.vr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.br)),!0)},o),q.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const s=this.Cr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Qe(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return q.forEach(n.mutations,s=>{const i=new Vt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,n){const r=new Vt(n,0),s=this.vr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e){this.Nr=e,this.docs=function(){return new mt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let r=br();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():nn.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=br();const o=n.path,a=new ye(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||k2(P2(h),r)<=0||(s.has(h.key)||ou(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){we()}Lr(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new tx(this)}getSize(e){return q.resolve(this.size)}}class tx extends qM{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.hr.addEntry(e,s)):this.hr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e){this.persistence=e,this.Br=new Hs(n=>Ff(n),Uf),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.kr=0,this.qr=new Hf,this.targetCount=0,this.Qr=ji.qn()}forEachTarget(e,n){return this.Br.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),q.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new ji(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Un(n),q.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Br.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Br.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n){this.Kr={},this.overlays={},this.$r=new eu(0),this.Ur=!1,this.Ur=!0,this.Wr=new JM,this.referenceDelegate=e(this),this.Gr=new nx(this),this.indexManager=new BM,this.remoteDocumentCache=function(s){return new ex(s)}(r=>this.referenceDelegate.zr(r)),this.serializer=new UM(n),this.jr=new QM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new ZM(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const s=new rx(this.$r.next());return this.referenceDelegate.Hr(),r(s).next(i=>this.referenceDelegate.Jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Yr(e,n){return q.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class rx extends O2{constructor(e){super(),this.currentSequenceNumber=e}}class zf{constructor(e){this.persistence=e,this.Zr=new Hf,this.Xr=null}static ei(e){return new zf(e)}get ti(){if(this.Xr)return this.Xr;throw we()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),q.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(s=>this.ti.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.ti.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.ti,r=>{const s=ye.fromPath(r);return this.ni(e,s).next(i=>{i||n.removeEntry(s,Ae.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return q.or([()=>q.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class _c{constructor(e,n){this.persistence=e,this.ri=new Hs(r=>M2(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=GM(this,n)}static ei(e,n){return new _c(e,n)}Hr(){}Jr(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return q.forEach(this.ri,(r,s)=>this.ir(e,r,s).next(i=>i?q.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Lr(e,o=>this.ir(e,o,n).next(a=>{a||(r++,i.removeEntry(o,Ae.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),q.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ol(e.data.value)),n}ir(e,n,r){return q.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.ri.get(n);return q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=s}static zi(e,n){let r=Me(),s=Me();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Gf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return Q1()?8:L2(Un())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Xi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.es(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new sx;return this.ts(e,n,o).next(a=>{if(i.result=a,this.Hi)return this.ns(e,n,o,a.size)})}).next(()=>i.result)}ns(e,n,r,s){return r.documentReadCount<this.Ji?(ii()<=De.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",oi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),q.resolve()):(ii()<=De.DEBUG&&ue("QueryEngine","Query:",oi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Yi*s?(ii()<=De.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",oi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(n))):q.resolve())}Xi(e,n){if(iy(n))return q.resolve(null);let r=Jn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=md(n,null,"F"),r=Jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Me(...i);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.rs(n,a);return this.ss(n,u,o,c.readTime)?this.Xi(e,md(n,null,"F")):this.os(e,u,n,c)}))})))}es(e,n,r,s){return iy(n)||s.isEqual(Ae.min())?q.resolve(null):this.Zi.getDocuments(e,r).next(i=>{const o=this.rs(n,i);return this.ss(n,o,r,s)?q.resolve(null):(ii()<=De.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),oi(n)),this.os(e,o,n,S2(s,-1)).next(a=>a))})}rs(e,n){let r=new Lt($I(e));return n.forEach((s,i)=>{ou(e,i)&&(r=r.add(i))}),r}ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ts(e,n,r){return ii()<=De.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",oi(n)),this.Zi.getDocumentsMatchingQuery(e,n,ss.min(),r)}os(e,n,r,s){return this.Zi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n,r,s){this.persistence=e,this._s=n,this.serializer=s,this.us=new mt(xe),this.cs=new Hs(i=>Ff(i),Uf),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YM(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function ax(t,e,n,r){return new ox(t,e,n,r)}async function c0(t,e){const n=Pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let c=Me();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ts:u,removedBatchIds:o,addedBatchIds:a}))})})}function lx(t,e){const n=Pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){const f=u.batch,p=f.keys();let y=q.resolve();return p.forEach(w=>{y=y.next(()=>h.getEntry(c,w)).next(P=>{const R=u.docVersions.get(w);Qe(R!==null),P.version.compareTo(R)<0&&(f.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),h.addEntry(P)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function u0(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function cx(t,e){const n=Pe(t),r=e.snapshotVersion;let s=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});s=n.us;const a=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.Gr.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(i,h.addedDocuments,f)));let y=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Kt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(P,R,b){return P.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,y,h)&&a.push(n.Gr.updateTargetData(i,y))});let c=br(),u=Me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(ux(i,o,e.documentUpdates).next(h=>{c=h.Is,u=h.Es})),!r.isEqual(Ae.min())){const h=n.Gr.getLastRemoteSnapshotVersion(i).next(f=>n.Gr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return q.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.us=s,i))}function ux(t,e,n){let r=Me(),s=Me();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=br();return n.forEach((a,c)=>{const u=i.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(Ae.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ue("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Is:o,Es:s}})}function hx(t,e){const n=Pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dx(t,e){const n=Pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Gr.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Gr.allocateTargetId(r).next(o=>(s=new Wr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.us.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function Td(t,e,n){const r=Pe(t),s=r.us.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ro(o))throw o;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(s.target)}function gy(t,e,n){const r=Pe(t);let s=Ae.min(),i=Me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=Pe(c),p=f.cs.get(h);return p!==void 0?q.resolve(f.us.get(p)):f.Gr.getTargetData(u,h)}(r,o,Jn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{i=c})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,n?s:Ae.min(),n?i:Me())).next(a=>(fx(r,eM(e),a),{documents:a,ds:i})))}function fx(t,e,n){let r=t.ls.get(e)||Ae.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ls.set(e,r)}class yy{constructor(){this.activeTargetIds=oM()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class px{constructor(){this._o=new yy,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new yy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl=null;function ch(){return yl===null?yl=function(){return 268435456+Math.round(2147483648*Math.random())}():yl++,"0x"+yl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class yx extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${s}/databases/${i}`,this.xo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Oo(n,r,s,i,o){const a=ch(),c=this.No(n,r.toUriEncodedString());ue("RestConnection",`Sending RPC '${n}' ${a}:`,c,s);const u={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(u,i,o),this.Bo(n,c,u,s).then(h=>(ue("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Fi("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",c,"request:",s),h})}ko(n,r,s,i,o,a){return this.Oo(n,r,s,i,o)}Lo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+to}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}No(n,r){const s=mx[n];return`${this.Fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,r,s){const i=ch();return new Promise((o,a)=>{const c=new wI;c.setWithCredentials(!0),c.listenOnce(bI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Nl.NO_ERROR:const h=c.getResponseJson();ue(Jt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case Nl.TIMEOUT:ue(Jt,`RPC '${e}' ${i} timed out`),a(new _e(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Nl.HTTP_ERROR:const f=c.getStatus();if(ue(Jt,`RPC '${e}' ${i} failed with status:`,f,"response text:",c.getResponseText()),f>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const w=function(R){const b=R.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(b)>=0?b:Q.UNKNOWN}(y.status);a(new _e(w,y.message))}else a(new _e(Q.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new _e(Q.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{ue(Jt,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);ue(Jt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",u,r,15)})}qo(e,n,r){const s=ch(),i=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=RI(),a=CI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Lo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");ue(Jt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);let p=!1,y=!1;const w=new gx({Eo:R=>{y?ue(Jt,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(p||(ue(Jt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),ue(Jt,`RPC '${e}' stream ${s} sending:`,R),f.send(R))},Ao:()=>f.close()}),P=(R,b,k)=>{R.listen(b,L=>{try{k(L)}catch(N){setTimeout(()=>{throw N},0)}})};return P(f,Oo.EventType.OPEN,()=>{y||(ue(Jt,`RPC '${e}' stream ${s} transport opened.`),w.So())}),P(f,Oo.EventType.CLOSE,()=>{y||(y=!0,ue(Jt,`RPC '${e}' stream ${s} transport closed`),w.Do())}),P(f,Oo.EventType.ERROR,R=>{y||(y=!0,Fi(Jt,`RPC '${e}' stream ${s} transport errored:`,R),w.Do(new _e(Q.UNAVAILABLE,"The operation could not be completed")))}),P(f,Oo.EventType.MESSAGE,R=>{var b;if(!y){const k=R.data[0];Qe(!!k);const L=k,N=(L==null?void 0:L.error)||((b=L[0])===null||b===void 0?void 0:b.error);if(N){ue(Jt,`RPC '${e}' stream ${s} received error:`,N);const H=N.status;let $=function(T){const S=wt[T];if(S!==void 0)return JI(S)}(H),A=N.message;$===void 0&&($=Q.INTERNAL,A="Unknown error status: "+H+" with message "+N.message),y=!0,w.Do(new _e($,A)),f.close()}else ue(Jt,`RPC '${e}' stream ${s} received:`,k),w.vo(k)}}),P(a,AI.STAT_EVENT,R=>{R.stat===hd.PROXY?ue(Jt,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===hd.NOPROXY&&ue(Jt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.bo()},0),w}}function uh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){return new AM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,n,r=1e3,s=1.5,i=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=s,this.$o=i,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),s=Math.max(0,n-r);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,s,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n,r,s,i,o,a,c){this.li=e,this.Yo=r,this.Zo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new h0(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(wr(n.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Xo===n&&this.I_(r,s)},r=>{e(()=>{const s=new _e(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(s)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(s=>{r(()=>this.E_(s))}),this.stream.onMessage(s=>{r(()=>++this.n_==1?this.A_(s):this.onNext(s))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vx extends d0{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=SM(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ae.min():o.readTime?Zn(o.readTime):Ae.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=Ed(this.serializer),n.addTarget=function(i,o){let a;const c=o.target;if(a=_d(c)?{documents:NM(i,c)}:{query:OM(i,c).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=t0(i,o.resumeToken);const u=gd(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ae.min())>0){a.readTime=pc(i,o.snapshotVersion.toTimestamp());const u=gd(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=DM(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=Ed(this.serializer),n.removeTarget=e,this.c_(n)}}class Ex extends d0{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=kM(e.writeResults,e.commitTime),r=Zn(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=Ed(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>PM(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.S_=!1}b_(){if(this.S_)throw new _e(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Oo(e,yd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new _e(Q.UNKNOWN,i.toString())})}ko(e,n,r,s,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,yd(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(Q.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Ix{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(wr(n),this.C_=!1):ue("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=i,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{Gs(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=Pe(c);u.k_.add(4),await Va(u),u.K_.set("Unknown"),u.k_.delete(4),await hu(u)}(this))})}),this.K_=new Ix(r,s)}}async function hu(t){if(Gs(t))for(const e of t.q_)await e(!0)}async function Va(t){for(const e of t.q_)await e(!1)}function f0(t,e){const n=Pe(t);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),Qf(n)?Yf(n):so(n).s_()&&Kf(n,e))}function qf(t,e){const n=Pe(t),r=so(n);n.B_.delete(e),r.s_()&&p0(n,e),n.B_.size===0&&(r.s_()?r.a_():Gs(n)&&n.K_.set("Unknown"))}function Kf(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}so(t).V_(e)}function p0(t,e){t.U_.xe(e),so(t).m_(e)}function Yf(t){t.U_=new TM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.B_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),so(t).start(),t.K_.F_()}function Qf(t){return Gs(t)&&!so(t).i_()&&t.B_.size>0}function Gs(t){return Pe(t).k_.size===0}function _0(t){t.U_=void 0}async function bx(t){t.K_.set("Online")}async function Ax(t){t.B_.forEach((e,n)=>{Kf(t,e)})}async function Cx(t,e){_0(t),Qf(t)?(t.K_.O_(e),Yf(t)):t.K_.set("Unknown")}async function Rx(t,e,n){if(t.K_.set("Online"),e instanceof e0&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.B_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.B_.delete(a),s.U_.removeTarget(a))}(t,e)}catch(r){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mc(t,r)}else if(e instanceof Ml?t.U_.$e(e):e instanceof ZI?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(Ae.min()))try{const r=await u0(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.U_.it(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.B_.get(u);h&&i.B_.set(u,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const h=i.B_.get(c);if(!h)return;i.B_.set(c,h.withResumeToken(Kt.EMPTY_BYTE_STRING,h.snapshotVersion)),p0(i,c);const f=new Wr(h.target,c,u,h.sequenceNumber);Kf(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ue("RemoteStore","Failed to raise snapshot:",r),await mc(t,r)}}async function mc(t,e,n){if(!ro(e))throw e;t.k_.add(1),await Va(t),t.K_.set("Offline"),n||(n=()=>u0(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await hu(t)})}function m0(t,e){return e().catch(n=>mc(t,n,e))}async function du(t){const e=Pe(t),n=ls(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;Sx(e);)try{const s=await hx(e.localStore,r);if(s===null){e.L_.length===0&&n.a_();break}r=s.batchId,Px(e,s)}catch(s){await mc(e,s)}g0(e)&&y0(e)}function Sx(t){return Gs(t)&&t.L_.length<10}function Px(t,e){t.L_.push(e);const n=ls(t);n.s_()&&n.f_&&n.g_(e.mutations)}function g0(t){return Gs(t)&&!ls(t).i_()&&t.L_.length>0}function y0(t){ls(t).start()}async function kx(t){ls(t).w_()}async function Nx(t){const e=ls(t);for(const n of t.L_)e.g_(n.mutations)}async function Ox(t,e,n){const r=t.L_.shift(),s=Bf.from(r,e,n);await m0(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await du(t)}async function Lx(t,e){e&&ls(t).f_&&await async function(r,s){if(function(o){return yM(o)&&o!==Q.ABORTED}(s.code)){const i=r.L_.shift();ls(r).__(),await m0(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await du(r)}}(t,e),g0(t)&&y0(t)}async function Ey(t,e){const n=Pe(t);n.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const r=Gs(n);n.k_.add(3),await Va(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await hu(n)}async function Dx(t,e){const n=Pe(t);e?(n.k_.delete(2),await hu(n)):e||(n.k_.add(2),await Va(n),n.K_.set("Unknown"))}function so(t){return t.W_||(t.W_=function(n,r,s){const i=Pe(n);return i.b_(),new vx(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Ro:bx.bind(null,t),mo:Ax.bind(null,t),po:Cx.bind(null,t),R_:Rx.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),Qf(t)?Yf(t):t.K_.set("Unknown")):(await t.W_.stop(),_0(t))})),t.W_}function ls(t){return t.G_||(t.G_=function(n,r,s){const i=Pe(n);return i.b_(),new Ex(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:kx.bind(null,t),po:Lx.bind(null,t),p_:Nx.bind(null,t),y_:Ox.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await du(t)):(await t.G_.stop(),t.L_.length>0&&(ue("RemoteStore",`Stopping write stream with ${t.L_.length} pending writes`),t.L_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Xf(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jf(t,e){if(wr("AsyncQueue",`${e}: ${t}`),ro(t))return new _e(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{static emptySet(e){return new Ei(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ye.comparator(n.key,r.key):(n,r)=>ye.comparator(n.key,r.key),this.keyedMap=Lo(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ei)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ei;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(){this.z_=new mt(ye.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):we():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wi{constructor(e,n,r,s,i,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Wi(e,n,Ei.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class xx{constructor(){this.queries=Iy(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const s=Pe(n),i=s.queries;s.queries=Iy(),i.forEach((o,a)=>{for(const c of a.J_)c.onError(r)})})(this,new _e(Q.ABORTED,"Firestore shutting down"))}}function Iy(){return new Hs(t=>UI(t),iu)}async function Zf(t,e){const n=Pe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Y_()&&e.Z_()&&(r=2):(i=new Mx,r=e.Z_()?0:1);try{switch(r){case 0:i.H_=await n.onListen(s,!0);break;case 1:i.H_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Jf(o,`Initialization of query '${oi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.J_.push(e),e.ea(n.onlineState),i.H_&&e.ta(i.H_)&&tp(n)}async function ep(t,e){const n=Pe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.J_.indexOf(e);o>=0&&(i.J_.splice(o,1),i.J_.length===0?s=e.Z_()?0:1:!i.Y_()&&e.Z_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Vx(t,e){const n=Pe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.J_)a.ta(s)&&(r=!0);o.H_=s}}r&&tp(n)}function Fx(t,e,n){const r=Pe(t),s=r.queries.get(e);if(s)for(const i of s.J_)i.onError(n);r.queries.delete(e)}function tp(t){t.X_.forEach(e=>{e.next()})}var Id,wy;(wy=Id||(Id={})).na="default",wy.Cache="cache";class np{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Wi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Wi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Id.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e){this.key=e}}class E0{constructor(e){this.key=e}}class Ux{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Me(),this.mutatedKeys=Me(),this.Va=$I(e),this.ma=new Ei(this.Va)}get fa(){return this.da}ga(e,n){const r=n?n.pa:new Ty,s=n?n.ma:this.ma;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),y=ou(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let R=!1;p&&y?p.data.isEqual(y.data)?w!==P&&(r.track({type:3,doc:y}),R=!0):this.ya(p,y)||(r.track({type:2,doc:y}),R=!0,(c&&this.Va(y,c)>0||u&&this.Va(y,u)<0)&&(a=!0)):!p&&y?(r.track({type:0,doc:y}),R=!0):p&&!y&&(r.track({type:1,doc:p}),R=!0,(c||u)&&(a=!0)),R&&(y?(o=o.add(y),i=P?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{ma:o,pa:r,ss:a,mutatedKeys:i}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((h,f)=>function(y,w){const P=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return P(y)-P(w)}(h.type,f.type)||this.Va(h.doc,f.doc)),this.wa(r),s=s!=null&&s;const a=n&&!s?this.Sa():[],c=this.Ra.size===0&&this.current&&!s?1:0,u=c!==this.Aa;return this.Aa=c,o.length!==0||u?{snapshot:new Wi(this.query,e.ma,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Ty,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Me(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new E0(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new v0(r))}),n}va(e){this.da=e.ds,this.Ra=Me();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Wi.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class $x{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Bx{constructor(e){this.key=e,this.Fa=!1}}class jx{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new Hs(a=>UI(a),iu),this.Oa=new Map,this.Na=new Set,this.La=new mt(ye.comparator),this.Ba=new Map,this.ka=new Hf,this.qa={},this.Qa=new Map,this.Ka=ji.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function Wx(t,e,n=!0){const r=C0(t);let s;const i=r.xa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Ca()):s=await T0(r,e,n,!0),s}async function Hx(t,e){const n=C0(t);await T0(n,e,!0,!1)}async function T0(t,e,n,r){const s=await dx(t.localStore,Jn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await zx(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&f0(t.remoteStore,s),a}async function zx(t,e,n,r,s){t.Ua=(f,p,y)=>async function(P,R,b,k){let L=R.view.ga(b);L.ss&&(L=await gy(P.localStore,R.query,!1).then(({documents:A})=>R.view.ga(A,L)));const N=k&&k.targetChanges.get(R.targetId),H=k&&k.targetMismatches.get(R.targetId)!=null,$=R.view.applyChanges(L,P.isPrimaryClient,N,H);return Ay(P,R.targetId,$.ba),$.snapshot}(t,f,p,y);const i=await gy(t.localStore,e,!0),o=new Ux(e,i.ds),a=o.ga(i.documents),c=xa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,c);Ay(t,n,u.ba);const h=new $x(e,n,o);return t.xa.set(e,h),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),u.snapshot}async function Gx(t,e,n){const r=Pe(t),s=r.xa.get(e),i=r.Oa.get(s.targetId);if(i.length>1)return r.Oa.set(s.targetId,i.filter(o=>!iu(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Td(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&qf(r.remoteStore,s.targetId),wd(r,s.targetId)}).catch(no)):(wd(r,s.targetId),await Td(r.localStore,s.targetId,!0))}async function qx(t,e){const n=Pe(t),r=n.xa.get(e),s=n.Oa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),qf(n.remoteStore,r.targetId))}async function Kx(t,e,n){const r=tV(t);try{const s=await function(o,a){const c=Pe(o),u=At.now(),h=a.reduce((y,w)=>y.add(w.key),Me());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=br(),P=Me();return c.hs.getEntries(y,h).next(R=>{w=R,w.forEach((b,k)=>{k.isValidDocument()||(P=P.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,w)).next(R=>{f=R;const b=[];for(const k of a){const L=fM(k,f.get(k.key).overlayedDocument);L!=null&&b.push(new zs(k.key,L,OI(L.value.mapValue),Er.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,b,a)}).next(R=>{p=R;const b=R.applyToLocalDocumentSet(f,P);return c.documentOverlayCache.saveOverlays(y,R.batchId,b)})}).then(()=>({batchId:p.batchId,changes:jI(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let u=o.qa[o.currentUser.toKey()];u||(u=new mt(xe)),u=u.insert(a,c),o.qa[o.currentUser.toKey()]=u}(r,s.batchId,n),await Fa(r,s.changes),await du(r.remoteStore)}catch(s){const i=Jf(s,"Failed to persist write");n.reject(i)}}async function I0(t,e){const n=Pe(t);try{const r=await cx(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Ba.get(i);o&&(Qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Fa=!0:s.modifiedDocuments.size>0?Qe(o.Fa):s.removedDocuments.size>0&&(Qe(o.Fa),o.Fa=!1))}),await Fa(n,r,e)}catch(r){await no(r)}}function by(t,e,n){const r=Pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.xa.forEach((i,o)=>{const a=o.view.ea(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=Pe(o);c.onlineState=a;let u=!1;c.queries.forEach((h,f)=>{for(const p of f.J_)p.ea(a)&&(u=!0)}),u&&tp(c)}(r.eventManager,e),s.length&&r.Ma.R_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Yx(t,e,n){const r=Pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ba.get(e),i=s&&s.key;if(i){let o=new mt(ye.comparator);o=o.insert(i,nn.newNoDocument(i,Ae.min()));const a=Me().add(i),c=new cu(Ae.min(),new Map,new mt(xe),o,a);await I0(r,c),r.La=r.La.remove(i),r.Ba.delete(e),rp(r)}else await Td(r.localStore,e,!1).then(()=>wd(r,e,n)).catch(no)}async function Qx(t,e){const n=Pe(t),r=e.batch.batchId;try{const s=await lx(n.localStore,e);b0(n,r,null),w0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fa(n,s)}catch(s){await no(s)}}async function Xx(t,e,n){const r=Pe(t);try{const s=await function(o,a){const c=Pe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(Qe(f!==null),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);b0(r,e,n),w0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Fa(r,s)}catch(s){await no(s)}}function w0(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function b0(t,e,n){const r=Pe(t);let s=r.qa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.qa[r.currentUser.toKey()]=s}}function wd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||A0(t,r)})}function A0(t,e){t.Na.delete(e.path.canonicalString());const n=t.La.get(e);n!==null&&(qf(t.remoteStore,n),t.La=t.La.remove(e),t.Ba.delete(n),rp(t))}function Ay(t,e,n){for(const r of n)r instanceof v0?(t.ka.addReference(r.key,e),Jx(t,r)):r instanceof E0?(ue("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||A0(t,r.key)):we()}function Jx(t,e){const n=e.key,r=n.path.canonicalString();t.La.get(n)||t.Na.has(r)||(ue("SyncEngine","New document in limbo: "+n),t.Na.add(r),rp(t))}function rp(t){for(;t.Na.size>0&&t.La.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new ye(_t.fromString(e)),r=t.Ka.next();t.Ba.set(r,new Bx(n)),t.La=t.La.insert(n,r),f0(t.remoteStore,new Wr(Jn(su(n.path)),r,"TargetPurposeLimboResolution",eu.oe))}}async function Fa(t,e,n){const r=Pe(t),s=[],i=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,c)=>{o.push(r.Ua(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Gf.zi(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Ma.R_(s),await async function(c,u){const h=Pe(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>q.forEach(u,p=>q.forEach(p.Wi,y=>h.persistence.referenceDelegate.addReference(f,p.targetId,y)).next(()=>q.forEach(p.Gi,y=>h.persistence.referenceDelegate.removeReference(f,p.targetId,y)))))}catch(f){if(!ro(f))throw f;ue("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const y=h.us.get(p),w=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(w);h.us=h.us.insert(p,P)}}}(r.localStore,i))}async function Zx(t,e){const n=Pe(t);if(!n.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const r=await c0(n.localStore,e);n.currentUser=e,function(i,o){i.Qa.forEach(a=>{a.forEach(c=>{c.reject(new _e(Q.CANCELLED,o))})}),i.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fa(n,r.Ts)}}function eV(t,e){const n=Pe(t),r=n.Ba.get(e);if(r&&r.Fa)return Me().add(r.key);{let s=Me();const i=n.Oa.get(e);if(!i)return s;for(const o of i){const a=n.xa.get(o);s=s.unionWith(a.view.fa)}return s}}function C0(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=I0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yx.bind(null,e),e.Ma.R_=Vx.bind(null,e.eventManager),e.Ma.Wa=Fx.bind(null,e.eventManager),e}function tV(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Qx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Xx.bind(null,e),e}class gc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uu(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return ax(this.persistence,new ix,e.initialUser,this.serializer)}ja(e){return new l0(zf.ei,this.serializer)}za(e){return new px}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gc.provider={build:()=>new gc};class nV extends gc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Qe(this.persistence.referenceDelegate instanceof _c);const r=this.persistence.referenceDelegate.garbageCollector;return new HM(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?fn.withCacheSize(this.cacheSizeBytes):fn.DEFAULT;return new l0(r=>_c.ei(r,n),this.serializer)}}class bd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>by(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zx.bind(null,this.syncEngine),await Dx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xx}()}createDatastore(e){const n=uu(e.databaseInfo.databaseId),r=function(i){return new yx(i)}(e.databaseInfo);return function(i,o,a,c){return new Tx(i,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new wx(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>by(this.syncEngine,n,0),function(){return vy.p()?new vy:new _x}())}createSyncEngine(e,n){return function(s,i,o,a,c,u,h){const f=new jx(s,i,o,a,c,u);return h&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Pe(s);ue("RemoteStore","RemoteStore shutting down."),i.k_.add(5),await Va(i),i.Q_.shutdown(),i.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bd.provider={build:()=>new bd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Zt.UNAUTHENTICATED,this.clientId=PI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ue("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ue("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Jf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hh(t,e){t.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await c0(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Cy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await sV(t);ue("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ey(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ey(e.remoteStore,s)),t._onlineComponents=e}async function sV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await hh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Q.FAILED_PRECONDITION||s.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Fi("Error using user provided cache. Falling back to memory cache: "+n),await hh(t,new gc)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await hh(t,new nV(void 0));return t._offlineComponents}async function R0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await Cy(t,t._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await Cy(t,new bd))),t._onlineComponents}function iV(t){return R0(t).then(e=>e.syncEngine)}async function yc(t){const e=await R0(t),n=e.eventManager;return n.onListen=Wx.bind(null,e.syncEngine),n.onUnlisten=Gx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Hx.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qx.bind(null,e.syncEngine),n}function oV(t,e,n={}){const r=new vr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new sp({next:p=>{h.eu(),o.enqueueAndForget(()=>ep(i,f));const y=p.docs.has(a);!y&&p.fromCache?u.reject(new _e(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&c&&c.source==="server"?u.reject(new _e(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new np(su(a.path),h,{includeMetadataChanges:!0,ua:!0});return Zf(i,f)}(await yc(t),t.asyncQueue,e,n,r)),r.promise}function aV(t,e,n={}){const r=new vr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,u){const h=new sp({next:p=>{h.eu(),o.enqueueAndForget(()=>ep(i,f)),p.fromCache&&c.source==="server"?u.reject(new _e(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new np(a,h,{includeMetadataChanges:!0,ua:!0});return Zf(i,f)}(await yc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(t,e,n){if(!n)throw new _e(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lV(t,e,n,r){if(e===!0&&r===!0)throw new _e(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Sy(t){if(!ye.isDocumentKey(t))throw new _e(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Py(t){if(ye.isDocumentKey(t))throw new _e(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ip(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we()}function Tr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _e(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ip(t);throw new _e(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _e(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new _e(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new _e(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new _e(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ky({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ky(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new v2;switch(r.type){case"firstParty":return new w2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ry.get(n);r&&(ue("ComponentProvider","Removing Datastore"),Ry.delete(n),r.terminate())}(this),Promise.resolve()}}function cV(t,e,n,r={}){var s;const i=(t=Tr(t,fu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Fi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Zt.MOCK_USER;else{a=G1(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new _e(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Zt(u)}t._authCredentials=new E2(new SI(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ua(this.firestore,e,this._query)}}class En{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class Qr extends Ua{constructor(e,n,r){super(e,n,su(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new ye(e))}withConverter(e){return new Qr(this.firestore,e,this._path)}}function uV(t,e,...n){if(t=$n(t),P0("collection","path",e),t instanceof fu){const r=_t.fromString(e,...n);return Py(r),new Qr(t,null,r)}{if(!(t instanceof En||t instanceof Qr))throw new _e(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return Py(r),new Qr(t.firestore,null,r)}}function hV(t,e,...n){if(t=$n(t),arguments.length===1&&(e=PI.newId()),P0("doc","path",e),t instanceof fu){const r=_t.fromString(e,...n);return Sy(r),new En(t,null,new ye(r))}{if(!(t instanceof En||t instanceof Qr))throw new _e(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_t.fromString(e,...n));return Sy(r),new En(t.firestore,t instanceof Qr?t.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new h0(this,"async_queue_retry"),this.fu=()=>{const r=uh();r&&ue("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=uh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=uh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new vr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!ro(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw wr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const s=Xf.createAndSchedule(this,e,n,r,i=>this.Su(i));return this.du.push(s),s}pu(){this.Au&&we()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}function Oy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Hi extends fu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Ny,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ny(e),this._firestoreClient=void 0,await e}}}function k0(t,e){const n=typeof t=="object"?t:zE(),r=typeof t=="string"?t:e||"(default)",s=iN(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=H1("firestore");i&&cV(s,...i)}return s}function pu(t){if(t._terminated)throw new _e(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||dV(t),t._firestoreClient}function dV(t){var e,n,r;const s=t._freezeSettings(),i=function(a,c,u,h){return new F2(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,S0(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new rV(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zi(Kt.fromBase64String(e))}catch(n){throw new _e(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zi(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _e(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _e(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _e(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV=/^__.*__$/;class pV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ma(e,this.data,n,this.fieldTransforms)}}function O0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class lp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Fu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new lp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.xu({path:r,Nu:!1});return s.Lu(e),s}Bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.xu({path:r,Nu:!1});return s.Fu(),s}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return vc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(O0(this.Mu)&&fV.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class _V{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||uu(e)}$u(e,n,r,s=!1){return new lp({Mu:e,methodName:n,Ku:r,path:zt.emptyPath(),Nu:!1,Qu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mV(t){const e=t._freezeSettings(),n=uu(t._databaseId);return new _V(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gV(t,e,n,r,s,i={}){const o=t.$u(i.merge||i.mergeFields?2:0,e,n,s);x0("Data must be an object, but it was:",o,r);const a=D0(r,o);let c,u;if(i.merge)c=new Dn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=yV(e,f,n);if(!o.contains(p))throw new _e(Q.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);EV(h,p)||h.push(p)}c=new Dn(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new pV(new bn(a),c,u)}function L0(t,e){if(M0(t=$n(t)))return x0("Unsupported field value:",e,t),D0(t,e);if(t instanceof N0)return function(r,s){if(!O0(s.Mu))throw s.qu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.qu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let c=L0(a,s.ku(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=$n(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return aM(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=At.fromDate(r);return{timestampValue:pc(s.serializer,i)}}if(r instanceof At){const i=new At(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pc(s.serializer,i)}}if(r instanceof _u)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zi)return{bytesValue:t0(s.serializer,r._byteString)};if(r instanceof En){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Wf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ap)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.qu("VectorValues must only contain numeric values.");return $f(a.serializer,c)})}}}}}}(r,s);throw s.qu(`Unsupported field value: ${ip(r)}`)}(t,e)}function D0(t,e){const n={};return kI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ws(t,(r,s)=>{const i=L0(s,e.Ou(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function M0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof At||t instanceof _u||t instanceof zi||t instanceof En||t instanceof N0||t instanceof ap)}function x0(t,e,n){if(!M0(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ip(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function yV(t,e,n){if((e=$n(e))instanceof op)return e._internalPath;if(typeof e=="string")return V0(t,e);throw vc("Field path arguments must be of type string or ",t,!1,void 0,n)}const vV=new RegExp("[~\\*/\\[\\]]");function V0(t,e,n){if(e.search(vV)>=0)throw vc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new op(...e.split("."))._internalPath}catch{throw vc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new _e(Q.INVALID_ARGUMENT,a+t+c)}function EV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(U0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TV extends F0{data(){return super.data()}}function U0(t,e){return typeof e=="string"?V0(t,e):e instanceof op?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _e(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class IV{convertValue(e,n="none"){switch(as(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ws(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Tt(o.doubleValue));return new ap(i)}convertGeoPoint(e){return new _u(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=nu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ma(e));default:return null}}convertTimestamp(e){const n=is(e);return new At(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_t.fromString(e);Qe(a0(r));const s=new ga(r.get(1),r.get(3)),i=new ye(r.popFirst(5));return s.isEqual(n)||wr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wV(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class B0 extends F0{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(U0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class xl extends B0{data(e={}){return super.data(e)}}class j0{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Mo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xl(this._firestore,this._userDataWriter,r.key,r,new Mo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _e(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new xl(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Mo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new xl(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Mo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:bV(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t){t=Tr(t,En);const e=Tr(t.firestore,Hi);return oV(pu(e),t._key).then(n=>H0(e,t,n))}class cp extends IV{constructor(e){super(),this.firestore=e}convertBytes(e){return new zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,n)}}function AV(t){t=Tr(t,Ua);const e=Tr(t.firestore,Hi),n=pu(e),r=new cp(e);return $0(t._query),aV(n,t._query).then(s=>new j0(e,r,t,s))}function CV(t,e){const n=Tr(t.firestore,Hi),r=hV(t),s=wV(t.converter,e);return RV(n,[gV(mV(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Er.exists(!1))]).then(()=>r)}function up(t,...e){var n,r,s;t=$n(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Oy(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Oy(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,h;if(t instanceof En)u=Tr(t.firestore,Hi),h=su(t._key.path),c={next:f=>{e[o]&&e[o](H0(u,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Tr(t,Ua);u=Tr(f.firestore,Hi),h=f._query;const p=new cp(u);c={next:y=>{e[o]&&e[o](new j0(u,p,f,y))},error:e[o+1],complete:e[o+2]},$0(t._query)}return function(p,y,w,P){const R=new sp(P),b=new np(y,R,w);return p.asyncQueue.enqueueAndForget(async()=>Zf(await yc(p),b)),()=>{R.eu(),p.asyncQueue.enqueueAndForget(async()=>ep(await yc(p),b))}}(pu(u),h,a,c)}function RV(t,e){return function(r,s){const i=new vr;return r.asyncQueue.enqueueAndForget(async()=>Kx(await iV(r),s,i)),i.promise}(pu(t),e)}function H0(t,e,n){const r=n.docs.get(e._key),s=new cp(t);return new B0(t,s,e._key,r,new Mo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){to=s})(Xi),tr(new Bn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Hi(new T2(r.getProvider("auth-internal")),new A2(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new _e(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ga(u.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),yn(Kg,"4.7.5",e),yn(Kg,"4.7.5","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="firebasestorage.googleapis.com",SV="storageBucket",PV=2*60*1e3,kV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Rr{constructor(e,n,r=0){super(dh(e),`Firebase Storage: ${n} (${dh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ir.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return dh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var sr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(sr||(sr={}));function dh(t){return"storage/"+t}function NV(){const t="An unknown error occurred, please check the error payload for server response.";return new ir(sr.UNKNOWN,t)}function OV(){return new ir(sr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function LV(){return new ir(sr.CANCELED,"User canceled the upload/download.")}function DV(t){return new ir(sr.INVALID_URL,"Invalid URL '"+t+"'.")}function MV(t){return new ir(sr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Ly(t){return new ir(sr.INVALID_ARGUMENT,t)}function G0(){return new ir(sr.APP_DELETED,"The Firebase app was deleted.")}function xV(t){return new ir(sr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Mn.makeFromUrl(e,n)}catch{return new Mn(e,"")}if(r.path==="")return r;throw MV(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(N){N.path_=decodeURIComponent(N.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${s}/o${p}`,"i"),w={bucket:1,path:3},P=n===z0?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",b=new RegExp(`^https?://${P}/${s}/${R}`,"i"),L=[{regex:a,indices:c,postModify:i},{regex:y,indices:w,postModify:u},{regex:b,indices:{bucket:1,path:2},postModify:u}];for(let N=0;N<L.length;N++){const H=L[N],$=H.regex.exec(e);if($){const A=$[H.indices.bucket];let E=$[H.indices.path];E||(E=""),r=new Mn(A,E),H.postModify(r);break}}if(r==null)throw DV(e);return r}}class VV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function c(){return a===2}let u=!1;function h(...R){u||(u=!0,e.apply(null,R))}function f(R){s=setTimeout(()=>{s=null,t(y,c())},R)}function p(){i&&clearTimeout(i)}function y(R,...b){if(u){p();return}if(R){p(),h.call(null,R,...b);return}if(c()||o){p(),h.call(null,R,...b);return}r<64&&(r*=2);let L;a===1?(a=2,L=0):L=(r+Math.random())*1e3,f(L)}let w=!1;function P(R){w||(w=!0,p(),!u&&(s!==null?(R||(a=2),clearTimeout(s),f(0)):R||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,P(!0)},n),P}function UV(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(t){return t!==void 0}function Dy(t,e,n,r){if(r<e)throw Ly(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ly(`Invalid value for '${t}'. Expected ${n} or less.`)}function BV(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ec;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ec||(Ec={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,n,r,s,i,o,a,c,u,h,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,w)=>{this.resolve_=y,this.reject_=w,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new vl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===Ec.NO_ERROR,c=i.getStatus();if(!a||jV(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Ec.ABORT;r(!1,new vl(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new vl(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());$V(c)?i(c):i()}catch(c){o(c)}else if(a!==null){const c=NV();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(s.canceled){const c=this.appDelete_?G0():LV();o(c)}else{const c=OV();o(c)}};this.canceled_?n(!1,new vl(!1,null,!0)):this.backoffId_=FV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&UV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function HV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function zV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function GV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function qV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function KV(t,e,n,r,s,i,o=!0){const a=BV(t.urlParams),c=t.url+a,u=Object.assign({},t.headers);return GV(u,e),HV(u,n),zV(u,i),qV(u,r),new WV(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function QV(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n){this._service=e,n instanceof Mn?this._location=n:this._location=Mn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Tc(e,n)}get root(){const e=new Mn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return QV(this._location.path)}get storage(){return this._service}get parent(){const e=YV(this._location.path);if(e===null)return null;const n=new Mn(this._location.bucket,e);return new Tc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw xV(e)}}function My(t,e){const n=e==null?void 0:e[SV];return n==null?null:Mn.makeFromBucketSpec(n,t)}class XV{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=z0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=PV,this._maxUploadRetryTime=kV,this._requests=new Set,s!=null?this._bucket=Mn.makeFromBucketSpec(s,this._host):this._bucket=My(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mn.makeFromBucketSpec(this._url,e):this._bucket=My(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Dy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Dy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tc(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new VV(G0());{const o=KV(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const xy="@firebase/storage",Vy="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV="storage";function ZV(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new XV(n,r,s,e,Xi)}function eF(){tr(new Bn(JV,ZV,"PUBLIC").setMultipleInstances(!0)),yn(xy,Vy,""),yn(xy,Vy,"esm2017")}eF();const fh=new WeakMap;function q0(t,e){return fh.has(e)||fh.set(e,t||{f:{},r:{},s:{},u:{}}),fh.get(e)}function tF(t,e,n,r){if(!t)return n;const[s,i]=K0(t);if(!s)return n;const o=q0(void 0,r)[s]||{},a=e||i;return a&&a in o?o[a]:n}function nF(t,e,n,r){if(!t)return;const[s,i]=K0(t);if(!s)return;const o=q0(void 0,r)[s],a=e||i;if(a)return n.then(c=>{o[a]=c}).catch(Yn),a}function K0(t){return SO(t)||PO(t)?["f",t.path]:kO(t)?["r",t.toString()]:NO(t)?["s",t.toString()]:[]}const ph=new WeakMap;function rF(t,e,n){const r=hf();ph.has(r)||ph.set(r,new Map);const s=ph.get(r),i=nF(e,n,t,r);return i&&s.set(i,t),i?()=>s.delete(i):Yn}const sF={toFirestore(t){return t},fromFirestore(t,e){return t.exists()?Object.defineProperties(t.data(e),{id:{value:t.id}}):null}};function Ad(t,e,n,r){if(!CO(t))return[t,{}];const s=[{},{}],i=Object.keys(n).reduce((a,c)=>{const u=n[c];return a[u.path]=u.data(),a},{});function o(a,c,u,h){c=c||{};const[f,p]=h;Object.getOwnPropertyNames(a).forEach(y=>{const w=Object.getOwnPropertyDescriptor(a,y);w&&!w.enumerable&&Object.defineProperty(f,y,w)});for(const y in a){const w=a[y];if(w==null||w instanceof Date||w instanceof At||w instanceof _u)f[y]=w;else if(ff(w)){const P=u+y;f[y]=P in n?c[y]:w.path,p[P]=w.converter?w:w.withConverter(r.converter)}else if(Array.isArray(w)){f[y]=Array(w.length);for(let P=0;P<w.length;P++){const R=w[P];R&&R.path in i&&(f[y][P]=i[R.path])}o(w,c[y]||f[y],u+y+".",[f[y],p])}else $s(w)?(f[y]={},o(w,c[y],u+y+".",[f[y],p])):f[y]=w}}return o(t,e,"",s),s}const hp={reset:!1,wait:!0,maxRefDepth:2,converter:sF,snapshotOptions:{serverTimestamps:"estimate"}};function Ic(t){for(const e in t)t[e].unsub()}function Cd(t,e,n,r,s,i,o,a,c){const[u,h]=Ad(r.data(t.snapshotOptions),df(e,n),s,t);i.set(e,n,u),Rd(t,e,n,s,h,i,o,a,c)}function iF({ref:t,target:e,path:n,depth:r,resolve:s,reject:i,ops:o},a){const c=Object.create(null);let u=Yn;return a.once?W0(t).then(h=>{h.exists()?Cd(a,e,n,h,c,o,r,s,i):(o.set(e,n,null),s())}).catch(i):u=up(t,h=>{h.exists()?Cd(a,e,n,h,c,o,r,s,i):(o.set(e,n,null),s())},i),()=>{u(),Ic(c)}}function Rd(t,e,n,r,s,i,o,a,c){const u=Object.keys(s);if(Object.keys(r).filter(P=>u.indexOf(P)<0).forEach(P=>{r[P].unsub(),delete r[P]}),!u.length||++o>t.maxRefDepth)return a(n);let f=0;const p=u.length,y=Object.create(null);function w(P){P in y&&++f>=p&&a(n)}u.forEach(P=>{const R=r[P],b=s[P],k=`${n}.${P}`;if(y[k]=!0,R)if(R.path!==b.path)R.unsub();else return;r[P]={data:()=>df(e,k),unsub:iF({ref:b,target:e,path:k,depth:o,ops:i,resolve:w.bind(null,k),reject:c},t),path:b.path}})}function oF(t,e,n,r,s,i){const o=Object.assign({},hp,i),{snapshotListenOptions:a,snapshotOptions:c,wait:u,once:h}=o,f="value";let p=We(u?[]:t.value);u||n.set(t,f,[]);const y=r;let w,P=Yn;const R=[],b={added:({newIndex:L,doc:N})=>{R.splice(L,0,Object.create(null));const H=R[L],[$,A]=Ad(N.data(c),void 0,H,o);n.add(dr(p),L,$),Rd(o,p,`${f}.${L}`,H,A,n,0,r.bind(null,N),s)},modified:({oldIndex:L,newIndex:N,doc:H})=>{const $=dr(p),A=R[L],E=$[L],[T,S]=Ad(H.data(c),E,A,o);R.splice(N,0,A),n.remove($,L),n.add($,N,T),Rd(o,p,`${f}.${N}`,A,S,n,0,r,s)},removed:({oldIndex:L})=>{const N=dr(p);n.remove(N,L),Ic(R.splice(L,1)[0])}};function k(L){const N=L.docChanges(a);if(!w&&N.length){w=!0;let H=0;const $=N.length,A=Object.create(null);for(let E=0;E<$;E++)A[N[E].doc.id]=!0;r=E=>{E&&E.id in A&&++H>=$&&(u&&(n.set(t,f,dr(p)),p=t),y(dr(p)),r=Yn)}}N.forEach(H=>{b[H.type](H)}),N.length||(u&&(n.set(t,f,dr(p)),p=t),r(dr(p)))}return h?AV(e).then(k).catch(s):P=up(e,k,s),L=>{if(P(),L){const N=typeof L=="function"?L():[];n.set(t,f,N)}R.forEach(Ic)}}function aF(t,e,n,r,s,i){const o=Object.assign({},hp,i),a="value",c=Object.create(null);r=OO(r,()=>df(t,a));let u=Yn;function h(f){f.exists()?Cd(o,t,a,f,c,n,0,r,s):(n.set(t,a,null),r(null))}return o.once?W0(e).then(h).catch(s):u=up(e,h,s),f=>{if(u(),f){const p=typeof f=="function"?f():null;n.set(t,a,p)}Ic(c)}}const Fy=Symbol();function lF(t,e){let n=Yn;const r=Object.assign({},hp,e),s=dr(t),i=r.target||We();DO()&&(r.once=!0);const o=tF(s,r.ssrKey,Fy,hf()),a=o!==Fy;a&&(i.value=o);let c=!a;const u=We(!1),h=We(),f=Sc(),p=xd();let y=Yn;function w(){let b=dr(t);const k=new Promise((L,N)=>{if(n(r.reset),!b)return n=Yn,L(null);u.value=c,c=!0,b.converter||(b=b.withConverter(r.converter)),n=(ff(b)?aF:oF)(i,b,cF,L,N,r)}).catch(L=>(f.value===k&&(h.value=L),Promise.reject(L))).finally(()=>{f.value===k&&(u.value=!1)});f.value=k}let P=Yn;(It(t)||typeof t=="function")&&(P=mr(t,w)),w(),s&&(y=rF(f.value,s,r.ssrKey)),es()&&Sv(()=>f.value),p&&Jy(R);function R(b=r.reset){P(),y(),n(b)}return Object.defineProperties(i,{error:{get:()=>h},data:{get:()=>i},pending:{get:()=>u},promise:{get:()=>f},stop:{get:()=>R}})}const cF={set:(t,e,n)=>bO(t,e,n),add:(t,e,n)=>t.splice(e,0,n),remove:(t,e)=>t.splice(e,1)};function uF(t,e){return lF(t,{target:We([]),...e})}function hF(t){return k0(hf(t))}function dF(t,{firebaseApp:e,modules:n=[]}){t.provide(uT,e);for(const r of n)r(e,t)}const io=t=>(cs("data-v-b55dc27e"),t=t(),us(),t),fF=io(()=>W("div",null,null,-1)),pF={class:"comments-title-bar"},_F=io(()=>W("div",null,null,-1)),mF={key:0,class:"comments-list"},gF={class:"comment-name"},yF={class:"font-segoe"},vF={class:"comment-input-bottom-line"},EF={class:"btn-group"},TF={class:"btn-group font-settings"},IF={key:0,class:"chapter-pager"},wF=io(()=>W("div",{class:"arrow"},"",-1)),bF={class:"prev-scene"},AF={key:0,class:"prev-chapterTitle"},CF={class:"scene"},RF={key:0,class:"chapterTitle"},SF=io(()=>W("div",{class:"arrow"},"",-1)),PF={class:"next-scene"},kF={key:0,class:"next-chapterTitle"},NF={key:2,class:"bottom-chapter-pager"},OF=io(()=>W("div",{class:"arrow"},"",-1)),LF={class:"prev-scene"},DF={key:0,class:"prev-chapterTitle"},MF=io(()=>W("div",{class:"arrow"},"",-1)),xF={class:"next-scene"},VF={key:0,class:"next-chapterTitle"},FF={__name:"Reader",props:["story","chapter"],setup(t){const e=t,n=Uc(),r=Us(),s=Sn(),i=Mt(),o=hF(),a=We($cookies.get("font-size")??1.25),c=We($cookies.get("font-family")??"Times New Roman"),u=be(()=>e.story.chapters[e.chapter-1]),h=be(()=>OE(e.story.chapters)),f=Oe=>{$cookies.set("font-size",Oe),a.value=Oe},p=Oe=>{const Te=Oe.target.value;$cookies.set("font-family",Te),c.value=Te},y=()=>D1.saveAsEpub(e.story.title,e.story.chapters,s("reader.epub-chapter"),e.story.chapterTitles),w=()=>{},P=()=>{},R=()=>n.push({name:"reader",params:{lang:r.params.lang,title:r.params.title,chapter:Math.max(1,e.chapter-1)}}),b=be(()=>e.chapter===1),k=()=>n.push({name:"reader",params:{lang:r.params.lang,title:r.params.title,chapter:Math.min(e.story.chapters.length,e.chapter+1)}}),L=be(()=>e.chapter===e.story.chapters.length),N=be(()=>!b.value||!L.value),H=We(!1),$=()=>{H.value=!0},A=()=>{H.value=!1},E=We(!1),T=()=>{E.value=!0},S=()=>{E.value=!1},O=uV(o,`${r.params.title}_${r.params.lang}_comments`),D=uF(O),C=We(!1),nt=()=>{C.value=!1},gt=()=>{C.value=!0},Ne=We(""),fe=We(""),Se=()=>{const Oe={name:Ne.value,text:fe.value};try{CV(O,Oe),Ne.value="",fe.value=""}catch(Te){console.error("Cannot add a comment: ",Te)}},yt=be(()=>`comments-overlay-${i.currentTheme}`),Ct=be(()=>`comment-input-name-${i.currentTheme}`),rt=be(()=>`comment-input-text-${i.currentTheme}`);return(Oe,Te)=>(de(),ge("div",null,[W("div",{class:Y(["comments-overlay",[C.value?"comments-visible":"comments-hidden",yt.value]])},[fF,W("div",{class:Y(["comments",[M(i).borderColor,M(i).primaryBackgroundColor]])},[W("div",pF,[W("button",{class:"close-comments",onClick:nt},"x"),J(Hc,{class:"comments-title",text:"Komentarze"}),_F]),M(D).length!==0?(de(),ge("div",mF,[(de(!0),ge(bt,null,bi(M(D),Je=>(de(),ge("div",{class:Y(["comment font-segoe",[M(i).secondaryBackgroundColor,M(i).primaryTextColor]])},[W("div",gF,he(Je.name),1),W("div",yF,he(Je.text),1)],2))),256))])):St("",!0),M(D).length===0?(de(),ge("div",{key:1,class:Y(["font-segoe",M(i).primaryTextColor])}," Brak komentarzy ",2)):St("",!0),W("div",{class:Y(["comment-input",M(i).secondaryBackgroundColor])},[wl(W("input",{class:Y(["comment-input-name font-segoe",[M(i).primaryTextColor,Ct.value]]),"onUpdate:modelValue":Te[0]||(Te[0]=Je=>Ne.value=Je),placeholder:"Pseudonim komentujcego...",type:"text"},null,2),[[V_,Ne.value]]),W("div",vF,[wl(W("textarea",{class:Y(["comment-input-text font-segoe",[M(i).primaryTextColor,rt.value]]),"onUpdate:modelValue":Te[1]||(Te[1]=Je=>fe.value=Je),placeholder:"Tekst komentarza..."},null,2),[[V_,fe.value]]),J(of,{text:"Dodaj",action:Se})])],2)],2)],2),W("div",{class:Y(["floating-bar",[M(i).primaryBackgroundColor,M(i).borderColor]])},[W("div",EF,[W("p",{class:Y(M(i).primaryTextColor)},he(M(s)("reader.download")),3),W("button",{href:"#",class:Y(["font-segoe",M(i).primaryTextColor]),onClick:w},"MOBI",2),W("button",{href:"#",class:Y(["font-segoe",M(i).primaryTextColor]),onClick:y},"ePUB",2),W("button",{href:"#",class:Y(["font-segoe",M(i).primaryTextColor]),onClick:P},he(M(s)("reader.sendToKindle")),3)]),W("div",TF,[W("p",{class:Y(["font-settings-a",M(i).primaryTextColor])},he(M(s)("reader.font")),3),wl(W("select",{class:Y(["font-settings-b",M(i).primaryTextColor]),"onUpdate:modelValue":Te[2]||(Te[2]=Je=>c.value=Je),onChange:Te[3]||(Te[3]=Je=>p(Je))},[W("option",{class:Y(M(i).primaryBackgroundColor),style:{"font-family":"'Times New Roman'"}},"Times New Roman",2),W("option",{class:Y(M(i).primaryBackgroundColor),style:{"font-family":"Georgia"}},"Georgia",2),W("option",{class:Y(M(i).primaryBackgroundColor),style:{"font-family":"Arial"}},"Arial",2),W("option",{class:Y(M(i).primaryBackgroundColor),style:{"font-family":"Verdana"}},"Verdana",2),W("option",{class:Y(M(i).primaryBackgroundColor),style:{"font-family":"'Segoe UI'"}},"Segoe UI",2),W("option",{class:Y(M(i).primaryBackgroundColor),style:{"font-family":"'Josefin Sans'"}},"Josefin Sans",2),W("option",{class:Y(M(i).primaryBackgroundColor),style:{"font-family":"'Yeseva One'"}},"Yeseva One",2),W("option",{class:Y(M(i).primaryBackgroundColor),style:{"font-family":"'Madimi One'"}},"Madimi One",2)],34),[[$A,c.value]]),W("span",{class:Y(["font-settings-c",M(i).primaryTextColor])},he(a.value*10),3),W("button",{class:Y(["font-settings-d",M(i).primaryTextColor]),onClick:Te[4]||(Te[4]=()=>f(a.value+.25))},"+",2),W("button",{class:Y(["font-settings-e",M(i).primaryTextColor]),onClick:Te[5]||(Te[5]=()=>f(1.25))},"100%",2),W("button",{class:Y(["font-settings-f",M(i).primaryTextColor]),onClick:Te[6]||(Te[6]=()=>f(a.value-.25))},"-",2)]),W("div",{class:"btn-group"},[W("p",{onClick:gt},"Komentarze")])],2),W("div",{class:Y(["white-panel",[M(i).primaryBackgroundColor,M(i).borderColor]])},[W("div",{class:Y(["stats font-segoe",M(i).secondaryTextColor])},he(h.value)+" "+he(M(s)("reader.signs"))+" |  "+he(e.story.year),3),W("div",{class:Y(["title",M(i).primaryTextColor])},he(e.story.title),3),N.value?(de(),ge("div",IF,[W("div",{class:Y(["prev-chapter",[M(i).secondaryTextColor,b.value?"transparent":"",H.value?M(i).primaryLinkColor:""]])},[wF,W("div",{class:Y(["scene-and-title navigable",[t.story.chapterTitles&&t.story.chapterTitles[e.chapter-2]?"gapped":""]]),onMouseenter:$,onMouseleave:A,onClick:R},[W("div",bF,he(M(s)("reader.epub-chapter"))+" "+he(e.chapter-1),1),t.story.chapterTitles?(de(),ge("div",AF,he(e.story.chapterTitles[e.chapter-2]),1)):St("",!0)],34)],2),W("div",{class:Y(["scene-and-title",[M(i).primaryTextColor,t.story.chapterTitles?"gapped":""]])},[W("div",CF,he(M(s)("reader.epub-chapter"))+" "+he(e.chapter),1),t.story.chapterTitles?(de(),ge("div",RF,he(e.story.chapterTitles[e.chapter-1]),1)):St("",!0)],2),W("div",{class:Y(["next-chapter",[M(i).secondaryTextColor,L.value?"transparent":"",E.value?M(i).primaryLinkColor:""]])},[SF,W("div",{class:Y(["scene-and-title navigable",[t.story.chapterTitles&&t.story.chapterTitles[e.chapter]?"gapped":""]]),onMouseenter:T,onMouseleave:S,onClick:k},[W("div",PF,he(M(s)("reader.epub-chapter"))+" "+he(e.chapter+1),1),t.story.chapterTitles?(de(),ge("div",kF,he(e.story.chapterTitles[e.chapter]),1)):St("",!0)],34)],2)])):St("",!0),(de(!0),ge(bt,null,bi(u.value,Je=>(de(),ge("div",{class:Y(["paragraph",M(i).primaryTextColor]),style:Ac({"font-size":`${a.value}rem`,"font-family":c.value})},he(Je),7))),256)),L.value?(de(),ge("div",{key:1,class:Y(["title",M(i).primaryTextColor])},he(M(s)("reader.theEnd")),3)):St("",!0),N.value?(de(),ge("div",NF,[W("div",{class:Y(["prev-chapter",[M(i).secondaryTextColor,b.value?"transparent":"",H.value?M(i).primaryLinkColor:""]])},[OF,W("div",{class:Y(["scene-and-title navigable",[t.story.chapterTitles&&t.story.chapterTitles[e.chapter-2]?"gapped":""]]),onMouseenter:$,onMouseleave:A,onClick:R},[W("div",LF,he(M(s)("reader.epub-chapter"))+" "+he(e.chapter-1),1),t.story.chapterTitles?(de(),ge("div",DF,he(e.story.chapterTitles[e.chapter-2]),1)):St("",!0)],34)],2),W("div",{class:Y(["next-chapter",[M(i).secondaryTextColor,L.value?"transparent":"",E.value?M(i).primaryLinkColor:""]])},[MF,W("div",{class:Y(["scene-and-title navigable",[t.story.chapterTitles&&t.story.chapterTitles[e.chapter]?"gapped":""]]),onMouseenter:T,onMouseleave:S,onClick:k},[W("div",xF,he(M(s)("reader.epub-chapter"))+" "+he(e.chapter+1),1),t.story.chapterTitles?(de(),ge("div",VF,he(e.story.chapterTitles[e.chapter]),1)):St("",!0)],34)],2)])):St("",!0)],2)]))}},UF=dt(FF,[["__scopeId","data-v-b55dc27e"]]),$F={__name:"ReaderView",setup(t){var c;const e=Cr(),n=Us(),r=n.params.lang,s=n.params.title,i=n.params.chapter?Number(n.params.chapter):1,o=((c=n==null?void 0:n.query)==null?void 0:c.type)??"story",a=Oi(Di(Object.assign({"../assets/blog/ai-ternet_en.json":()=>me(()=>import("./ai-ternet_en-DV60or7m.js"),__vite__mapDeps([])),"../assets/blog/ai-ternet_pl.json":()=>me(()=>import("./ai-ternet_pl-DV60or7m.js"),__vite__mapDeps([])),"../assets/blog/test_foo_en.json":()=>me(()=>import("./test_foo_en-B9hY7Fp9.js"),__vite__mapDeps([])),"../assets/blog/test_foo_pl.json":()=>me(()=>import("./test_foo_pl-B9hY7Fp9.js"),__vite__mapDeps([])),"../assets/story/bukowe_widziadlo_en.json":()=>me(()=>import("./bukowe_widziadlo_en-Dd4By8la.js"),__vite__mapDeps([])),"../assets/story/bukowe_widziadlo_pl.json":()=>me(()=>import("./bukowe_widziadlo_pl-Cw-oQJpN.js"),__vite__mapDeps([])),"../assets/story/klatwa_imetheru_en.json":()=>me(()=>import("./klatwa_imetheru_en-D1mlNx8Z.js"),__vite__mapDeps([])),"../assets/story/klatwa_imetheru_pl.json":()=>me(()=>import("./klatwa_imetheru_pl-DYDFeBdA.js"),__vite__mapDeps([])),"../assets/story/powstanie_na_brillar_en.json":()=>me(()=>import("./powstanie_na_brillar_en-Cmf-xK5o.js"),__vite__mapDeps([])),"../assets/story/powstanie_na_brillar_pl.json":()=>me(()=>import("./powstanie_na_brillar_pl-panKSRYT.js"),__vite__mapDeps([])),"../assets/story/projekt_eclipse_en.json":()=>me(()=>import("./projekt_eclipse_en-CZ_e4-86.js"),__vite__mapDeps([])),"../assets/story/projekt_eclipse_pl.json":()=>me(()=>import("./projekt_eclipse_pl-BWRKM81-.js"),__vite__mapDeps([])),"../assets/story/uefa_euro_2224_en.json":()=>me(()=>import("./uefa_euro_2224_en-BQKaS1zC.js"),__vite__mapDeps([])),"../assets/story/uefa_euro_2224_pl.json":()=>me(()=>import("./uefa_euro_2224_pl-C6lTpacK.js"),__vite__mapDeps([]))}),`../assets/${o}/${s}_${r}.json`));return e.value=r,(u,h)=>(de(),ge("main",null,[M(a)?(de(),er(UF,{key:0,story:M(a),chapter:M(i)},null,8,["story","chapter"])):St("",!0)]))}},BF="/assets/full_symbol-B0W1y7eG.svg",Y0=t=>(cs("data-v-0061902f"),t=t(),us(),t),jF={class:"h0"},WF=Y0(()=>W("div",{class:"h0-separators"},null,-1)),HF=Y0(()=>W("img",{class:"h0-background",src:BF},null,-1)),zF={__name:"H0",props:["text"],setup(t){const e=t;return(n,r)=>(de(),ge("div",jF,[J(Li,{class:"h0-text",text:e.text,colorful:"true"},null,8,["text"]),WF,HF]))}},mu=dt(zF,[["__scopeId","data-v-0061902f"]]),GF={class:"generic-view"},qF={__name:"AboutView",setup(t){const e=Cr(),n=Us(),r=Sn();return e.value=n.params.lang,(s,i)=>(de(),ge("main",GF,[J(mu,{text:M(r)("navbar.about"),colorful:"true"},null,8,["text"]),J(sf)]))}},KF=["src"],YF={class:"texts"},QF={__name:"BlogThumbnail",props:["title","variant"],setup(t){const e=t,n=Uc(),r=Cr(),s=Mt(),i=Oi(Di(Object.assign({"../assets/blog/covers/ai-ternet.jpg":()=>me(()=>import("./ai-ternet-TcOqYP5D.js"),__vite__mapDeps([])),"../assets/blog/covers/test_foo.jpg":()=>me(()=>import("./test_foo-TcOqYP5D.js"),__vite__mapDeps([]))}),`../assets/blog/covers/${e.title}.jpg`)),o=Oi(Di(Object.assign({"../assets/blog/ai-ternet_en.json":()=>me(()=>import("./ai-ternet_en-DV60or7m.js"),__vite__mapDeps([])),"../assets/blog/ai-ternet_pl.json":()=>me(()=>import("./ai-ternet_pl-DV60or7m.js"),__vite__mapDeps([])),"../assets/blog/test_foo_en.json":()=>me(()=>import("./test_foo_en-B9hY7Fp9.js"),__vite__mapDeps([])),"../assets/blog/test_foo_pl.json":()=>me(()=>import("./test_foo_pl-B9hY7Fp9.js"),__vite__mapDeps([]))}),`../assets/blog/${e.title}_${r.value}.json`)),a=be(()=>o.value.title),c=be(()=>o.value.description),u=be(()=>o.value.publicationDate),h=()=>{n.push({name:"reader",params:{lang:r.value,title:e.title},query:{type:"blog"}})};return(f,p)=>M(o)?(de(),ge("div",{key:0,class:Y([`entry-${e.variant}`,M(s).secondaryBackgroundColor]),onClick:h},[W("img",{class:"image",src:M(i)},null,8,KF),W("div",YF,[W("div",{class:Y(["font-segoe",M(s).primaryTextColor])},he(u.value),3),J(Gl,{text:a.value},null,8,["text"]),J(ns,{text:c.value},null,8,["text"])])],2)):St("",!0)}},ni=dt(QF,[["__scopeId","data-v-4f2ebabd"]]),XF={class:"generic-view"},JF={class:"spotlight"},ZF={class:"spotlight-right"},eU={class:"entries"},tU={__name:"BlogView",setup(t){const e=Cr(),n=Us(),r=Sn();e.value=n.params.lang;const s=We(new Set(Object.keys(Object.assign({"/src/assets/blog/ai-ternet_en.json":()=>me(()=>import("./ai-ternet_en-DV60or7m.js"),__vite__mapDeps([])),"/src/assets/blog/ai-ternet_pl.json":()=>me(()=>import("./ai-ternet_pl-DV60or7m.js"),__vite__mapDeps([])),"/src/assets/blog/test_foo_en.json":()=>me(()=>import("./test_foo_en-B9hY7Fp9.js"),__vite__mapDeps([])),"/src/assets/blog/test_foo_pl.json":()=>me(()=>import("./test_foo_pl-B9hY7Fp9.js"),__vite__mapDeps([]))})).map(o=>o.substring(17).slice(0,-8)))),i=be(()=>[...s.value][0]);return(o,a)=>(de(),ge("main",XF,[J(mu,{text:M(r)("navbar.blog")},null,8,["text"]),J(Gl,{class:"mt-1",text:"Najnowsze wpisy"}),W("div",JF,[J(ni,{title:i.value,variant:"vertical"},null,8,["title"]),W("div",ZF,[J(ni,{title:i.value,variant:"horizontal"},null,8,["title"]),J(ni,{title:i.value,variant:"horizontal"},null,8,["title"]),J(ni,{title:i.value,variant:"horizontal"},null,8,["title"])])]),J(Gl,{class:"mt-1",text:"Wszystkie wpisy"}),W("div",eU,[(de(!0),ge(bt,null,bi(s.value,c=>(de(),er(ni,{title:c,variant:"vertical"},null,8,["title"]))),256)),(de(!0),ge(bt,null,bi(s.value,c=>(de(),er(ni,{title:c,variant:"vertical"},null,8,["title"]))),256))])]))}},nU=dt(tU,[["__scopeId","data-v-c0fe96cd"]]),rU={class:"generic-view"},sU={__name:"BooksView",setup(t){const e=Cr(),n=Us(),r=Sn();return e.value=n.params.lang,(s,i)=>(de(),ge("main",rU,[J(mu,{text:M(r)("navbar.books")},null,8,["text"]),J(sf)]))}},iU={class:"icon-button"},oU=["src"],aU={class:"icon-button-label font-segoe"},lU={__name:"IconButton",props:["text","image"],setup(t){const e=t,n="/",r=be(()=>`${n}${e.image}`);return(s,i)=>(de(),ge("button",iU,[W("img",{class:"icon-button-icon font-segoe",src:r.value},null,8,oU),W("span",aU,he(e.text),1)]))}},El=dt(lU,[["__scopeId","data-v-c81325d9"]]),cU={class:"story-thumbnail-header"},uU={class:"story-thumbnail-tags"},hU=["src"],dU={class:"story-thumbnail-bottom-up"},fU={class:"story-thumbnail-bottom-up-right"},pU={class:"story-thumbnail-bottom-bottom"},_U={class:"story-thumbnail-tuple story-thumbnail-bottom-bottom-left-description"},mU={class:"story-thumbnail-bottom-bottom-right"},gU={class:"story-thumbnail-tuple"},yU={class:"story-thumbnail-tuple"},vU={__name:"StoryThumbnail",props:["title"],setup(t){const e=t,n=Uc(),r=Cr(),s=Mt(),i=Oi(Di(Object.assign({"../assets/story/covers/bukowe_widziadlo.jpg":()=>me(()=>import("./bukowe_widziadlo-BE5LQi21.js"),__vite__mapDeps([])),"../assets/story/covers/klatwa_imetheru.jpg":()=>me(()=>import("./klatwa_imetheru-C_DbcsKm.js"),__vite__mapDeps([])),"../assets/story/covers/powstanie_na_brillar.jpg":()=>me(()=>import("./powstanie_na_brillar-DT_6LhVt.js"),__vite__mapDeps([])),"../assets/story/covers/projekt_eclipse.jpg":()=>me(()=>import("./projekt_eclipse-C8iHQxIp.js"),__vite__mapDeps([])),"../assets/story/covers/uefa_euro_2224.jpg":()=>me(()=>import("./uefa_euro_2224-DqqanQtN.js"),__vite__mapDeps([]))}),`../assets/story/covers/${e.title}.jpg`)),o=Oi(Di(Object.assign({"../assets/story/bukowe_widziadlo_en.json":()=>me(()=>import("./bukowe_widziadlo_en-Dd4By8la.js"),__vite__mapDeps([])),"../assets/story/bukowe_widziadlo_pl.json":()=>me(()=>import("./bukowe_widziadlo_pl-Cw-oQJpN.js"),__vite__mapDeps([])),"../assets/story/klatwa_imetheru_en.json":()=>me(()=>import("./klatwa_imetheru_en-D1mlNx8Z.js"),__vite__mapDeps([])),"../assets/story/klatwa_imetheru_pl.json":()=>me(()=>import("./klatwa_imetheru_pl-DYDFeBdA.js"),__vite__mapDeps([])),"../assets/story/powstanie_na_brillar_en.json":()=>me(()=>import("./powstanie_na_brillar_en-Cmf-xK5o.js"),__vite__mapDeps([])),"../assets/story/powstanie_na_brillar_pl.json":()=>me(()=>import("./powstanie_na_brillar_pl-panKSRYT.js"),__vite__mapDeps([])),"../assets/story/projekt_eclipse_en.json":()=>me(()=>import("./projekt_eclipse_en-CZ_e4-86.js"),__vite__mapDeps([])),"../assets/story/projekt_eclipse_pl.json":()=>me(()=>import("./projekt_eclipse_pl-BWRKM81-.js"),__vite__mapDeps([])),"../assets/story/uefa_euro_2224_en.json":()=>me(()=>import("./uefa_euro_2224_en-BQKaS1zC.js"),__vite__mapDeps([])),"../assets/story/uefa_euro_2224_pl.json":()=>me(()=>import("./uefa_euro_2224_pl-C6lTpacK.js"),__vite__mapDeps([]))}),`../assets/story/${e.title}_${r.value}.json`)),a=be(()=>o.value.title),c=be(()=>o.value.description),u=be(()=>o.value.year),h=be(()=>o.value.chapters.length),f=be(()=>["#sci-fi","#space-opera","#military","#action"]),p=be(()=>OE(o.value.chapters)),y=We(!1),w=()=>{y.value=!0},P=()=>{y.value=!1},R=()=>{n.push({name:"reader",params:{lang:r.value,title:e.title},query:{type:"story"}})};return(b,k)=>M(o)?(de(),ge("div",{key:0,class:"story-thumbnail",onMouseenter:w,onMouseleave:P},[W("div",cU,[y.value?St("",!0):(de(),er(Li,{key:0,text:a.value},null,8,["text"])),y.value?(de(),er(Li,{key:1,text:a.value,colorful:"true"},null,8,["text"])):St("",!0),W("div",uU,[(de(!0),ge(bt,null,bi(f.value,L=>(de(),ge("span",{class:Y(["story-thumbnail-tag font-segoe",M(s).secondaryTextColor])},he(L),3))),256))])]),W("img",{class:Y(["story-thumbnail-cover",M(s).shadowColor]),src:M(i)},null,10,hU),W("div",{class:Y(["story-thumbnail-bottom",[y.value?M(s).onHoverBackgroundColor:M(s).secondaryBackgroundColor]])},[W("div",dU,[J(of,{text:"Przeczytaj",action:R}),W("div",fU,[J(El,{text:"Pobierz ePUB",image:"download.svg"}),J(El,{text:"Pobierz mobi",image:"download.svg"}),J(El,{text:"Wylij do Kindle",image:"send.svg"}),J(El,{text:"Udostpnij",image:"share.svg"})])]),W("div",pU,[W("div",_U,[W("div",{class:Y(["story-thumbnail-label font-josefin",M(s).secondaryTextColor])},"Opis",2),J(ns,{class:"story-thumbnail-description",text:c.value},null,8,["text"])]),W("div",mU,[W("div",gU,[W("div",{class:Y(["story-thumbnail-label font-josefin",M(s).secondaryTextColor])},"Rok wydania",2),W("div",{class:Y(["story-thumbnail-value font-segoe",M(s).secondaryTextColor])},he(u.value),3)]),W("div",yU,[W("div",{class:Y(["story-thumbnail-label font-josefin",M(s).secondaryTextColor])},"Dugo",2),W("div",{class:Y(["story-thumbnail-value font-segoe",M(s).secondaryTextColor])},he(p.value)+" znakw, "+he(h.value)+" rozdziaw",3)])])])],2)],32)):St("",!0)}},EU=dt(vU,[["__scopeId","data-v-cf7f2c7c"]]),TU={class:"generic-view"},IU={class:"entries"},wU={__name:"StoriesView",setup(t){const e=Cr(),n=Us(),r=Sn();e.value=n.params.lang;const s=We(new Set(Object.keys(Object.assign({"/src/assets/story/bukowe_widziadlo_en.json":()=>me(()=>import("./bukowe_widziadlo_en-Dd4By8la.js"),__vite__mapDeps([])),"/src/assets/story/bukowe_widziadlo_pl.json":()=>me(()=>import("./bukowe_widziadlo_pl-Cw-oQJpN.js"),__vite__mapDeps([])),"/src/assets/story/klatwa_imetheru_en.json":()=>me(()=>import("./klatwa_imetheru_en-D1mlNx8Z.js"),__vite__mapDeps([])),"/src/assets/story/klatwa_imetheru_pl.json":()=>me(()=>import("./klatwa_imetheru_pl-DYDFeBdA.js"),__vite__mapDeps([])),"/src/assets/story/powstanie_na_brillar_en.json":()=>me(()=>import("./powstanie_na_brillar_en-Cmf-xK5o.js"),__vite__mapDeps([])),"/src/assets/story/powstanie_na_brillar_pl.json":()=>me(()=>import("./powstanie_na_brillar_pl-panKSRYT.js"),__vite__mapDeps([])),"/src/assets/story/projekt_eclipse_en.json":()=>me(()=>import("./projekt_eclipse_en-CZ_e4-86.js"),__vite__mapDeps([])),"/src/assets/story/projekt_eclipse_pl.json":()=>me(()=>import("./projekt_eclipse_pl-BWRKM81-.js"),__vite__mapDeps([])),"/src/assets/story/uefa_euro_2224_en.json":()=>me(()=>import("./uefa_euro_2224_en-BQKaS1zC.js"),__vite__mapDeps([])),"/src/assets/story/uefa_euro_2224_pl.json":()=>me(()=>import("./uefa_euro_2224_pl-C6lTpacK.js"),__vite__mapDeps([]))})).map(i=>i.substring(18).slice(0,-8))));return(i,o)=>(de(),ge("main",TU,[J(mu,{text:M(r)("navbar.stories")},null,8,["text"]),W("div",IU,[(de(!0),ge(bt,null,bi(s.value,a=>(de(),er(EU,{title:a,type:"story"},null,8,["title"]))),256))])]))}},bU=dt(wU,[["__scopeId","data-v-10fafc24"]]),AU=zC({history:IC("/"),routes:[{path:"/",name:"home",component:N1},{path:"/:lang/about",name:"about",component:qF},{path:"/:lang/stories",name:"stories",component:bU},{path:"/:lang/books",name:"books",component:sU},{path:"/:lang/blog",name:"blog",component:nU},{path:"/:lang/:title/:chapter?",name:"reader",component:$F}]});function Sd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Pd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Uy(Object(n),!0).forEach(function(r){Sd(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uy(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var CU=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(r,s){if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("script");if(o.async=!0,o.src=e,o.defer=n.defer,n.preconnectOrigin){var a=document.createElement("link");a.href=n.preconnectOrigin,a.rel="preconnect",i.appendChild(a)}i.appendChild(o),o.onload=r,o.onerror=s}})},RU=function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];if(!r.length)return e;var i=r.shift();if(!(!xo(e)||!xo(i))){for(var o in i)xo(i[o])?(e[o]||Object.assign(e,Sd({},o,{})),t(e[o],i[o])):Object.assign(e,Sd({},o,i[o]));return t.apply(void 0,[e].concat(r))}},$a=function(){return!(typeof window>"u"||typeof document>"u")},$y=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;$a()},SU=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return $y('Missing "appName" property inside the plugin options.',e.app_name==null),$y('Missing "name" property in the route.',e.screen_name==null),e};function PU(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=t.split("/"),r=e.split("/");return n[0]===""&&e[e.length-1]==="/"&&n.shift(),r.join("/")+n.join("/")}var kU=function(){return{bootstrap:!0,onReady:null,onError:null,onBeforeTrack:null,onAfterTrack:null,pageTrackerTemplate:null,customResourceURL:"https://www.googletagmanager.com/gtag/js",customPreconnectOrigin:"https://www.googletagmanager.com",deferScriptLoad:!1,pageTrackerExcludedRoutes:[],pageTrackerEnabled:!0,enabled:!0,disableScriptLoad:!1,pageTrackerScreenviewEnabled:!1,appName:null,pageTrackerUseFullPath:!1,pageTrackerPrependBase:!0,pageTrackerSkipSamePath:!0,globalDataLayerName:"dataLayer",globalObjectName:"gtag",defaultGroupName:"default",includes:null,config:{id:null,params:{send_page_view:!1}}}},Q0={},NU=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=kU();Q0=RU(n,e)},Tn=function(){return Q0},xs=function(){var t,e=Tn(),n=e.globalObjectName;!$a()||typeof window[n]>"u"||(t=window)[n].apply(t,arguments)},dp=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Tn(),s=r.config,i=r.includes;xs.apply(void 0,["config",s.id].concat(e)),Array.isArray(i)&&i.forEach(function(o){xs.apply(void 0,["config",o.id].concat(e))})},By=function(e,n){$a()&&(window["ga-disable-".concat(e)]=n)},X0=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=Tn(),n=e.config,r=e.includes;By(n.id,t),Array.isArray(r)&&r.forEach(function(s){return By(s.id,t)})},J0=function(){X0(!0)},OU=function(){X0(!1)},Z0,LU=function(e){Z0=e},fp=function(){return Z0},qs=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Tn(),r=n.includes,s=n.defaultGroupName;e.send_to==null&&Array.isArray(r)&&r.length&&(e.send_to=r.map(function(i){return i.id}).concat(s)),xs("event",t,e)},ew=function(t){if($a()){var e;if(typeof t=="string")e={page_path:t};else if(t.path||t.fullPath){var n=Tn(),r=n.pageTrackerUseFullPath,s=n.pageTrackerPrependBase,i=fp(),o=i&&i.options.base,a=r?t.fullPath:t.path;e=Pd(Pd({},t.name&&{page_title:t.name}),{},{page_path:s?PU(a,o):a})}else e=t;e.page_location==null&&(e.page_location=window.location.href),e.send_page_view==null&&(e.send_page_view=!0),qs("page_view",e)}},tw=function(t){var e=Tn(),n=e.appName;if(t){var r;typeof t=="string"?r={screen_name:t}:r=t,r.app_name=r.app_name||n,qs("screen_view",r)}},DU=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];qs.apply(void 0,["exception"].concat(e))},MU=function(t){dp("linker",t)},xU=function(t){qs("timing_complete",t)},VU=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];xs.apply(void 0,["set"].concat(e))},FU=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];qs.apply(void 0,["refund"].concat(e))},UU=function(t){qs("purchase",t)},$U=function(t){dp({custom_map:t})},BU=Object.freeze({__proto__:null,query:xs,config:dp,optOut:J0,optIn:OU,pageview:ew,screenview:tw,exception:DU,linker:MU,time:xU,set:VU,refund:FU,purchase:UU,customMap:$U,event:qs}),jU=function(e){e.config.globalProperties.$gtag=BU},WU=function(){if($a()){var t=Tn(),e=t.enabled,n=t.globalObjectName,r=t.globalDataLayerName;return window[n]==null&&(window[r]=window[r]||[],window[n]=function(){window[r].push(arguments)}),window[n]("js",new Date),e||J0(),window[n]}},jy=function(e){return Pd({send_page_view:!1},e)},nw=function(){var t=Tn(),e=t.config,n=t.includes;xs("config",e.id,jy(e.params)),Array.isArray(n)&&n.forEach(function(r){xs("config",r.id,jy(r.params))})},Wy=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=Tn(),r=n.appName,s=n.pageTrackerTemplate,i=n.pageTrackerScreenviewEnabled,o=n.pageTrackerSkipSamePath;if(!(o&&t.path===e.path)){var a=t;if(Ce(s)?a=s(t,e):i&&(a=SU({app_name:r,screen_name:t.name})),i){tw(a);return}ew(a)}},Hy=function(e){var n=Tn(),r=n.pageTrackerExcludedRoutes;return r.includes(e.path)||r.includes(e.name)},HU=function(){var t=Tn(),e=t.onBeforeTrack,n=t.onAfterTrack,r=fp();r.isReady().then(function(){wi().then(function(){var s=r.currentRoute;nw(),!Hy(s.value)&&Wy(s.value)}),r.afterEach(function(s,i){wi().then(function(){Hy(s)||(Ce(e)&&e(s,i),Wy(s,i),Ce(n)&&n(s,i))})})})},zU=function(){var t=Tn(),e=t.onReady,n=t.onError,r=t.globalObjectName,s=t.globalDataLayerName,i=t.config,o=t.customResourceURL,a=t.customPreconnectOrigin,c=t.deferScriptLoad,u=t.pageTrackerEnabled,h=t.disableScriptLoad,f=!!(u&&fp());if(WU(),f?HU():nw(),!h)return CU("".concat(o,"?id=").concat(i.id,"&l=").concat(s),{preconnectOrigin:a,defer:c}).then(function(){e&&e(window[r])}).catch(function(p){return n&&n(p),p})},GU=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;jU(e),NU(n),LU(r),Tn().bootstrap&&zU()},rw={exports:{}};(function(t,e){(function(){var n={expires:"1d",path:"; path=/",domain:"",secure:"",sameSite:"; SameSite=Lax",partitioned:""},r={install:function(s,i){i&&this.config(i.expires,i.path,i.domain,i.secure,i.sameSite,i.partitioned),s.prototype&&(s.prototype.$cookies=this),s.config&&s.config.globalProperties&&(s.config.globalProperties.$cookies=this,s.provide("$cookies",this)),s.$cookies=this},config:function(s,i,o,a,c,u){n.expires=s||"1d",n.path=i?"; path="+i:"; path=/",n.domain=o?"; domain="+o:"",n.secure=a?"; Secure":"",n.sameSite=c?"; SameSite="+c:"; SameSite=Lax",n.partitioned=u?"; Partitioned":""},get:function(s){var i=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(s).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;if(i&&(i.substring(0,1)==="{"&&i.substring(i.length-1,i.length)==="}"||i.substring(0,1)==="["&&i.substring(i.length-1,i.length)==="]"))try{i=JSON.parse(i)}catch{return i}return i},set:function(s,i,o,a,c,u,h,f){if(s){if(/^(?:expires|max\-age|path|domain|secure|SameSite)$/i.test(s))throw new Error('Cookie name illegality. Cannot be set to ["expires","max-age","path","domain","secure","SameSite"]	 current key name: '+s)}else throw new Error("Cookie name is not found in the first argument.");i&&typeof i=="object"&&(i=JSON.stringify(i));var p="";if(o=o===void 0?n.expires:o,o&&o!==0)switch(o.constructor){case Number:o===1/0||o===-1?p="; expires=Fri, 31 Dec 9999 23:59:59 GMT":p="; max-age="+o;break;case String:if(/^(?:\d+(y|m|d|h|min|s))$/i.test(o)){var y=o.replace(/^(\d+)(?:y|m|d|h|min|s)$/i,"$1");switch(o.replace(/^(?:\d+)(y|m|d|h|min|s)$/i,"$1").toLowerCase()){case"m":p="; max-age="+ +y*2592e3;break;case"d":p="; max-age="+ +y*86400;break;case"h":p="; max-age="+ +y*3600;break;case"min":p="; max-age="+ +y*60;break;case"s":p="; max-age="+y;break;case"y":p="; max-age="+ +y*31104e3;break}}else p="; expires="+o;break;case Date:p="; expires="+o.toUTCString();break}return document.cookie=encodeURIComponent(s)+"="+encodeURIComponent(i)+p+(c?"; domain="+c:n.domain)+(a?"; path="+a:n.path)+(u===void 0?n.secure:u?"; Secure":"")+(h===void 0?n.sameSite:h?"; SameSite="+h:"")+(f===void 0?n.partitioned:f?"; Partitioned":""),this},remove:function(s,i,o){return!s||!this.isKey(s)?!1:(document.cookie=encodeURIComponent(s)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(o?"; domain="+o:n.domain)+(i?"; path="+i:n.path)+"; SameSite=Lax",!0)},isKey:function(s){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(s).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){if(!document.cookie)return[];for(var s=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),i=0;i<s.length;i++)s[i]=decodeURIComponent(s[i]);return s}};t.exports=r,typeof window<"u"&&(window.$cookies=r)})()})(rw);var qU=rw.exports;const KU=O1(qU),YU={pl:{"work-in-progress":"Strona w budowie",navbar:{powstanie_na_brillar:"Powstanie na Brillar",kltwa_imetheru:"Kltwa Imetheru",projekt_eclipse:"Projekt Eclipse",stories:"Opowiadania",books:"Ksiki",blog:"Blog",about:"O mnie"},welcome:{text:"Witaj na Alternacie, mojej skromnej stronie. Nazywam si Adam Kurzawa i zapraszam Ci do spdzenia kilku chwil pord tekstw mojego autorstwa. Odnajdziesz tutaj opowiadania sci-fi, rnotematyczne artykuy na blogu oraz prologi z ksiek. Jeli doceniasz moj twrczo, moesz",text2:"lub",buycoffee:"postawi mi kaw",patronite:"zosta moim patronem"},"alternata-ad":{h2:"7 historii z alternatywnych wiatw",h3_0:"Nordycka space opera, sowiaskie demony cyberprzestrzeni, pismo starsze ni Wszechwiat, objawienie religijne na innej planecie... Debiutancki zbir opowiada przeniesie Was w wiat skrzywionych rzeczywistoci. Odwiedzicie przyszo blisk i bardzo dalek. Zmienicie przyszo Ziemi, czowieka, a nawet Ukadu Sonecznego. Zdecydujecie o losach marsjaskich kolonii oraz caego Chrzecijastwa.",h3_1:"Zapraszam do lektury!",h3_2:"Zawiera opowiadania:",title_0:"W drodze do Walhalii",title_1:"Krzyk pord Laniakei",title_2:"Nowa ba",title_3:"Sowa Wszechwiata",title_4:"Przesilenie marsjaskie",title_5:"Gwiazda czasu",title_6:"Konflikt objawie",h4:"Premiera marzec 2026"},reader:{download:"Pobierz",theme:"Motyw",dark:"Ciemny",light:"Jasny",sepia:"Sepia",sendToKindle:"Wylij do Kindle",fontSize:"Rozmiar tekstu",font:"Czcionka",previousChapter:"Poprzednia scena",nextChapter:"Nastpna scena","epub-chapter":"Scena",signs:"znakw",theEnd:"Koniec"},copyrights:{arr:"Wszelkie prawa zastrzeone. Strona i jej zawarto s wasnoci Adama Kurzawy i objte penymi prawami autorskimi. Nieautoryzowane rozpowszechnianie w jakimkolwiek celu jest cile zabronione.",cookies:"Strona wykorzystuje Google Analytics do zbierania danych na temat iloci wizyt i krajw pochodzenia adresu IP. Wszystkie dane s przetwarzane przez Google i usug Google Analytics. Ta strona nie zbiera ani nie przechowuje danych w inny sposb."}},en:{"work-in-progress":"This section is still under construction",navbar:{powstanie_na_brillar:"Brillar Uprising",kltwa_imetheru:"Curse of Imetheru",projekt_eclipse:"Project Eclipse",stories:"Short stories",books:"Books",blog:"Blog",about:"About me"},welcome:{text:"Welcome to Alternata, my personal website. My name is Adam Kurzawa and I invite you to spend some time among the texts authored by me. Here you will find science fiction stories, various thematic articles on the blog, and book prologues. If you appreciate my work, you can",text2:"or",buycoffee:"buy me a coffee",patronite:"become my patron"},"alternata-ad":{h2:"7 stories from alternate worlds",h3_0:"Nordic space opera, Slavic demons luring in cyberspace, scripture older than the Universe, a religious revelation on another planet... The debut collection of short stories will transport you into a world of twisted realities. You will visit both near and very distant futures. You will alter the fate of Earth, humanity, and the entire Solar System. You will decide the fate of Martian colonies and the entire Christianity.",h3_1:"I dare you to read it!",h3_2:"Content:",title_0:"To Valhalla",title_1:"Scream Amidst the Laniakea",title_2:"A Modern Tale",title_3:"Script of the Universe",title_4:"Martian Solstice",title_5:"Timestar",title_6:"Conflict of Revelations",h4:"In stores from March 2026"},reader:{download:"Download",theme:"Theme",dark:"Dark",light:"Light",sepia:"Sepia",sendToKindle:"Send to Kindle",fontSize:"Font size",font:"Font",previousChapter:"Previous chapter",nextChapter:"Next chapter","epub-chapter":"Chapter",signs:"characters",theEnd:"The end"},copyrights:{arr:"All rights reserved. This webpage and its content are owned by Adam Kurzawa and protected by author's copyrights. Unauthorized use is strictly prohibited.",cookies:"Strona wykorzystuje Google Analytics do zbierania danych na temat iloci wizyt i krajw pochodzenia adresu IP. Wszystkie dane s przetwarzane przez Google i usug Google Analytics. Ta strona nie zbiera ani nie przechowuje danych w inny sposb."}}},QU={apiKey:"AIzaSyAQgcJv-ifxAfCOKUuiH34wVqBf5OumX-U",authDomain:"alternata-1ec4f.firebaseapp.com",projectId:"alternata-1ec4f",storageBucket:"alternata-1ec4f.firebasestorage.app",messagingSenderId:"563669973679",appId:"1:563669973679:web:f0b680231de8a24938b25a",measurementId:"G-Y055NTBVC6"},sw=HE(QU);k0(sw);const XU=qS({legacy:!1,locale:"pl",messages:YU}),JU=YC(),ZU={bootstrap:!1,enabled:!0,config:{id:"G-6Z9LBMVFVMc",params:{anonymize_ip:!0}}},e4={},Ks=WA(jP);Ks.use(XU);Ks.use(AU);Ks.use(JU);Ks.use(GU,ZU);Ks.use(KU,e4);Ks.use(dF,{firebaseApp:sw});Ks.mount("#app");
